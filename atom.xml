<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Wesley&#39;s Blog</title>
  <icon>https://iwesley.top/icon.png</icon>
  <subtitle>æˆ‘æœªæ›¾çæƒœçš„ï¼Œæˆ‘ä¸å†æ‹¥æœ‰ã€‚</subtitle>
  <link href="https://iwesley.top/atom.xml" rel="self"/>
  
  <link href="https://iwesley.top/"/>
  <updated>2025-07-17T13:51:27.824Z</updated>
  <id>https://iwesley.top/</id>
  
  <author>
    <name>Wesley</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>é‡è¯»ã€Šç™¾å¹´å­¤ç‹¬ã€‹åçš„å›å¿†</title>
    <link href="https://iwesley.top/article/6eef96b2/"/>
    <id>https://iwesley.top/article/6eef96b2/</id>
    <published>2025-07-17T13:47:54.000Z</published>
    <updated>2025-07-17T13:51:27.824Z</updated>
    
    <content type="html"><![CDATA[<p>å¤šå¹´ä»¥åï¼Œé¢å¯¹ç”µå­ç›¸å†Œçš„å¾€å¹´ä»Šæ—¥ï¼Œé¢å¯¹ä»æœªä¸¢å¤±å´æ²‰å¯‚å·²ä¹…çš„çŸ­ä¿¡ï¼Œä»–ä¼šæ¸…æ™°åœ°å›å¿†èµ·åå¹´å‰é‚£æ®µæ—§æ—¶å…‰â€”â€”åœ¨äººæ¥äººå¾€çš„æ•™å®¤é•¿å»Šé‡Œä¸å¥¹æ¬¢ä¹äº¤è°ˆï¼Œé“ƒå£°å“èµ·ä»ç„¶æ„Ÿè§‰æ„çŠ¹æœªå°½ï¼Œé’æ˜¥çš„ä½è¯­æ··åˆç€å°˜åŸƒçš„å¾®å…‰é£˜æµ®ï¼›åœ¨é»„è‰²çš„ä¿¡çº¸ä¸Šå†™ä¸‹è¿‡ä¹¦ç±è¯»åæ„Ÿï¼Œå†™ä¸‹è¿‡å½¼æ­¤çš„ç¾å¥½ç¥æ„¿ä¸é¼“åŠ±ï¼Œä¹Ÿå†™ä¸‹è¿‡å¯¹ç”Ÿæ´»çš„æ„Ÿæ‚Ÿï¼Œé»‘è‰²çš„å¢¨è¿¹æ‰¿è½½äº†ä¸€æ®µé’æ˜¥èˆæ›²ï¼›åœ¨ä¸Šå­¦å‰ï¼Œä»–æœ‰æ„æ— æ„åœ°æœ›å‘çª—å¤–ï¼Œçœ‹åˆ°å¥¹çš„èº«å½±ç»è¿‡ï¼Œå¿ƒé‡Œé£˜å¿½ä¸å®šï¼›åœ¨ä¸€ä¸ªæ— å¸¸çš„å‘¨æœ«ï¼Œä»–ååœ¨æ•™å®¤é‡Œæ›¾é‡å¤å¬ç€æŸä¸€é¦–æ­Œï¼Œå†…å¿ƒå……æ»¡ç€çº ç»“ï¼Œç›´åˆ°ä»Šå¤©å†æ¬¡å”±èµ·ä»ç„¶æ„Ÿæ…¨ä¸‡åƒã€‚åæ¥ï¼Œä»–æ„è¯†åˆ°è¿‡åˆ†çš„å…³å¿ƒå¯èƒ½å¼•èµ·äº†å¥¹çš„é€ƒé¿å’Œæ— å¿ƒçš„æ— è§†ï¼Œä»–å†³å®šç”»å¥½ç•Œé™ã€‚åœ¨ä¸€ä¸ªå¤œæ™šç›¸èšåï¼Œä»–éª‘è‡ªè¡Œè½¦é€å¥¹å›å®¶ï¼Œå¯èƒ½æ˜¯å› ä¸ºå¤§é£æˆ–è€…æ²™å­è¿›äº†çœ¼ç›ï¼Œæœ‰çƒ­æ³ªæµäº†å‡ºæ¥ï¼Œä»–æ„Ÿè§‰åé¢å¯èƒ½å†ä¹Ÿæ²¡æœ‰è§é¢çš„æœºä¼šäº†ã€‚</p><p>æ­¤åçš„è¿‡å¹´æœŸé—´ï¼Œæœ‰ä¸€æ¬¡ä»–ä»¬åœ¨è¶…å¸‚ç›¸é‡ï¼Œå¥½åƒé™Œç”Ÿäººä¸€æ ·ï¼Œå½¼æ­¤é—®å€™åå°±æ­¤åˆ«è¿‡ã€‚è¿˜æ˜¯å¤ªå¹´è½»ï¼Œå¦‚æœå¯ä»¥é‡æ¥ï¼Œä»–ä»¬å¯ä»¥ä¸€èµ·åä¸‹æ¥å–æ¯å¥¶èŒ¶ï¼Œèšèšæ—§ã€‚ä»–å’Œæœ‹å‹çš„èšä¼šä¸­ï¼Œè¿˜æ˜¯èƒ½ç»å¸¸å¬åˆ°å¥¹çš„æ¶ˆæ¯ï¼Œä»–ä¸ä½œå£°ï¼Œåªæ˜¯è†å¬ã€‚</p><p>å­¤ç‹¬æ¥è‡ªè„†å¼±çš„æ•æ„Ÿã€‚</p><p>ç°åœ¨ï¼Œä»–ä»¬ä¸ç»å¸¸è”ç»œäº†ã€‚å¹´åˆä»–çœ‹ç€å¥¹æ¯•ä¸šçš„ç…§ç‰‡æ—¶ï¼Œçœ‹åˆ°äº†å’Œåå¹´å‰ä¸€æ ·çº¯çœŸåŠ¨äººçš„ç¬‘å®¹ï¼Œå²æœˆæ©ç›–ä¸ä½å¥¹æ˜äº®çš„çœ¼ç›ï¼Œç¥æ„¿å¥¹å¹³å®‰å¿«ä¹ï¼</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;å¤šå¹´ä»¥åï¼Œé¢å¯¹ç”µå­ç›¸å†Œçš„å¾€å¹´ä»Šæ—¥ï¼Œé¢å¯¹ä»æœªä¸¢å¤±å´æ²‰å¯‚å·²ä¹…çš„çŸ­ä¿¡ï¼Œä»–ä¼šæ¸…æ™°åœ°å›å¿†èµ·åå¹´å‰é‚£æ®µæ—§æ—¶å…‰â€”â€”åœ¨äººæ¥äººå¾€çš„æ•™å®¤é•¿å»Šé‡Œä¸å¥¹æ¬¢ä¹äº¤è°ˆï¼Œé“ƒå£°å“èµ·ä»ç„¶æ„Ÿè§‰æ„çŠ¹æœªå°½ï¼Œé’æ˜¥çš„ä½è¯­æ··åˆç€å°˜åŸƒçš„å¾®å…‰é£˜æµ®ï¼›åœ¨é»„è‰²çš„ä¿¡çº¸ä¸Šå†™ä¸‹è¿‡ä¹¦ç±è¯»åæ„Ÿï¼Œå†™ä¸‹è¿‡å½¼æ­¤çš„ç¾å¥½ç¥æ„¿ä¸é¼“åŠ±ï¼Œä¹Ÿå†™ä¸‹è¿‡å¯¹ç”Ÿæ´»çš„æ„Ÿæ‚Ÿ</summary>
        
      
    
    
    
    <category term="éšç¬”" scheme="https://iwesley.top/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
    <category term="éšç¬”" scheme="https://iwesley.top/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>è¯´è¯´9æœˆ8å·ä»¥æ¥çš„çŸ­å­¦æœŸ</title>
    <link href="https://iwesley.top/article/daa12744/"/>
    <id>https://iwesley.top/article/daa12744/</id>
    <published>2025-07-06T14:45:52.000Z</published>
    <updated>2025-07-06T15:02:16.572Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ç¿»çœ‹ä¾¿ç­¾çœ‹åˆ°äº†ä¸€ç¯‡æ—§æ–‡ï¼Œå†™äº2017å¹´9æœˆ16å·ä¸‹åˆ1ç‚¹35åˆ†</p></blockquote><p>å—¯â€¦â€¦æˆ–è€…å¯ä»¥è¯´æ˜¯ä¸€æ¬¡â€œå‡ç ”ç©¶ç”Ÿâ€â€œå‡å­¦é•¿â€çš„ç»å†â€¦â€¦ï¼Œå› ä¸ºä»–ä»¬æ˜¯å‡†å¤‡è¯»å¤§ä¸‰å¤§å››çš„çœŸå­¦é•¿å­¦å§â€¦â€¦</p><p>è¿™ä¸ªçŸ­å­¦æœŸä¸»è¦æ˜¯ç”±æˆ‘ä»¬å®éªŒå®¤æ‰¿æ‹…çš„ä¸€ä¸ªpicå•ç‰‡æœºçŸ­å­¦æœŸå­¦ä¹ ä»»åŠ¡ï¼Œæˆ‘ä»¬å¼€å§‹æ˜¯ç»™ä»–ä»¬è®²è®²è¯¾ï¼Œè®²ä¸€äº›è½¯ä»¶æ“ä½œå’Œä¸€äº›åŸºæœ¬é—®é¢˜ï¼Œåæ¥åŸºæœ¬å°±æ˜¯ä¸€ä¸ªåŠ©æ•™çš„è§’è‰²ï¼Œè¾…åŠ©ä»–ä»¬è§£å†³ä¸€äº›é—®é¢˜ï¼Œæœ€åå†è´Ÿè´£éªŒæ”¶ä¸€ä¸‹å°±okäº†â€¦â€¦</p><p>è¿™æœŸé—´å‘ç”Ÿäº†ä¸¤æ¬¡å°´å°¬çš„äº‹ï¼Œä¸€æ¬¡æ˜¯è€å¸ˆä»‹ç»æˆ‘ä»¬æ—¶ï¼Œè¯´æˆ‘ä»¬æ˜¯ç ”ç©¶ç”ŸğŸ˜‚ï¼Œå½“æ—¶çš„ååº”å°±æ˜¯å°´å°¬åœ°ç¬‘ç¬‘â€¦â€¦ç¬¬äºŒæ¬¡å°´å°¬å‘ç”Ÿåœ¨ä»Šå¤©ï¼Œæœ‰ä¸€ä½åŒå­¦é—®æˆ‘ä¸€äº›å…³äºç ”ç©¶ç”Ÿå¯¼å¸ˆçš„é—®é¢˜ï¼Œæˆ‘å‹‰å¼ºè¯´äº†ä¸€äº›ï¼Œæœ€åè¿˜æ˜¯å¦è®¤äº†è¿™ä¸ªèº«ä»½ï¼Œå‹‰å¼ºåœ°ç»•å‡ºå»äº†ï¼Œä¹Ÿæ²¡è¯´æ˜¯å¤§ä¸€çš„â€¦â€¦</p><blockquote><p>å—¯â€¦â€¦è®©æˆ‘æƒ³èµ·äº†è€ç½—çš„ä¸€ä¸ªæ•…äº‹<br>æˆ‘å°çš„æ—¶å€™å‘¢ï¼Œè„¸çš®åšå«â€œè„¸çš®åšâ€ï¼Œæ— è€»å«â€œæ— è€»â€ï¼Œç°åœ¨éƒ½å«å¿ƒç†ç´ è´¨å¥½ã€‚(lolâ€¦) çœŸå¥‡æ€ªï¼åƒæˆ‘è·Ÿå‡ ä¸ªæœ‹å‹å»çˆ¬å±±ï¼Œç„¶åä¸‹æ¥ç´¯äº†ï¼Œåœ¨é‚£ä¸ªé•¿å‡³ä¸Šï¼Œæˆ‘ä»¬5ã€6ä¸ªåæˆä¸€æ’ä¼‘æ¯ï¼Œç„¶åå¤§å®¶æ‹¿äº†ä¸€äº›ç“œå­ï¼Œç„¶åæ‹¿äº†ä¸ªå¡‘æ–™è¢‹ï¼Œå—‘å®Œäº†ç“œå­å°±æ‰”åˆ°å¡‘æ–™è¢‹é‡Œå»äº†ï¼Œä½†æ˜¯åƒå®Œæ‰‹ä¸é»‘äº†å—ï¼Ÿäºæ˜¯å¤§å®¶æå‡ºä¸€ç‚¹çº¸å·¾ï¼Œäº’ç›¸åˆ†ï¼Œç„¶åæŠŠæ‰‹æ“¦ä¸€æ“¦ã€‚ç„¶åæŠŠé‚£ä¸ªå°±æ”¾åˆ°åº§ä½ä¸Šäº†ï¼Œç»“æœä¸€é˜µé£ä¸€å¹å‘¢éƒ½åˆ®åœ°ä¸Šäº†ï¼Œä¸æ˜¯æ•…æ„æ‰”åœ°ä¸Šçš„ï¼Œè¢«åˆ®åˆ°åœ°ä¸Šå»äº†ï¼Œç„¶åååœ¨é‚£å„¿æ²¡èµ°å˜›ï¼Œä¸€æ‡’ï¼Œæš‚æ—¶å°±æ²¡æ‹£ï¼Œéƒ½ä¸‹äº†å±±ï¼ŒæŒºç´¯çš„ã€‚ç»“æœæ¸…æ´äººå‘˜å°±è¿‡æ¥äº†ï¼Œè¯´â€œå“ï½è¿™ä¸ªçº¸æ˜¯ä¸æ˜¯ä½ ä»¬ç»™æ‰”çš„å•Šï¼Ÿâ€ç„¶åæˆ‘è„¸ä¸€ä¸‹å°±çº¢äº†ï¼Œç„¶åä»–ä»¬å‡ ä¸ªéƒ½æ²¡äº‹ï¼Œ(lolâ€¦) ç„¶åæˆ‘è¯´â€œæ˜¯â€ï¼Œç„¶åä»–è¯´â€œç½šæ¬¾â€ï¼Œæˆ‘è¯´â€œå¥½â€ï¼Œç„¶åæˆ‘å°±æŠŠç½šæ¬¾äº¤äº†ï¼Œæˆ‘åˆè‡ªå·±æŠŠé‚£çº¸ç»™æ‹£èµ·æ¥äº†ã€‚ç„¶åé‚£ä¸ªç½šæ¬¾çš„äººèµ°äº†ä»¥åï¼Œä»–ä»¬å‡ ä¸ªäººå°±çœ‹ç€æˆ‘è¯´â€œå“ï¼Œè€ç½—ä½ æ€ä¹ˆå¿ƒç†ç´ è´¨é‚£ä¹ˆå·®ï¼Ÿâ€(lolâ€¦) â€œä¸æ‰¿è®¤ä¸å°±è¡Œäº†ä¹ˆï¼Ÿâ€ä½†æ˜¯ä½ è„¸å·²ç»çº¢äº†ï¼Œæ‰€ä»¥ä½ ä¸æ‰¿è®¤ä¹Ÿä¸è¡Œã€‚â€œä½ æ€ä¹ˆå¿ƒç†ç´ è´¨é‚£ä¹ˆå·®ï¼Ÿâ€å¥½æˆ‘å°±å¥‡æ€ªäº†ï¼Œæˆ‘æ‰çŸ¥é“â€œå¿ƒç†ç´ è´¨â€æ˜¯è¿™ä¸ªæ„æ€ã€‚è¿‡å»æˆ‘ä»¬å«â€œæ— è€»â€ï¼Œç°åœ¨å«â€œå¿ƒç†ç´ è´¨â€ã€‚æ˜æ˜æ˜¯ä½ å¹²çš„ï¼Œä½ æ€ä¹ˆèƒ½å¿ƒç†ç´ è´¨é‚£ä¹ˆå¥½å‘¢ï¼Ÿ(lolâ€¦) å¥½â€¦â€¦è¿™æ˜¯â€¦â€¦é¢˜è¿˜æ²¡è®²å‘¢ï¼(lolâ€¦) å‘å¤§å®¶éƒ‘é‡é“æ­‰ï¼(lolâ€¦)</p></blockquote><p>å“å‘€ï¼Œè¯šå®æ˜¯ä¸€ä¸ªå¥¢ä¾ˆçš„å“è´¨ï¼</p><p>çŸ­å­¦æœŸæ€»ä½“æ¥è¯´æ„Ÿè§‰è¿˜æ˜¯ä¸é”™çš„ï¼Œè™½ç„¶å¤´ä¸‰å¤©å¯èƒ½æ˜¯å› ä¸ºç”Ÿç‰©é’Ÿæ²¡è°ƒèŠ‚è¿‡æ¥ï¼Œè¿ç»­å¤±çœ ï¼Œç²¾ç¥ä¸å¥½ï¼Œä½†åæ¥æ…¢æ…¢å°±å¾ˆå¿«ç¡ç€äº†â€¦â€¦ç»™ä»–ä»¬è®²è¯¾ï¼Œè¾…åŠ©ä»–ä»¬ï¼Œæœ‰ç§å›åˆ°é«˜ä¸­å¸®åˆ«äººè§£é¢˜çš„æ„Ÿè§‰ï¼Œå¯¹ï¼Œé‚£ç§æ„Ÿè§‰ç‰¹åˆ«ç¾å¥½ï¼å“ˆå“ˆï¼</p><p>å“¦ï¼ŒæœŸé—´å®éªŒå®¤ä¸¾è¡Œäº†â€œå­µåŒ–å™¨æ¯â€çš„ç¬¬ä¸€å±Šç¾½æ¯›çƒæ¯”èµ›ï¼Œé‚£å¤©æ˜¯9æœˆ9å·ï¼Œé‚£å¤©ç”±äºä¸€äº›äººå¼ƒèµ›ï¼Œæˆ‘ç›´æ¥å°±è·³è¿‡ç¬¬ä¸€è½®ï¼Œç›´æ¥æ™‹çº§äº†â€¦â€¦ä¸‹åˆï¼Œè¿æ‰“äº†ä¸‰å±€ï¼Œéƒ½æ¯”è¾ƒå¹¸è¿æƒŠé™©åœ°è·èƒœäº†ï¼Œæˆ‘éƒ½æ²¡æƒ³åˆ°å¾—åˆ°äº†ä¸€ç­‰å¥–ğŸ˜œâ€¦â€¦è™½ç„¶å­¦äº†ä¸€å­¦æœŸçš„ç¾½æ¯›çƒï¼Œä½†æ„Ÿè§‰é«˜è¿œçƒè¿™äº›éƒ½æ²¡æ€ä¹ˆè¿ç”¨ï¼Œè¿˜æ˜¯ä»»é‡é“è¿œâ€¦â€¦</p><p>é‚£äº›å¹´ï¼Œæ›¾ç»åœ¨å­µåŒ–å™¨æ¯ä¸Šèµ°è¿‡è¿™ä¹ˆä¸€ä¸ªè¡€è‚‰ä¹‹èº¯â€¦â€¦<img src="https://cdn.jsdelivr.net/gh/wesley666/picgo/img2025/20250706225434744.jpg" alt="Notes_1751813220024"></p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ç¿»çœ‹ä¾¿ç­¾çœ‹åˆ°äº†ä¸€ç¯‡æ—§æ–‡ï¼Œå†™äº2017å¹´9æœˆ16å·ä¸‹åˆ1ç‚¹35åˆ†&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å—¯â€¦â€¦æˆ–è€…å¯ä»¥è¯´æ˜¯ä¸€æ¬¡â€œå‡ç ”ç©¶ç”Ÿâ€â€œå‡å­¦é•¿â€çš„ç»å†â€¦â€¦ï¼Œå› ä¸ºä»–ä»¬æ˜¯å‡†å¤‡è¯»å¤§ä¸‰å¤§å››çš„çœŸå­¦é•¿å­¦å§â€¦â€¦&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªçŸ­å­¦æœŸä¸»è¦æ˜¯ç”±æˆ‘ä»¬å®éªŒå®¤æ‰¿</summary>
        
      
    
    
    
    <category term="éšç¬”" scheme="https://iwesley.top/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
    <category term="éšç¬”" scheme="https://iwesley.top/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>å®‰å“å¯¹å¤–å‘å¸ƒå·¥ç¨‹æºç :æ€ä¹ˆåšåˆ°ä»…UIå±‚å…¬å¸ƒ</title>
    <link href="https://iwesley.top/article/9f1bc6ae/"/>
    <id>https://iwesley.top/article/9f1bc6ae/</id>
    <published>2025-06-22T08:37:36.000Z</published>
    <updated>2025-06-22T11:59:26.009Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘æ–°å®¢æˆ·è¦æ±‚å°†è½¯ä»¶çš„ä»£ç å…¬å¼€ç»™ä»–ä»¬ï¼Œå…è®¸ä»–ä»¬è‡ªå·±ä¿®æ”¹ UIï¼Œè¿›è¡Œå®šåˆ¶ã€‚ç”±äºæˆ‘ä»¬å·¥ç¨‹åŒ…å«å…¶ä»–æ ¸å¿ƒæ¨¡å—ï¼Œä¸èƒ½å…¨éƒ¨å¼€æ”¾ï¼Œæ‰€ä»¥éœ€è¦å°†é UI æ¨¡å—è¿›è¡Œæ•´åˆå¹¶æ··æ·†å†å‘å¸ƒã€‚</p><p>ç”±äºå·¥ç¨‹å…·æœ‰è‰¯å¥½çš„æ¨¡å—åŒ–ï¼Œæ‰€ä»¥ä¸€å¼€å§‹æƒ³åˆ°çš„æ˜¯å‚è€ƒ<a href="https://iwesley.top/article/a43c0ba5/">å®‰å“å®˜æ–¹ç‰ˆfat-aar:ä½¿ç”¨Fused Libraryå°†å¤šä¸ªAndroidåº“å‘å¸ƒä¸ºä¸€ä¸ªåº“ - Wesleyâ€™s Blog</a>å°†é UI æ¨¡å—åˆå¹¶æˆä¸€ä¸ª aarã€‚</p><p>ä½†æœ‰æŒ‘æˆ˜ï¼š</p><ul><li><p>ä¾èµ–ä¼ é€’å¾ˆéš¾å¤„ç†ï¼Œå°±ç®—å¤„ç†äº†ä¹Ÿä¸æ–¹ä¾¿åç»­ç»´æŠ¤</p></li><li><p>å­˜åœ¨éƒ¨åˆ†å†…ç½‘ SDK ä¾èµ–</p></li></ul><p>ä¸ºäº†ä¸æ”¹å˜ maven çš„ç®¡ç†æ–¹å¼ï¼Œå†³å®šä½¿ç”¨æœ¬åœ° maven çš„æ–¹å¼ã€‚</p><p>å¯ä»¥å…ˆç”¨<code>gradlew build --scan</code>ç”Ÿæˆä¸€æ£µä¾èµ–æ ‘ï¼Œç½‘é¡µç‰ˆæ–¹ä¾¿æŸ¥çœ‹ app æœ‰å“ªäº›ä¾èµ–ï¼Œè¿˜å¯ä»¥å®šä½å†…ç½‘çš„ä¾èµ–æ¥è‡ªäºå“ªä¸ªåœ°å€ã€‚</p><h2 id="å®æ–½"><a href="#å®æ–½" class="headerlink" title="å®æ–½"></a>å®æ–½</h2><p>åœ¨gradle.properties å®šä¹‰æœ¬åœ° maven è·¯å¾„</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs groovy">LOCAL_MAVEN_URL=maven_repo<br>GROUP_ID=com.wesley.test<br>SDK_VERSION=<span class="hljs-number">1.0</span><span class="hljs-number">.0</span> #ç»Ÿä¸€æ§åˆ¶æ‰€æœ‰æ¨¡å—ç‰ˆæœ¬<br></code></pre></td></tr></table></figure><p>settings.gradleå¼•å…¥æœ¬åœ°ä¾èµ–</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs groovy">maven &#123;<br>            url = uri(<span class="hljs-string">&quot;file://$&#123;rootProject.projectDir&#125;/$&#123;LOCAL_MAVEN_URL&#125;&quot;</span>)<br><br>        &#125;<br></code></pre></td></tr></table></figure><p>å„è‡ªæ¨¡å—æ¥å…¥maven-publish</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs groovy">plugins &#123;<br>    alias(libs.plugins.android.library)<br>    alias(libs.plugins.kotlin.android)<br>    id <span class="hljs-string">&#x27;maven-publish&#x27;</span><br>&#125;<br><span class="hljs-keyword">def</span> ARTIFACT_ID=<span class="hljs-string">&#x27;base-base&#x27;</span><br>android &#123;<br>    <span class="hljs-comment">//ä¸èƒ½å‘å¸ƒæºç ç»™ç¬¬ä¸‰æ–¹</span><br>    publishing &#123;<br>        singleVariant(<span class="hljs-string">&#x27;release&#x27;</span>) <span class="hljs-comment">// ä¸ç”Ÿæˆ sources JAR</span><br>    &#125;<br><br>    ...............<br><br>     <span class="hljs-comment">//å¦‚æœæœ‰æ¨¡å—é‡åï¼Œæ¯”å¦‚ feature:base, base:base, éœ€è¦å®šä¹‰</span><br>    compileOptions &#123;<br>        kotlinOptions.freeCompilerArgs += [<span class="hljs-string">&#x27;-module-name&#x27;</span>, <span class="hljs-string">&quot;$GROUP_ID.$ARTIFACT_ID&quot;</span>]<br>    &#125;<br>    <br>&#125;<br><br><br>publishing &#123;<br>    publications &#123;<br>        maven(MavenPublication) &#123;<br>            groupId GROUP_ID<br>            artifactId ARTIFACT_ID<br>            version SDK_VERSION<br><br>            afterEvaluate &#123;<br>                from components.release<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    repositories &#123;<br>        maven &#123;<br>            url rootProject.file(LOCAL_MAVEN_URL).toURI()<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>å¦‚æœæ¨¡å—å­˜åœ¨å¤šä¸ª flavorï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs groovy">plugins &#123;<br>    alias(libs.plugins.android.library)<br>    alias(libs.plugins.kotlin.android)<br>    id <span class="hljs-string">&#x27;maven-publish&#x27;</span><br>&#125;<br>android &#123;<br>    publishing &#123;<br>        multipleVariants &#123;<br>            allVariants()<br>            <span class="hljs-comment">//withJavadocJar()</span><br>        &#125;<br>    &#125;<br>&#125;<br><br>publishing &#123;<br>    publications &#123;<br>        maven(MavenPublication) &#123;<br>            groupId GROUP_ID<br>            artifactId <span class="hljs-string">&quot;feature-xxx&quot;</span><br>            version SDK_VERSION<br><br>            afterEvaluate &#123;<br>                from components.<span class="hljs-keyword">default</span><br>            &#125;<br>        &#125;<br>    &#125;<br><br>    repositories &#123;<br>        maven &#123;<br>            url rootProject.file(LOCAL_MAVEN_URL).toURI()<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœè¦åœ¨å‘å¸ƒæ—¶æ§åˆ¶æŸäº›ä»£ç ä¸æ··æ·†æˆ–è€…ä¾èµ–æ–¹å¼å˜æ›´ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">// åœ¨æ ¹é¡¹ç›®çš„ build.gradle ä¸­</span><br>ext &#123;<br>    <span class="hljs-comment">// å®šä¹‰åˆ¤æ–­æ˜¯å¦æ˜¯å‘å¸ƒä»»åŠ¡çš„æ–¹æ³•</span><br>    isPublishTask = &#123; -&gt;<br>        gradle.startParameter.taskNames.any &#123;<br>            it.startsWith(<span class="hljs-string">&quot;publish&quot;</span>)<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-keyword">if</span> (isPublishTask()) &#123;<br>        <span class="hljs-comment">// å‘å¸ƒæ—¶å°† aar æ‰“åŒ…è¿› sdk</span><br>        println(<span class="hljs-string">&quot;wesley publish&quot;</span>)<br>        <span class="hljs-comment">//embed(project( &quot;:feature:testAAR&quot; ))</span><br>        <span class="hljs-comment">// id(&quot;com.kezong.fat-aar&quot;)</span><br>        embed project(<span class="hljs-attr">path:</span> <span class="hljs-string">&quot;:feature:testAAR&quot;</span>, <span class="hljs-attr">configuration:</span> <span class="hljs-string">&#x27;default&#x27;</span>)<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        implementation(project( <span class="hljs-string">&quot;:feature:testAAR&quot;</span> ))<br>    &#125;<br></code></pre></td></tr></table></figure><h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><p>å¯¹äºä¸æºå¸¦ aar åŒ…çš„æ¨¡å—ï¼Œæ¯”å¦‚æŸ B æ¨¡å—implementation(project( â€œ:base:baseâ€ ))ï¼Œå¦‚æœ:base:base ä¹Ÿé…ç½®äº† publish ä»»åŠ¡ï¼Œä¾èµ–å®ƒçš„æ¨¡å—ä¸éœ€è¦ä¿®æ”¹æˆè¿œç¨‹ä¾èµ–æ–¹å¼ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿé—®äº†ä¸€ä¸‹ AIï¼š</p><blockquote><h3 id="æ ¸å¿ƒåŸå› ï¼šé¡¹ç›®å†…ä¾èµ–ï¼ˆProject-Dependencyï¼‰-vs-Maven-ä¾èµ–ï¼ˆMaven-Dependencyï¼‰çš„è½¬æ¢"><a href="#æ ¸å¿ƒåŸå› ï¼šé¡¹ç›®å†…ä¾èµ–ï¼ˆProject-Dependencyï¼‰-vs-Maven-ä¾èµ–ï¼ˆMaven-Dependencyï¼‰çš„è½¬æ¢" class="headerlink" title="æ ¸å¿ƒåŸå› ï¼šé¡¹ç›®å†…ä¾èµ–ï¼ˆProject Dependencyï¼‰ vs. Maven ä¾èµ–ï¼ˆMaven Dependencyï¼‰çš„è½¬æ¢"></a>æ ¸å¿ƒåŸå› ï¼šé¡¹ç›®å†…ä¾èµ–ï¼ˆProject Dependencyï¼‰ vs. Maven ä¾èµ–ï¼ˆMaven Dependencyï¼‰çš„è½¬æ¢</h3><ol><li><strong>åœ¨æ¨¡å— A çš„æ„å»ºæœŸé—´ï¼š (<code>implementation project(&quot;:base:base&quot;)</code>)</strong><ul><li>å½“ Gradle æ„å»ºä½ çš„ <code>A</code> æ¨¡å—æ—¶ï¼Œå®ƒçœ‹åˆ°äº† <code>implementation project(&quot;:base:base&quot;)</code>ã€‚</li><li>è¿™é‡Œçš„ <code>project(...)</code> å‘Šè¯‰ Gradleï¼šâ€œè¿™æ˜¯ä¸€ä¸ª<strong>é¡¹ç›®å†…ä¾èµ–</strong>ã€‚ä½ ä¸éœ€è¦å»è¿œç¨‹ä»“åº“ä¸‹è½½ä»»ä½•ä¸œè¥¿ï¼Œç›´æ¥åœ¨æœ¬æ¬¡æ„å»ºä¸­æ‰¾åˆ° <code>:base:base</code> æ¨¡å—ï¼Œç¼–è¯‘å®ƒï¼Œç„¶åè®© <code>A</code> æ¨¡å—ä½¿ç”¨å®ƒçš„ä»£ç å³å¯ã€‚â€</li><li>åœ¨è¿™ä¸ªé˜¶æ®µï¼Œä¸€åˆ‡éƒ½åœ¨ä½ çš„æœ¬åœ°é¡¹ç›®ä¸­è¿›è¡Œï¼Œä¸ Maven ä»“åº“å’Œç‰ˆæœ¬ <code>1.1</code> æ˜¯å¦å·²å‘å¸ƒ<strong>å®Œå…¨æ— å…³</strong>ã€‚</li></ul></li><li><strong>åœ¨å‘å¸ƒæ¨¡å— A æ—¶ï¼šï¼ˆç”Ÿæˆ <code>pom.xml</code>ï¼‰</strong><ul><li>å½“ä½ è¿è¡Œ <code>publish</code> ä»»åŠ¡æ—¶ï¼Œ<code>maven-publish</code> æ’ä»¶çš„èŒè´£æ˜¯ä¸ºæ¨¡å— <code>A</code> åˆ›å»ºä¸€ä¸ªå…ƒæ•°æ®æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯ <code>pom.xml</code>ã€‚</li><li>è¿™ä¸ª POM æ–‡ä»¶æ˜¯ç»™<strong>å¤–éƒ¨ç”¨æˆ·</strong>çœ‹çš„ã€‚å¤–éƒ¨ç”¨æˆ·ï¼ˆæ¯”å¦‚ä½ çš„åŒäº‹æˆ–è€…ä¸€ä¸ªCIæœåŠ¡å™¨ï¼‰æ²¡æœ‰ä½ é¡¹ç›®çš„å®Œæ•´æºç ï¼Œä»–ä»¬éœ€è¦é€šè¿‡ Maven åæ ‡ï¼ˆgroupId:artifactId:versionï¼‰æ¥ä¸‹è½½ä¾èµ–ã€‚</li><li>å› æ­¤ï¼Œ<code>maven-publish</code> æ’ä»¶å¿…é¡»å°†é¡¹ç›®å†…ä¾èµ– <code>project(&quot;:base:base&quot;)</code> <strong>â€œç¿»è¯‘â€</strong> æˆä¸€ä¸ªå¤–éƒ¨ç”¨æˆ·å¯ä»¥ç†è§£çš„ Maven ä¾èµ–ã€‚</li></ul></li></ol><h3 id="â€œç¿»è¯‘â€çš„è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ"><a href="#â€œç¿»è¯‘â€çš„è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ" class="headerlink" title="â€œç¿»è¯‘â€çš„è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ"></a>â€œç¿»è¯‘â€çš„è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ</h3><p><code>maven-publish</code> æ’ä»¶éå¸¸æ™ºèƒ½ï¼Œå®ƒä¼šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p><ol><li><p>å®ƒå‘ç° <code>A</code> ä¾èµ–äº <code>project(&quot;:base:base&quot;)</code>ã€‚</p></li><li><p>å®ƒä¼šå»æ£€æŸ¥ <code>:base:base</code> æ¨¡å—çš„ <code>build.gradle.kts</code> æ–‡ä»¶ã€‚</p></li><li><p>å®ƒåœ¨æ–‡ä»¶ä¸­æ‰¾åˆ°äº† </p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">publishing</span><br></code></pre></td></tr></table></figure><p> é…ç½®å—ï¼Œå¹¶è¯»å–äº†é‡Œé¢å®šä¹‰çš„ Maven åæ ‡ï¼š</p><ul><li><code>groupId: &quot;com.wesley.test&quot;</code></li><li><code>artifactId: &quot;base-base&quot;</code></li><li><code>version: &quot;1.1&quot;</code></li></ul></li><li><p>ç„¶åï¼Œå®ƒå°†è¿™äº›ä¿¡æ¯å¿ å®åœ°å†™å…¥ <code>A</code> æ¨¡å—çš„ <code>pom.xml</code> æ–‡ä»¶ä¸­ï¼Œç”Ÿæˆäº†ä½ çœ‹åˆ°çš„ <code>&lt;dependency&gt;</code> å—ã€‚</p></li></ol><blockquote><p><strong>ä¸€ä¸ªå½¢è±¡çš„æ¯”å–»ï¼š</strong> è¿™å°±åƒä½ åœ¨å†™ä¸€ä»½èœè°±ï¼ˆå‘å¸ƒæ¨¡å— Aï¼‰ã€‚ä½ åœ¨èœè°±é‡Œå†™åˆ°éœ€è¦â€œæˆ‘ç¥–æ¯çš„ç§˜åˆ¶é…±æ–™â€ï¼ˆé¡¹ç›®å†…ä¾èµ– <code>:base:base</code>ï¼‰ã€‚ä¸ºäº†è®©åˆ«äººä¹Ÿèƒ½åšå‡ºè¿™é“èœï¼Œä½ å¿…é¡»åœ¨èœè°±çš„é…æ–™è¡¨ä¸Šå†™æ¸…æ¥šè¿™ç§é…±æ–™åœ¨è¶…å¸‚é‡Œçš„å•†å“åå’Œå“ç‰Œï¼ˆMavenåæ ‡ <code>com.wesley.test:base-base:1.1</code>ï¼‰ï¼Œè€Œä¸æ˜¯åªå†™â€œæˆ‘ç¥–æ¯çš„ç§˜åˆ¶é…±æ–™â€ã€‚</p><p><code>maven-publish</code> å°±æ˜¯é‚£ä¸ªè´Ÿè´£æŠŠâ€œæˆ‘ç¥–æ¯çš„ç§˜åˆ¶é…±æ–™â€ç¿»è¯‘æˆå•†å“åçš„è§’è‰²ã€‚å®ƒå¹¶ä¸å…³å¿ƒæ­¤åˆ»è¶…å¸‚é‡Œåˆ°åº•æœ‰æ²¡æœ‰è´§ï¼ˆ<code>1.1</code> ç‰ˆæœ¬æ˜¯å¦å·²å‘å¸ƒï¼‰ï¼Œå®ƒåªè´Ÿè´£æ­£ç¡®åœ°ç¿»è¯‘èœè°±ã€‚</p></blockquote><hr><h3 id="ä¸ºä»€ä¹ˆå®ƒä¸å…³å¿ƒ-1-1-æ˜¯å¦å·²å‘å¸ƒï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆå®ƒä¸å…³å¿ƒ-1-1-æ˜¯å¦å·²å‘å¸ƒï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆå®ƒä¸å…³å¿ƒ 1.1 æ˜¯å¦å·²å‘å¸ƒï¼Ÿ"></a>ä¸ºä»€ä¹ˆå®ƒä¸å…³å¿ƒ <code>1.1</code> æ˜¯å¦å·²å‘å¸ƒï¼Ÿ</h3><p><code>publish</code> ä»»åŠ¡çš„èŒè´£æ˜¯<strong>ç”Ÿæˆå¹¶ä¸Šä¼ å½“å‰æ¨¡å—çš„æ„ä»¶å’Œå…ƒæ•°æ®</strong>ã€‚å®ƒå‡è®¾ä½ ï¼ˆå¼€å‘è€…ï¼‰ä¼šç¡®ä¿æ‰€æœ‰å£°æ˜çš„ä¾èµ–é¡¹æœ€ç»ˆéƒ½æ˜¯å¯ç”¨çš„ã€‚</p><ul><li><strong>åæœçš„æ‰¿æ‹…è€…æ˜¯æ¶ˆè´¹è€…ï¼š</strong> å¦‚æœä½ å‘å¸ƒäº† <code>A</code>ï¼Œä½†æ²¡æœ‰å‘å¸ƒ <code>:base:base</code> çš„ <code>1.1</code> ç‰ˆæœ¬ï¼Œé‚£ä¹ˆé—®é¢˜ä¸ä¼šåœ¨ä½ å‘å¸ƒæ—¶å‡ºç°ï¼Œè€Œæ˜¯åœ¨<strong>åˆ«äººä½¿ç”¨ä½ çš„ <code>A</code> æ¨¡å—æ—¶</strong>å‡ºç°ã€‚å½“ä»–ä»¬çš„é¡¹ç›®å°è¯•æ ¹æ® <code>A</code> çš„ <code>pom.xml</code> å»ä¸‹è½½ com.wesley.test:base-base:1.1&#96; æ—¶ï¼ŒMaven ä¼šå› ä¸ºæ‰¾ä¸åˆ°è¿™ä¸ªä¾èµ–è€Œæ„å»ºå¤±è´¥ã€‚</li><li><strong>è´£ä»»åœ¨ä½ ï¼š</strong> Gradle å°†ä¿è¯ä¾èµ–å…³ç³»é“¾æ­£ç¡®çš„è´£ä»»äº¤ç»™äº†å¼€å‘è€…ã€‚ä½ éœ€è¦åœ¨å‘å¸ƒ <code>A</code> ä¹‹å‰ï¼Œå…ˆå°†å®ƒçš„æ‰€æœ‰ä¾èµ–ï¼ˆå¦‚ <code>:base:base</code>ï¼‰å‘å¸ƒåˆ° Maven ä»“åº“ã€‚</li></ul></blockquote><p>æœ€åæ‰§è¡Œ publishä»»åŠ¡ï¼Œæ‰€æœ‰æ¨¡å—éƒ½å‘å¸ƒåˆ°maven_repo é‡Œé¢äº†ï¼Œä»¥åå‘å®¢æˆ·æ›´æ–°è¿™ä¸ªç›®å½•å°±è¡Œã€‚</p><p>è€Œå¯¹äºå†…ç½‘ SDKï¼Œå¯ä»¥åœ¨ç½‘é¡µç‰ˆä¾èµ–æ ‘æ‰¾åˆ°ä»–ä»¬ï¼Œç„¶åé€šè¿‡ç±»ä¼¼</p><p><code>wget -r -np -nH --cut-dirs=8 -R &quot;index.html*&quot;      http://172.20.135.19:8080/nexus/content/repositories/releases/com/wesley/sdk/protocol/2.1.8/</code>çš„å‘½ä»¤ä¸‹è½½ï¼ŒæŠŠæ–‡ä»¶ä¸¢è¿›maven_repoï¼ˆæ³¨æ„ç›®å½•ç»“æ„ï¼‰ï¼Œè¿™æ ·ä¾èµ–ä¹Ÿå¯ä»¥æ­£ç¡®ä¼ é€’äº†ã€‚ï¼ˆå¦‚æœåŒ…å«æºç ï¼Œå¯ä»¥è€ƒè™‘åˆ é™¤ï¼‰</p><h2 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h2><p>åˆ æ‰å·¥ç¨‹ç­¾åæ–‡ä»¶ã€‚</p><p>å¦‚æœæœ‰äº›æ¨¡å—ä¸èƒ½å…¬å¼€ï¼Œæ··æ·†åä¸èƒ½å‘å¸ƒæºç ã€‚</p><p>ä¸èƒ½æºå¸¦ .git ç›®å½•ã€‚</p><p>æ³¨æ„å¤„ç† UI æ¨¡å—ä¾èµ–å…¶ä»–æ¨¡å—çš„æ–¹æ³•æˆ–è€…ç±»ï¼Œä¸èƒ½æ··æ·†ã€‚</p><p>æ³¨æ„å¤„ç†ä¸€äº›é…ç½®ä¿¡æ¯æˆ–è€…å…³é”®ä»£ç ï¼Œå¯ä»¥è€ƒè™‘è½¬ç§»åˆ° native å±‚ã€‚</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;æœ€è¿‘æ–°å®¢æˆ·è¦æ±‚å°†è½¯ä»¶çš„ä»£ç å…¬å¼€ç»™ä»–ä»¬ï¼Œå…è®¸ä»–ä»¬è‡ªå·±ä¿®æ”¹ UIï¼Œè¿›è¡Œå®šåˆ¶ã€‚ç”±äºæˆ‘ä»¬å·¥ç¨‹åŒ…å«å…¶ä»–æ ¸å¿ƒæ¨¡å—ï¼Œä¸èƒ½å…¨éƒ¨å¼€æ”¾ï¼Œæ‰€ä»¥éœ€è¦å°†é UI æ¨¡å—è¿›è¡Œæ•´åˆå¹¶æ··æ·†å†å‘å¸ƒã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºå·¥ç¨‹å…·æœ‰è‰¯å¥½çš„æ¨¡å—åŒ–ï¼Œæ‰€ä»¥ä¸€å¼€å§‹æƒ³åˆ°çš„æ˜¯å‚è€ƒ&lt;a</summary>
        
      
    
    
    
    <category term="AppBuild" scheme="https://iwesley.top/categories/AppBuild/"/>
    
    
    <category term="gradle" scheme="https://iwesley.top/tags/gradle/"/>
    
  </entry>
  
  <entry>
    <title>å®‰å“å®˜æ–¹ç‰ˆfat-aar:ä½¿ç”¨Fused Libraryå°†å¤šä¸ªAndroidåº“å‘å¸ƒä¸ºä¸€ä¸ªåº“</title>
    <link href="https://iwesley.top/article/a43c0ba5/"/>
    <id>https://iwesley.top/article/a43c0ba5/</id>
    <published>2025-06-22T06:21:49.000Z</published>
    <updated>2025-06-22T07:35:28.833Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨å¼€å‘ sdk æ—¶ï¼Œå†…éƒ¨ä¸€èˆ¬ä¼šåˆ’åˆ†å¥½å‡ ä¸ªæ¨¡å—ã€‚ä½†å½“éœ€è¦æ‰“åŒ…æˆä¸€ä¸ªæ¨¡å—å‘å¸ƒæ—¶ï¼Œå¾€å¾€éœ€è¦ä¾èµ–ç¬¬ä¸‰æ–¹æ’ä»¶ã€‚æ¯”å¦‚è‘—åçš„ fat-aarï¼š<a href="https://github.com/kezong/fat-aar-android%EF%BC%8C%E4%BD%86%E8%AF%A5%E5%BA%93%E4%B8%8D%E6%94%AF%E6%8C%81">https://github.com/kezong/fat-aar-androidï¼Œä½†è¯¥åº“ä¸æ”¯æŒ</a> AGP8.0 äº†ï¼Œæœ‰å…¶ä»–å¼€å‘è€…å•ç‹¬forkäº†ä¸€ä¸ªä»“åº“æ¥è¿›è¡Œç»´æŠ¤ï¼Œæ”¯æŒ AGP8.0+ï¼š<a href="https://github.com/aasitnikov/fat-aar-android">aasitnikov&#x2F;fat-aar-android: Gradle plugin for merging android libraries (AAR)</a>ã€‚</p><p>ç°åœ¨å®‰å“å®˜æ–¹ç»ˆäºæ”¯æŒå°†å¤šä¸ªåº“æ‰“åŒ…æˆä¸€ä¸ªaar äº†ï¼š<a href="https://developer.android.com/build/publish-library/fused-library">Publish multiple Android libraries as one with Fused Library  |  Android Studio  |  Android Developers</a>ã€‚å®£å¸ƒä» AGP8.12 å¼€å§‹å¯ä»¥ä½¿ç”¨<code>com.android.fused-library</code>æ¥è¿›è¡Œåˆå¹¶å¤šæ¨¡å—ã€‚ä¸è¿‡ä»<a href="https://mvnrepository.com/artifact/com.android.fused-library/com.android.fused-library.gradle.plugin">Maven Repository: com.android.fused-library Â» com.android.fused-library.gradle.plugin</a>ä¸Šé¢å¯ä»¥çœ‹åˆ°ï¼Œä¸€äº›æ—©æœŸç‰ˆæœ¬ä¹Ÿå¯ä»¥æ”¯æŒçš„ï¼Œä¸è¿‡å¯èƒ½æœ‰ bugï¼Œæˆ‘è¯•äº† AGP8.10 ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p><p>ç›¸æ¯” fat-aar çš„ä¼˜ç‚¹æ˜¯ï¼š</p><ul><li>å®˜æ–¹æ”¯æŒ</li><li>åˆå¹¶æ¨¡å—æ—¶æ”¯æŒä¾èµ–ä¼ é€’ï¼Œä¹Ÿå°±æ˜¯å­æ¨¡å—çš„ä¾èµ–æ ‘ä¼šå‡ºç°åœ¨ pom æ–‡ä»¶é‡Œé¢ã€‚fat-aar éœ€è¦é€šè¿‡pom.withXml æ¥å¤„ç†ã€‚</li></ul><p>ç¼ºç‚¹æ˜¯ï¼š</p><ul><li>æ”¯æŒæ’ä»¶ç‰ˆæœ¬æœ‰é™ï¼Œå®˜æ–¹è¡¨ç¤ºæ˜¯AGP8.12 å¼€å§‹æ‰æ”¯æŒã€‚</li><li>ä¼ é€’ä¾èµ–é¡¹ä¸ä¼šæ‰“åŒ…ã€‚éœ€è¦é€ä¸ªæŒ‡å®šæ‰“åŒ…è¿› aar çš„ä¾èµ–ã€‚</li></ul><p>åé¢è¿˜ä¼šç»§ç»­è¯´è¯¥åº“ç›®å‰çš„é—®é¢˜ï¼Œå…ˆçœ‹çœ‹æ€ä¹ˆç”¨ã€‚</p><p>å®˜æ–¹çš„å·¥ç¨‹ç¤ºèŒƒï¼š</p><blockquote><p>readme çš„æ’ä»¶åç§°ç›®å‰æ˜¯å†™é”™äº†çš„ï¼šåº”è¯¥æ˜¯<code>com.android.fused-library</code></p></blockquote><p><a href="https://github.com/android/gradle-recipes/tree/agp-8.10/applyFusedLibraryPlugin">gradle-recipes&#x2F;applyFusedLibraryPlugin at agp-8.10 Â· android&#x2F;gradle-recipes</a></p><p>å¯ä»¥å‚è€ƒè¿™ä¸ªè¿›è¡Œæ’ä»¶å¼•å…¥ï¼š</p><p><a href="https://developer.android.com/build/publish-library/fused-library">Publish multiple Android libraries as one with Fused Library  |  Android Studio  |  Android Developers</a></p><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><h3 id="åµŒå¥—ä¾èµ–ä¸æ”¯æŒæ‰“åŒ…"><a href="#åµŒå¥—ä¾èµ–ä¸æ”¯æŒæ‰“åŒ…" class="headerlink" title="åµŒå¥—ä¾èµ–ä¸æ”¯æŒæ‰“åŒ…"></a>åµŒå¥—ä¾èµ–ä¸æ”¯æŒæ‰“åŒ…</h3><p>å®˜æ–¹çš„ä¾‹å­æ˜¯æ”¯æŒåµŒå¥—çš„ï¼š</p><blockquote><p><code>*</code> indicates an <code>include</code> dependency of the <code>:fusedLibrary</code> module</p></blockquote><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs elixir">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚             <span class="hljs-symbol">:app</span>                        â”‚<br>â”‚               â–²                         â”‚<br>â”‚               â”‚                         â”‚<br>â”‚         <span class="hljs-symbol">:fusedLibrary</span>                   â”‚<br>â”‚         â–²           â–²                   â”‚<br>â”‚         â”‚           â”‚                   â”‚<br>â”‚    <span class="hljs-symbol">:androidLib2*</span>  <span class="hljs-symbol">:androidLib1*</span>         â”‚<br>â”‚         â–²            â–²                  â”‚<br>â”‚         â”‚            â”‚                  â”‚<br>â”‚ <span class="hljs-symbol">:androidLib3</span> <span class="hljs-symbol">com.google.code.gson:</span>gson* â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">dependencies &#123;<br>    include(project(<span class="hljs-string">&quot;:androidLib1&quot;</span>))<br>    include(project(<span class="hljs-string">&quot;:androidLib2&quot;</span>))<br>    include(<span class="hljs-string">&quot;com.google.code.gson:gson:2.10.1&quot;</span>)<br>    include(files(<span class="hljs-string">&quot;libs/simple-jar-with-A_DoIExist-class.jar&quot;</span>))<br>&#125;<br></code></pre></td></tr></table></figure><p>å®é™…ä¸ŠandroidLib3 æ²¡æœ‰è¢«æ‰“åŒ…ï¼Œå˜æˆäº†ä¸€ä¸ªä¾èµ–fused-library-samples:androidLib3:unspecifiedï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;included&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-string">&quot;project :androidLib1&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">&quot;project :androidLib2&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">&quot;com.google.code.gson:gson:2.10.1&quot;</span><br>  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;dependencies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-string">&quot;org.jetbrains.kotlin:kotlin-stdlib:1.9.22&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">&quot;org.jetbrains:annotations:13.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">&quot;fused-library-samples:androidLib3:unspecified&quot;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="æœ‰ä¸€äº›è¿œç¨‹åŒ…æš‚æ—¶æ‰“åŒ…ä¸äº†"><a href="#æœ‰ä¸€äº›è¿œç¨‹åŒ…æš‚æ—¶æ‰“åŒ…ä¸äº†" class="headerlink" title="æœ‰ä¸€äº›è¿œç¨‹åŒ…æš‚æ—¶æ‰“åŒ…ä¸äº†"></a>æœ‰ä¸€äº›è¿œç¨‹åŒ…æš‚æ—¶æ‰“åŒ…ä¸äº†</h3><p>A failure occurred while executing com.android.build.gradle.tasks.FusedLibraryMergeArtifactTask$FusedLibraryMergeArtifactWorkAction</p><p>   &gt; java.lang.NullPointerException (no error message)</p><h3 id="æš‚ä¸æ”¯æŒæºå¸¦æºç å‘å¸ƒ"><a href="#æš‚ä¸æ”¯æŒæºå¸¦æºç å‘å¸ƒ" class="headerlink" title="æš‚ä¸æ”¯æŒæºå¸¦æºç å‘å¸ƒ"></a>æš‚ä¸æ”¯æŒæºå¸¦æºç å‘å¸ƒ</h3><h3 id="æš‚ä¸èƒ½æ··æ·†"><a href="#æš‚ä¸èƒ½æ··æ·†" class="headerlink" title="æš‚ä¸èƒ½æ··æ·†"></a>æš‚ä¸èƒ½æ··æ·†</h3><h3 id="ä¸æ”¯æŒDatabinding"><a href="#ä¸æ”¯æŒDatabinding" class="headerlink" title="ä¸æ”¯æŒDatabinding"></a>ä¸æ”¯æŒDatabinding</h3><h3 id="æ— æ³•åœ¨å•ä¸ªèåˆåº“ä¸­èåˆå¤šä¸ª-build-ç±»å‹å’Œäº§å“å˜ç§ã€‚éœ€è¦ä¸ºä¸åŒçš„å˜ä½“åˆ›å»ºå•ç‹¬çš„èåˆåº“ã€‚"><a href="#æ— æ³•åœ¨å•ä¸ªèåˆåº“ä¸­èåˆå¤šä¸ª-build-ç±»å‹å’Œäº§å“å˜ç§ã€‚éœ€è¦ä¸ºä¸åŒçš„å˜ä½“åˆ›å»ºå•ç‹¬çš„èåˆåº“ã€‚" class="headerlink" title="æ— æ³•åœ¨å•ä¸ªèåˆåº“ä¸­èåˆå¤šä¸ª build ç±»å‹å’Œäº§å“å˜ç§ã€‚éœ€è¦ä¸ºä¸åŒçš„å˜ä½“åˆ›å»ºå•ç‹¬çš„èåˆåº“ã€‚"></a>æ— æ³•åœ¨å•ä¸ªèåˆåº“ä¸­èåˆå¤šä¸ª build ç±»å‹å’Œäº§å“å˜ç§ã€‚éœ€è¦ä¸ºä¸åŒçš„å˜ä½“åˆ›å»ºå•ç‹¬çš„èåˆåº“ã€‚</h3><h3 id="kotlin-moduleå†²çª"><a href="#kotlin-moduleå†²çª" class="headerlink" title="kotlin_moduleå†²çª"></a>kotlin_moduleå†²çª</h3><p>å¦‚æœæœ‰ä¸¤ä¸ªbaseæ¨¡å—ä¼šäº§ç”Ÿå†²çªï¼Œ base&#x2F;base ï¼Œfeature&#x2F;base</p><p>2 files found with path â€˜META-INF&#x2F;base_release.kotlin_moduleâ€™ from inputs:</p><p>éœ€è¦ä¿®æ”¹ä¸€ä¸‹kotlin_module çš„åå­—</p><p><a href="https://stackoverflow.com/questions/44509608/duplicate-files-copied-in-apk-meta-inf-library-release-kotlin-module">android - Duplicate files copied in APK META-INF&#x2F;library_release.kotlin_module - Stack Overflow</a></p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs groovy">ext &#123;<br>    GROUP_ID = <span class="hljs-string">&#x27;custom.group.id&#x27;</span><br>    ARTIFACT_ID = <span class="hljs-string">&#x27;artifactid&#x27;</span><br>&#125;<br><br>android &#123;<br>    compileSdkVersion <span class="hljs-number">25</span><br>    buildToolsVersion <span class="hljs-string">&quot;25.0.0&quot;</span><br><br>    compileOptions &#123;<br>        kotlinOptions.freeCompilerArgs += [<span class="hljs-string">&#x27;-module-name&#x27;</span>, <span class="hljs-string">&quot;$GROUP_ID.$ARTIFACT_ID&quot;</span>]<br>    &#125;<br><br>    defaultConfig &#123;<br>        ...<br>    &#125;<br>    buildTypes &#123;<br>        ...<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å®˜æ–¹å·²çŸ¥é—®é¢˜"><a href="#å®˜æ–¹å·²çŸ¥é—®é¢˜" class="headerlink" title="å®˜æ–¹å·²çŸ¥é—®é¢˜"></a>å®˜æ–¹å·²çŸ¥é—®é¢˜</h3><p>èåˆåº“æ˜¯ä¸€ä¸ªæ–°æ’ä»¶ï¼Œæˆ‘ä»¬æ­£åœ¨è§£å†³ä¸€äº›å·²çŸ¥é—®é¢˜ï¼Œä»¥å®ç°æ‰€æœ‰ç”¨ä¾‹ã€‚</p><ul><li>åˆå¹¶çš„ AAR ä¸­æœªåŒ…å« <code>lint.jar</code> æ–‡ä»¶</li><li>å‘å…¶ä»– .aar æ–‡ä»¶æ·»åŠ æ–‡ä»¶ä¾èµ–é¡¹</li><li>ä¸æ”¯æŒåˆå¹¶ RenderScript å’Œ Prefab å·¥ä»¶</li></ul><p>æœŸå¾…å®˜æ–¹è¿›ä¸€æ­¥å®Œå–„ã€‚</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;åœ¨å¼€å‘ sdk æ—¶ï¼Œå†…éƒ¨ä¸€èˆ¬ä¼šåˆ’åˆ†å¥½å‡ ä¸ªæ¨¡å—ã€‚ä½†å½“éœ€è¦æ‰“åŒ…æˆä¸€ä¸ªæ¨¡å—å‘å¸ƒæ—¶ï¼Œå¾€å¾€éœ€è¦ä¾èµ–ç¬¬ä¸‰æ–¹æ’ä»¶ã€‚æ¯”å¦‚è‘—åçš„ fat-aarï¼š&lt;a</summary>
        
      
    
    
    
    <category term="AppBuild" scheme="https://iwesley.top/categories/AppBuild/"/>
    
    
    <category term="gradle" scheme="https://iwesley.top/tags/gradle/"/>
    
  </entry>
  
  <entry>
    <title>æ‰‹æœºå‚å•†çš„åº”ç”¨åˆ—è¡¨æƒé™ç®¡æ§çœŸçš„èµ·æ•ˆäº†å—</title>
    <link href="https://iwesley.top/article/e6389157/"/>
    <id>https://iwesley.top/article/e6389157/</id>
    <published>2025-05-11T10:50:19.000Z</published>
    <updated>2025-05-11T13:26:37.659Z</updated>
    
    <content type="html"><![CDATA[<p>æ˜¨å¤©ä½¿ç”¨<strong>åšä½ çš„å›¾æ ‡åŒ…</strong>åˆ¶ä½œå›¾æ ‡åŒ…çš„æ—¶å€™å‘ç°æˆ‘å¹¶æ²¡æœ‰æˆäºˆå®ƒè·å–åº”ç”¨åˆ—è¡¨çš„æƒé™ï¼Œä½†æ˜¯ä¾ç„¶å¯ä»¥è·å–åˆ°æˆ‘å®‰è£…çš„åº”ç”¨åˆ—è¡¨ã€‚</p><img src="https://cdn.jsdelivr.net/gh/wesley666/picgo/img2025/20250511190040532.jpg" style="zoom:25%;" /><p>ç„¶åå‘ç°å®ƒçš„ targetSDK æ˜¯ 33 å¹¶ç”³è¯·äº†<code>&lt;uses-permission android:name=&quot;android.permission.QUERY_ALL_PACKAGES&quot;/&gt;</code>æƒé™å’Œä½¿ç”¨äº†å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">PackageManager</span> <span class="hljs-variable">packageManager</span> <span class="hljs-operator">=</span> context2.getPackageManager();<br><span class="hljs-type">Intent</span> <span class="hljs-variable">intent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intent</span>(<span class="hljs-string">&quot;android.intent.action.MAIN&quot;</span>);<br>intent.addCategory(<span class="hljs-string">&quot;android.intent.category.LAUNCHER&quot;</span>);<br>List&lt;ResolveInfo&gt; queryIntentActivities = packageManager.queryIntentActivities(intent, <span class="hljs-number">0</span>);<br></code></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/wesley666/picgo/img2025/20250511190439764.png" alt="image-20250511190439462" style="zoom: 50%;" /><p>æ­£å¸¸æ‹¿åˆ°äº†æˆ‘æ‰‹æœºä¸Šçš„è®¾å¤‡åº”ç”¨å®‰è£…åˆ—è¡¨å¹¶ä¸”æƒé™ç›‘æ§é‡Œé¢æ²¡æœ‰çœ‹åˆ°è®°å½•ã€‚è¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ</p><h2 id="å®éªŒ"><a href="#å®éªŒ" class="headerlink" title="å®éªŒ"></a>å®éªŒ</h2><p>é€šè¿‡ä¸‹é¢çš„ä»£ç è¿›è¡Œå®éªŒ</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getInstalledPackages</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>)</span></span>: List&lt;String&gt; &#123;<br>        <span class="hljs-keyword">val</span> installedPackageList: MutableList&lt;String&gt; = ArrayList()<br>        <span class="hljs-keyword">val</span> installedPackageInfoList = context.packageManager.getInstalledPackages(PackageManager.MATCH_UNINSTALLED_PACKAGES)<br>        <span class="hljs-keyword">for</span> (packageInfo <span class="hljs-keyword">in</span> installedPackageInfoList) &#123;<br>            installedPackageList.add(packageInfo.packageName)<br>        &#125;<br>        Log.e(TAG, <span class="hljs-string">&quot;getInstalledPackages: sizeï¼š<span class="hljs-subst">$&#123;installedPackageList.size&#125;</span> pkg:<span class="hljs-variable">$installedPackageList</span>&quot;</span>)<br>        <span class="hljs-keyword">return</span> installedPackageList<br>    &#125;<br><br>    <span class="hljs-comment">//è·å–æ‰€æœ‰å¸¦æœ‰æ¡Œé¢å±æ€§çš„APK</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getAllLauncherIconPackages</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>)</span></span>: List&lt;String&gt; &#123;<br>        <span class="hljs-keyword">val</span> launcherIconPackageList: MutableList&lt;String&gt; = ArrayList()<br>        <span class="hljs-keyword">val</span> intent = Intent()<br>        intent.setAction(Intent.ACTION_MAIN)<br>        intent.addCategory(Intent.CATEGORY_LAUNCHER)<br>        <span class="hljs-keyword">val</span> resolveInfos = context.packageManager.queryIntentActivities(intent, PackageManager.MATCH_ALL)<br>        <span class="hljs-keyword">for</span> (info <span class="hljs-keyword">in</span> resolveInfos) &#123;<br>            launcherIconPackageList.add(info.activityInfo.packageName)<br>        &#125;<br>        Log.e(TAG, <span class="hljs-string">&quot;getAllLauncherIconPackages: size:<span class="hljs-subst">$&#123;launcherIconPackageList.size&#125;</span> pkg:<span class="hljs-variable">$launcherIconPackageList</span>&quot;</span>)<br>        <span class="hljs-keyword">return</span> launcherIconPackageList<br>    &#125;<br></code></pre></td></tr></table></figure><h3 id="åœ¨ç¦æ­¢åº”ç”¨åˆ—è¡¨æƒé™æƒ…å†µä¸‹æµ‹è¯•"><a href="#åœ¨ç¦æ­¢åº”ç”¨åˆ—è¡¨æƒé™æƒ…å†µä¸‹æµ‹è¯•" class="headerlink" title="åœ¨ç¦æ­¢åº”ç”¨åˆ—è¡¨æƒé™æƒ…å†µä¸‹æµ‹è¯•"></a>åœ¨ç¦æ­¢åº”ç”¨åˆ—è¡¨æƒé™æƒ…å†µä¸‹æµ‹è¯•</h3><p>Oppo find8u Xiaomi13 éƒ½æ˜¯å®‰å“ 15</p><h4 id="æƒ…å†µ1-ä¸ç”³è¯·QUERY-ALL-PACKAGES"><a href="#æƒ…å†µ1-ä¸ç”³è¯·QUERY-ALL-PACKAGES" class="headerlink" title="æƒ…å†µ1 ä¸ç”³è¯·QUERY_ALL_PACKAGES"></a>æƒ…å†µ1 ä¸ç”³è¯·<code>QUERY_ALL_PACKAGES</code></h4><p>oppo</p><blockquote><p>PermissionInjector: Permission denied: uid: 10445 or pid: 14074 have no permission: com.android.permission.GET_INSTALLED_APPS to access: get_installed</p><p>ApplicationPackageManagerExtImpl: com.example.myapplication in userId&#x3D;0 doesnâ€™t have GET_INSTALLED_APPS perm, return self!</p><p>getInstalledPackages: sizeï¼š1 pkg:[com.example.myapplication]</p><p>getAllLauncherIconPackages: size:8 pkg:[com.android.settings, com.android.vending, com.coloros.gallery3d, com.oplus.camera, com.android.documentsui, com.android.stk, com.android.stk, com.example.myapplication]</p></blockquote><p>xiaomi</p><blockquote><p>MIUILOG- Permission Denied getInstalledPackages. pkg : com.example.myapplication uid : 10236<br>getInstalledPackages: sizeï¼š1 pkg:[com.example.myapplication]<br>getAllLauncherIconPackages: size:13 pkg:[com.android.browser, com.android.camera, com.android.fileexplorer, com.android.settings, com.android.thememanager, com.android.vending, com.miui.miservice, com.xiaomi.market, com.miui.notes, com.miui.securitycenter, com.miui.voiceassist, com.example.myapplication, com.miui.huanji]</p></blockquote><p><code>getInstalledPackages</code> åªèƒ½è·å–åˆ°è‡ªå·±çš„åº”ç”¨ï¼Œä¸”ä¼šè¢«æƒé™ç›‘æ§è®°å½•ï¼Œ<code>queryIntentActivities</code> å¯ä»¥è·å–éƒ¨åˆ†ç³»ç»Ÿåº”ç”¨</p><h4 id="æƒ…å†µ2-ç”³è¯·QUERY-ALL-PACKAGES"><a href="#æƒ…å†µ2-ç”³è¯·QUERY-ALL-PACKAGES" class="headerlink" title="æƒ…å†µ2 ç”³è¯·QUERY_ALL_PACKAGES"></a>æƒ…å†µ2 ç”³è¯·<code>QUERY_ALL_PACKAGES</code></h4><p>oppo</p><blockquote><p>getInstalledPackages: sizeï¼š1 pkg:[com.example.myapplication]</p><p>getAllLauncherIconPackages: size:<strong>155</strong> pkg:[com.android.contactsâ€¦â€¦â€¦â€¦.</p></blockquote><p>xiaomi</p><blockquote><p>getInstalledPackages: sizeï¼š1 pkg:[com.example.myapplication]<br>getAllLauncherIconPackages: size:<strong>279</strong> pkg:[com.android.browser, com.android.camera, com.android.contactsâ€¦â€¦â€¦â€¦</p></blockquote><p><code>getInstalledPackages</code> åªèƒ½è·å–åˆ°è‡ªå·±çš„åº”ç”¨ï¼Œä¸”ä¼šè¢«æƒé™ç›‘æ§è®°å½•ï¼Œ<code>queryIntentActivities</code> å¯ä»¥è·å–æ‰€æœ‰å¸¦æœ‰æ¡Œé¢å±æ€§çš„åº”ç”¨</p><h4 id="æƒ…å†µ3-ä¸ç”³è¯·QUERY-ALL-PACKAGESä½†å£°æ˜queries"><a href="#æƒ…å†µ3-ä¸ç”³è¯·QUERY-ALL-PACKAGESä½†å£°æ˜queries" class="headerlink" title="æƒ…å†µ3 ä¸ç”³è¯·QUERY_ALL_PACKAGESä½†å£°æ˜queries"></a>æƒ…å†µ3 ä¸ç”³è¯·<code>QUERY_ALL_PACKAGES</code>ä½†å£°æ˜queries</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">queries</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">intent</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">action</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;android.intent.action.MAIN&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">category</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;android.intent.category.LAUNCHER&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">intent</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">queries</span>&gt;</span><br></code></pre></td></tr></table></figure><p>oppo</p><blockquote><p>getInstalledPackages: sizeï¼š1 pkg:[com.example.myapplication]</p><p>getAllLauncherIconPackages: size:<strong>155</strong> pkg:[com.android.contacts,â€¦â€¦â€¦â€¦â€¦</p></blockquote><p>xiaomi</p><blockquote><p>getInstalledPackages: sizeï¼š1 pkg:[com.example.myapplication]<br>getAllLauncherIconPackages: size:<strong>279</strong> pkg:[com.android.browserâ€¦â€¦â€¦..</p></blockquote><p><code>getInstalledPackages</code> åªèƒ½è·å–åˆ°è‡ªå·±çš„åº”ç”¨ï¼Œä¸”ä¼šè¢«æƒé™ç›‘æ§è®°å½•ï¼Œ<code>queryIntentActivities</code> å¯ä»¥è·å–æ‰€æœ‰å¸¦æœ‰æ¡Œé¢å±æ€§çš„åº”ç”¨</p><h2 id="ç°çŠ¶"><a href="#ç°çŠ¶" class="headerlink" title="ç°çŠ¶"></a>ç°çŠ¶</h2><p>è¿˜æ˜¯å¾ˆå¤šåº”ç”¨ç”³è¯·äº†QUERY_ALL_PACKAGES æƒé™çš„ï¼Œæ„å‘³ç€å¾ˆå®¹æ˜“æ”¶é›†æ‰‹æœºé‡Œé¢çš„å®‰è£…åˆ—è¡¨ã€‚æˆ–è€…ä¸ç”³è¯·QUERY_ALL_PACKAGESï¼Œç›´æ¥å£°æ˜queriesï¼Œæ¯”å¦‚å¾®ä¿¡å°±æ˜¯è¿™ä¹ˆå¹²çš„ã€‚æ‰€ä»¥å‚å•†çš„è¿™ä¸ªåº”ç”¨åˆ—è¡¨ç®¡æ§èƒ½èµ·åˆ°çš„ä½œç”¨å¯èƒ½ä¸å¤§ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">intent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">action</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;android.intent.action.MAIN&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">category</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;android.intent.category.LAUNCHER&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">intent</span>&gt;</span><br></code></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/wesley666/picgo/img2025/20250511204049921.jpg" alt="IMG_20250511_203845" style="zoom:25%;" /><h2 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h2><p>ä¸€èˆ¬æ¥è¯´ï¼Œè¿™äº›æƒé™éƒ½æ˜¯é€šè¿‡ <strong>AppOps</strong>ç®¡æ§çš„ï¼Œå½“åˆå®‰å“ 6 åŠ å…¥è¿è¡Œæ—¶æƒé™æ—¶ï¼Œå¯¹äºé‚£äº›æ²¡æœ‰é€‚é…è¿è¡Œæ—¶æƒé™çš„åº”ç”¨ï¼Œå°±æ˜¯é€šè¿‡<strong>AppOps</strong>ç®¡æ§çš„ã€‚</p><p>oppo</p><blockquote><p>OP5DD3L1:&#x2F; $ appops get com.example.myapplication</p><p>GET_INSTALLED_APPS: ignore</p></blockquote><p>xiaomi</p><blockquote><p>fuxi:&#x2F; $ appops get com.example.myapplication</p><p>MIUIOP(10022): ignore; time&#x3D;+7h1m54s781ms ago; rejectTime&#x3D;+32m9s128ms ago</p></blockquote><p><code>public static final int OP_GET_INSTALLED_APPS = 10022;</code></p><p>ä»–ä»¬éƒ½æ˜¯åªé’ˆå¯¹getInstalledPackages æƒé™åšç®¡æ§ã€‚æœ‰å…´è¶£çš„å¯ä»¥ pull æ‰‹æœºé‡Œé¢çš„ framework å’Œ service jar åŒ…æ¥çœ‹ä¸€ä¸‹ä»–ä»¬çš„æºä»£ç ã€‚</p><h3 id="åŒ…å¯è§æ€§"><a href="#åŒ…å¯è§æ€§" class="headerlink" title="åŒ…å¯è§æ€§"></a>åŒ…å¯è§æ€§</h3><h4 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h4><p>Googleå®˜ç½‘ç‰¹æ€§ä»‹ç»:</p><p><a href="https://developer.android.google.cn/preview/privacy/package-visibility">https://developer.android.google.cn/preview/privacy/package-visibility</a></p><p>Android 11 æ›´æ”¹äº†åº”ç”¨æŸ¥è¯¢ç”¨æˆ·å·²åœ¨è®¾å¤‡ä¸Šå®‰è£…çš„å…¶ä»–åº”ç”¨ä»¥åŠä¸ä¹‹äº¤äº’çš„æ–¹å¼ã€‚ä½¿ç”¨ <queries> å…ƒç´ ï¼Œåº”ç”¨å¯ä»¥å®šä¹‰ä¸€ç»„è‡ªèº«å¯è®¿é—®çš„å…¶ä»–è½¯ä»¶åŒ…ã€‚é€šè¿‡å‘ŠçŸ¥ç³»ç»Ÿåº”å‘æ‚¨çš„åº”ç”¨æ˜¾ç¤ºå“ªäº›å…¶ä»–è½¯ä»¶åŒ…ï¼Œæ­¤å…ƒç´ æœ‰åŠ©äºé¼“åŠ±æœ€å°æƒé™åŸåˆ™ã€‚æ­¤å¤–ï¼Œæ­¤å…ƒç´ è¿˜å¯å¸®åŠ© Google Play ç­‰åº”ç”¨å•†åº—è¯„ä¼°åº”ç”¨ä¸ºç”¨æˆ·æä¾›çš„éšç§æƒå’Œå®‰å…¨æ€§ã€‚</p><p>å¦‚æœæ‚¨çš„åº”ç”¨ä»¥ Android 11 æˆ–æ›´é«˜ç‰ˆæœ¬ä¸ºç›®æ ‡å¹³å°ï¼Œæ‚¨å¯èƒ½éœ€è¦åœ¨åº”ç”¨çš„æ¸…å•æ–‡ä»¶ä¸­æ·»åŠ  <queries> å…ƒç´ ã€‚åœ¨ <queries> å…ƒç´ ä¸­ï¼Œæ‚¨å¯ä»¥æŒ‰è½¯ä»¶åŒ…åç§°ã€intent ç­¾åæˆ–æä¾›ç¨‹åºæˆæƒæŒ‡å®šè½¯ä»¶åŒ…ã€‚</p><h4 id="å…¼å®¹æ€§å½±å“"><a href="#å…¼å®¹æ€§å½±å“" class="headerlink" title="å…¼å®¹æ€§å½±å“"></a>å…¼å®¹æ€§å½±å“</h4><ol><li>SDKæ¥å£è¡Œä¸ºå˜æ›´</li></ol><p>appé»˜è®¤ä¸å†èƒ½é€šè¿‡SDKæ¥å£è·å–å…¶ä»–appçš„ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š</p><p><code>getPackageInfo(getPackageName(), 0)</code> ä»èƒ½æ­£å¸¸è¿”å›åº”ç”¨è‡ªèº«çš„<code>PackageInfo</code>,ä½†<code>getPackageInfo(â€œcom.another.appâ€,0)</code>å°†æŠ›å‡ºNameNotFoundExceptionï¼Œå³ä½¿<code>com.another.app</code>å·²ç»è¢«å®‰è£…åˆ°è®¾å¤‡ä¸Šã€‚<code>getInstalledPackages(0)</code>ï¼Œåªèƒ½è¿”å›åº”ç”¨è‡ªèº«ï¼Œä»¥åŠå°‘æ•°çš„æ ¸å¿ƒAOSPåº”ç”¨çš„ä¿¡æ¯ã€‚</p><ol start="2"><li>å…¶ä»–å˜æ›´</li></ol><p>appä¸èƒ½æ„ŸçŸ¥<code>/data/data/com.another.app</code>ç­‰ç›®å½•çš„å­˜åœ¨ã€‚å³ä½¿<code>com.another.app</code>å·²ç»è¢«å®‰è£…åˆ°è®¾å¤‡ä¸Šï¼Œappå°è¯•è®¿é—®<code>/data/data/com.another.app</code>ä¹Ÿå°†æç¤ºâ€œFile not foundâ€ï¼Œè€Œä¸æ˜¯â€œPermission deniedâ€ã€‚</p><p>ç±»ä¼¼çš„ç›®å½•è¿˜æœ‰<code>/data/misc/profiles/cur/$&#123;userId&#125;/com.another.app</code>ã€‚æ­¤å˜æ›´ï¼Œå¯ä»¥é˜²æ­¢appé€šè¿‡è®¿é—®ç›®å½•æ–‡ä»¶è¿”å›çš„é”™è¯¯ä¸åŒï¼Œæ¥åˆ¤æ–­ç‰¹å®šappæ˜¯å¦å·²è¢«å®‰è£…ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://developer.android.google.cn/training/package-visibility?hl=zh-cn">Android ä¸Šçš„è½¯ä»¶åŒ…å¯è§æ€§è¿‡æ»¤  |  App architecture  |  Android Developers</a></p><p><a href="https://developer.android.com/training/package-visibility/automatic?hl=zh-cn">äº†è§£è‡ªåŠ¨å¯è§çš„è½¯ä»¶åŒ…  |  App architecture  |  Android Developers</a></p><p><a href="https://developer.android.com/training/package-visibility/declaring?hl=zh-cn">å£°æ˜è½¯ä»¶åŒ…å¯è§æ€§éœ€æ±‚  |  App architecture  |  Android Developers</a></p><p><a href="https://developer.android.com/training/package-visibility/testing?hl=zh-cn">æµ‹è¯•è½¯ä»¶åŒ…å¯è§æ€§è¡Œä¸º  |  App architecture  |  Android Developers</a></p><p><a href="https://dev.mi.com/xiaomihyperos/documentation/detail?pId=1738">åº”ç”¨TargetSdkVersion 30å‡çº§é€‚é…æŒ‡å— | å°ç±³æ¾æ¹ƒOSå¼€å‘è€…å¹³å°</a></p><p><a href="https://open.oppomobile.com/new/developmentDoc/info?id=10724">OPPO å¼€æ”¾å¹³å°-OPPOå¼€å‘è€…æœåŠ¡ä¸­å¿ƒ</a></p><p><a href="https://gddhy.net/2023/android-11-gua-pei-ruan-jian-bao-ke-jian-xing/">Android 11 é€‚é… è½¯ä»¶åŒ…å¯è§æ€§ | Gddhyâ€™s Blog</a></p><p><a href="https://bbs.kanxue.com/thread-280415.htm">ç»•è¿‡ Android11æ–°ç‰¹æ€§ä¹‹ â€œåŒ…çš„å¯è§æ€§â€œ-Androidå®‰å…¨-çœ‹é›ª-å®‰å…¨ç¤¾åŒº|å®‰å…¨æ‹›è˜|kanxue.com</a></p><p><a href="https://juejin.cn/post/7353292009086173218">Android11â€œåŒ…å¯è§æ€§â€â€”åŠ¨æ€ä¿®æ”¹queriesæ–¹æ¡ˆAndroid 11å¼•å…¥äº†â€œåŒ…å¯è§æ€§â€é™åˆ¶ï¼Œé»˜è®¤æƒ…å†µä¸‹åº”ç”¨ - æ˜é‡‘</a></p><p><a href="https://www.taf.org.cn/upload/AssociationStandard/TTAF%20108-2022%20%E7%A7%BB%E5%8A%A8%E7%BB%88%E7%AB%AF%E5%BA%94%E7%94%A8%E8%BD%AF%E4%BB%B6%E5%88%97%E8%A1%A8%E6%9D%83%E9%99%90%E5%AE%9E%E6%96%BD%E6%8C%87%E5%8D%97.pdf">ç§»åŠ¨ç»ˆç«¯åº”ç”¨è½¯ä»¶åˆ—è¡¨æƒé™å®æ–½æŒ‡å—</a></p><p><a href="https://github.com/getActivity/XXPermissions/blob/master/library/src/main/java/com/hjq/permissions/Permission.java">XXPermissions&#x2F;library&#x2F;src&#x2F;main&#x2F;java&#x2F;com&#x2F;hjq&#x2F;permissions&#x2F;Permission.java at master Â· getActivity&#x2F;XXPermissions</a></p><p><a href="https://gist.github.com/0awawa0/65bf88e43159750f596da194ed923522">XiaomiUtilities.java</a></p><p><a href="https://cn-sec.com/archives/2255540.html">éšç§åˆè§„ä¹‹MIUIè‡ªå¯åŠ¨çš„ç›‘æ§åŸç†åˆ†æ | CN-SEC ä¸­æ–‡ç½‘</a></p><p><a href="https://juejin.cn/post/7189533089897381944">Android è·å–åº”ç”¨åˆ—è¡¨æ–¹æ³•è®°å½•</a></p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;æ˜¨å¤©ä½¿ç”¨&lt;strong&gt;åšä½ çš„å›¾æ ‡åŒ…&lt;/strong&gt;åˆ¶ä½œå›¾æ ‡åŒ…çš„æ—¶å€™å‘ç°æˆ‘å¹¶æ²¡æœ‰æˆäºˆå®ƒè·å–åº”ç”¨åˆ—è¡¨çš„æƒé™ï¼Œä½†æ˜¯ä¾ç„¶å¯ä»¥è·å–åˆ°æˆ‘å®‰è£…çš„åº”ç”¨åˆ—è¡¨ã€‚&lt;/p&gt;
&lt;img</summary>
        
      
    
    
    
    <category term="å®‰å“å®‰å…¨å’Œé€†å‘" scheme="https://iwesley.top/categories/%E5%AE%89%E5%8D%93%E5%AE%89%E5%85%A8%E5%92%8C%E9%80%86%E5%90%91/"/>
    
    
    <category term="jadx" scheme="https://iwesley.top/tags/jadx/"/>
    
    <category term="åç¼–è¯‘" scheme="https://iwesley.top/tags/%E5%8F%8D%E7%BC%96%E8%AF%91/"/>
    
    <category term="å®‰å“æƒé™" scheme="https://iwesley.top/tags/%E5%AE%89%E5%8D%93%E6%9D%83%E9%99%90/"/>
    
    <category term="å®‰å“å®‰å…¨" scheme="https://iwesley.top/tags/%E5%AE%89%E5%8D%93%E5%AE%89%E5%85%A8/"/>
    
  </entry>
  
  <entry>
    <title>å¥½ç”¨è½¯ä»¶æ¨è</title>
    <link href="https://iwesley.top/article/9e5c606d/"/>
    <id>https://iwesley.top/article/9e5c606d/</id>
    <published>2025-05-03T08:23:55.000Z</published>
    <updated>2025-06-22T14:39:20.979Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Universal"><a href="#Universal" class="headerlink" title="Universal"></a>Universal</h2><h3 id="æ—¥å¸¸"><a href="#æ—¥å¸¸" class="headerlink" title="æ—¥å¸¸"></a>æ—¥å¸¸</h3><ul><li><p>æˆªå›¾ï¼š<a href="https://zh.snipaste.com/#">Snipaste - æˆªå›¾ + è´´å›¾</a></p></li><li><p>NAS è§†é¢‘æ’­æ”¾å™¨ï¼š<a href="https://bmh.163.com/">ç½‘æ˜“çˆ†ç±³èŠ±ï¼ˆåŸç½‘æ˜“Filmlyï¼‰ - æ™ºèƒ½åª’ä½“åº“&amp;å…¨èƒ½æ’­æ”¾å™¨</a></p></li><li><p>NAS éŸ³ä¹æ’­æ”¾å™¨ï¼šéŸ³æµï¼Œ<a href="https://github.com/gitbobobo/StreamMusic">gitbobobo&#x2F;StreamMusic: æ”¯æŒ Androidã€iOSã€macOSã€Windows å¹³å°çš„ Subsonic&#x2F;Navidrome&#x2F;Jellyfin&#x2F;Emby&#x2F;AudioStation å®¢æˆ·ç«¯ã€‚</a></p></li><li><p>å½•å±æˆ–è€…ç›´æ’­ï¼š<a href="https://obsproject.com/">Open Broadcaster Software | OBS</a></p></li></ul><h3 id="å¼€å‘"><a href="#å¼€å‘" class="headerlink" title="å¼€å‘"></a>å¼€å‘</h3><ul><li><p>kloggï¼šæ—¥å¿—æŸ¥çœ‹å·¥å…·ï¼Œä¹‹å‰åœ¨ Windows ä¸€ç›´ç”¨notepad++ï¼Œå®ƒå¯ä»¥é«˜äº®æ ‡è®°é€‰ä¸­çš„å­—ç¬¦ä¸²ã€‚ä½†åœ¨ Mac ä¸Šé¢ï¼Œæˆ‘è¯•äº†å¥½å‡ ä¸ªç±»ä¼¼çš„è½¯ä»¶éƒ½æ²¡æœ‰è¯¥åŠŸèƒ½ï¼Œåæ¥ï¼Œæˆ‘å‘ç°äº† kloggï¼ŒåŸºæœ¬æ»¡è¶³äº†æˆ‘çš„éœ€æ±‚ã€‚</p><p>åœ°å€ï¼š<a href="https://github.com/variar/klogg">variar&#x2F;klogg: Really fast log explorer based on glogg project</a></p></li><li><p>NotepadNextï¼š<a href="https://github.com/dail8859/NotepadNext">dail8859&#x2F;NotepadNext: A cross-platform, reimplementation of Notepad++</a>ï¼ˆV0.12 å·²ç»æ”¯æŒé«˜äº®äº†ï¼Œæˆ‘æçš„ issue å¦‚ä¸‹ï¼š<a href="https://github.com/dail8859/NotepadNext/issues/748">hightlight the select text with different color Â· Issue #748 Â· dail8859&#x2F;NotepadNext</a>ï¼‰</p></li><li><p>è¯­é›€ï¼šé«˜ä¸­çš„æ—¶å€™ç”¨æœ‰é“ç¬”è®°è®°å½•çŸ¥è¯†ç‚¹å’Œé”™é¢˜ï¼Œå¤§å­¦çš„æ—¶å€™ç”¨ OneNote æ¥è®°å½•è¯»ä¹¦ç¬”è®°ï¼Œå·¥ä½œååˆšå¼€å§‹ç”¨çš„æ˜¯å°è±¡ç¬”è®°ï¼Œåé¢å°±è½¬å‘è¯­é›€äº†ã€‚ä¸»è¦ç”¨æ¥è®°å½•å®‰å“ç›¸å…³çš„çŸ¥è¯†ç‚¹ã€‚</p><p>åœ°å€ï¼š<a href="https://www.yuque.com/">è¯­é›€ï¼Œä¸ºæ¯ä¸€ä¸ªäººæä¾›ä¼˜ç§€çš„æ–‡æ¡£å’ŒçŸ¥è¯†åº“å·¥å…·</a></p></li><li><p>åç¼–è¯‘å·¥å…·ï¼š<a href="https://github.com/skylot/jadx/releases">Releases Â· skylot&#x2F;jadx</a></p></li></ul><h2 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h2><h3 id="å¼€å‘-1"><a href="#å¼€å‘-1" class="headerlink" title="å¼€å‘"></a>å¼€å‘</h3><h2 id="Mac"><a href="#Mac" class="headerlink" title="Mac"></a>Mac</h2><h3 id="æ—¥å¸¸-1"><a href="#æ—¥å¸¸-1" class="headerlink" title="æ—¥å¸¸"></a>æ—¥å¸¸</h3><ul><li><p>è§†é¢‘æ’­æ”¾ï¼š<a href="https://github.com/iina/iina">iina&#x2F;iina: The modern video player for macOS.</a></p></li><li><p>æ€§èƒ½ç›‘æ§ï¼š<a href="https://github.com/exelban/stats">exelban&#x2F;stats: macOS system monitor in your menu bar</a></p></li><li><p>é¼ æ ‡æ§åˆ¶ï¼šè‡ªå®šä¹‰æ»šè½®æ–¹å‘å’Œè‡ªå®šä¹‰æŒ‰é”®åŠŸèƒ½ <a href="https://github.com/noah-nuebling/mac-mouse-fix/">noah-nuebling&#x2F;mac-mouse-fix: Mac Mouse Fix - Make Your $10 Mouse Better Than an Apple Trackpad!</a></p></li><li><p>æ˜¾ç¤ºå™¨æ§åˆ¶ï¼š<a href="https://github.com/waydabber/BetterDisplay">waydabber&#x2F;BetterDisplay: Unlock your displays on your Mac! Flexible HiDPI scaling, XDR&#x2F;HDR extra brightness, virtual screens, DDC control, extra dimming, PIP&#x2F;streaming, EDID override and lots more!</a></p></li><li><p>moonlightï¼šæ–¹ä¾¿å±€åŸŸç½‘æ§åˆ¶ windows ç”µè„‘ <a href="https://github.com/moonlight-stream/moonlight-qt">moonlight-stream&#x2F;moonlight-qt: GameStream client for PCs (Windows, Mac, Linux, and Steam Link)</a></p></li></ul><h3 id="å¼€å‘-2"><a href="#å¼€å‘-2" class="headerlink" title="å¼€å‘"></a>å¼€å‘</h3><ul><li>iTermï¼šå‘½ä»¤è¡Œç»ˆç«¯å·¥å…· <a href="https://iterm2.com/">iTerm2 - macOS Terminal Replacement</a></li></ul><h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><h3 id="å¼€å‘-3"><a href="#å¼€å‘-3" class="headerlink" title="å¼€å‘"></a>å¼€å‘</h3>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h2 id=&quot;Universal&quot;&gt;&lt;a href=&quot;#Universal&quot; class=&quot;headerlink&quot; title=&quot;Universal&quot;&gt;&lt;/a&gt;Universal&lt;/h2&gt;&lt;h3 id=&quot;æ—¥å¸¸&quot;&gt;&lt;a href=&quot;#æ—¥å¸¸&quot; class=&quot;headerlink&quot;</summary>
        
      
    
    
    
    <category term="éæŠ€æœ¯" scheme="https://iwesley.top/categories/%E9%9D%9E%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="è½¯ä»¶" scheme="https://iwesley.top/tags/%E8%BD%AF%E4%BB%B6/"/>
    
    <category term="Mac" scheme="https://iwesley.top/tags/Mac/"/>
    
    <category term="Windows" scheme="https://iwesley.top/tags/Windows/"/>
    
    <category term="Linux" scheme="https://iwesley.top/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>å†…å­˜æ€§èƒ½æµ‹è¯•æ–¹æ³•</title>
    <link href="https://iwesley.top/article/f42b9418/"/>
    <id>https://iwesley.top/article/f42b9418/</id>
    <published>2025-05-02T15:10:34.000Z</published>
    <updated>2025-05-03T09:31:42.929Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å†™äº 2022 å¹´ 6 æœˆ 24 æ—¥</p></blockquote><h2 id="ddæ–¹æ³•æµ‹è¯•"><a href="#ddæ–¹æ³•æµ‹è¯•" class="headerlink" title="ddæ–¹æ³•æµ‹è¯•"></a>ddæ–¹æ³•æµ‹è¯•</h2><p>cat proc&#x2F;meminfo </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs Shell">console:/ # cat proc/meminfo <br>MemTotal:        3858576 kB<br>MemFree:          675328 kB<br>MemAvailable:    1142452 kB<br>Buffers:           65280 kB<br>Cached:           992252 kB<br>SwapCached:           40 kB<br>Active:          1144480 kB<br>Inactive:         923220 kB<br>Active(anon):     875244 kB<br>Inactive(anon):   667400 kB<br>Active(file):     269236 kB<br>Inactive(file):   255820 kB<br>Unevictable:        4436 kB<br>Mlocked:            4436 kB<br>SwapTotal:        614396 kB<br>SwapFree:         601596 kB<br>Dirty:                 4 kB<br>Writeback:             0 kB<br>AnonPages:       1014744 kB<br>Mapped:           301460 kB<br>Shmem:            530712 kB<br>KReclaimable:      39912 kB<br>Slab:             142104 kB<br>SReclaimable:      39912 kB<br>SUnreclaim:       102192 kB<br>KernelStack:       33088 kB<br>ShadowCallStack:    2078 kB<br>PageTables:        39964 kB<br>NFS_Unstable:          0 kB<br>Bounce:                0 kB<br>WritebackTmp:          0 kB<br>CommitLimit:     2263732 kB<br>Committed_AS:   47064316 kB<br>VmallocTotal:   262930368 kB<br>VmallocUsed:       56632 kB<br>VmallocChunk:          0 kB<br>Percpu:             2768 kB<br>CmaTotal:        1921024 kB<br>CmaFree:          158092 kB<br></code></pre></td></tr></table></figure><p>å‰©1.1Gå·¦å³ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæŒ‚è½½åœ¨å†…å­˜ä¸Šé¢çš„åˆ†åŒºï¼Œå¤§å°ä¸ºå¯ç”¨å†…å­˜çš„ä¸€åŠå·¦å³ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs Shell">mount -o rw,remount /<br>mkdir memtest<br>mount -t tmpfs tmpfs /memtest  -o size=600m<br></code></pre></td></tr></table></figure><h3 id="å†…å­˜å†™æµ‹è¯•"><a href="#å†…å­˜å†™æµ‹è¯•" class="headerlink" title="å†…å­˜å†™æµ‹è¯•"></a>å†…å­˜å†™æµ‹è¯•</h3><p>dd if&#x3D;&#x2F;dev&#x2F;zero of&#x3D;&#x2F;memtest&#x2F;testfile bs&#x3D;1M count&#x3D;500</p><p>dd if&#x3D;&#x2F;dev&#x2F;zero of&#x3D;&#x2F;memtest&#x2F;testfile bs&#x3D;500M count&#x3D;1</p><p>dd if&#x3D;&#x2F;dev&#x2F;zero of&#x3D;&#x2F;memtest&#x2F;testfile bs&#x3D;512K count&#x3D;1000</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs Shell">console:/ # dd if=/dev/zero of=/memtest/testfile bs=1M count=500<br>500+0 records in<br>500+0 records out<br>524288000 bytes (500 M) copied, 0.782312 s, 639 M/s<br>console:/ # dd if=/dev/zero of=/memtest/testfile bs=500M count=1<br>1+0 records in<br>1+0 records out<br>524288000 bytes (500 M) copied, 1.272919 s, 393 M/s<br>console:/ # dd if=/dev/zero of=/memtest/testfile bs=512K count=1000<br>1000+0 records in<br>1000+0 records out<br>524288000 bytes (500 M) copied, 0.794319 s, 629 M/s<br></code></pre></td></tr></table></figure><h3 id="å†…å­˜è¯»æµ‹è¯•"><a href="#å†…å­˜è¯»æµ‹è¯•" class="headerlink" title="å†…å­˜è¯»æµ‹è¯•"></a>å†…å­˜è¯»æµ‹è¯•</h3><p>dd if&#x3D;&#x2F;memtest&#x2F;testfile  of&#x3D;&#x2F;dev&#x2F;null bs&#x3D;1M count&#x3D;500 </p><p>dd if&#x3D;&#x2F;memtest&#x2F;testfile  of&#x3D;&#x2F;dev&#x2F;null bs&#x3D;500M count&#x3D;1       </p><p>dd if&#x3D;&#x2F;memtest&#x2F;testfile  of&#x3D;&#x2F;dev&#x2F;null bs&#x3D;512K count&#x3D;1000      </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs Shell">console:/ # dd if=/memtest/testfile  of=/dev/null bs=1M count=500              <br>500+0 records in<br>500+0 records out<br>524288000 bytes (500 M) copied, 0.340277 s, 1.4 G/s<br>console:/ # dd if=/memtest/testfile  of=/dev/null bs=500M count=1                          &lt;<br>1+0 records in<br>1+0 records out<br>524288000 bytes (500 M) copied, 0.682501 s, 733 M/s<br>console:/ # dd if=/memtest/testfile  of=/dev/null bs=512K count=1000                       &lt;<br>1000+0 records in<br>1000+0 records out<br>524288000 bytes (500 M) copied, 0.226277 s, 2.1 G/s<br></code></pre></td></tr></table></figure><h2 id="Steam-benchmarkï¼ˆæ¨èï¼‰"><a href="#Steam-benchmarkï¼ˆæ¨èï¼‰" class="headerlink" title="Steam benchmarkï¼ˆæ¨èï¼‰"></a>Steam benchmarkï¼ˆæ¨èï¼‰</h2><p><a href="https://github.com/wesley666/source/blob/main/stream_benchmark">source&#x2F;stream_benchmark at main Â· wesley666&#x2F;source</a></p><p>Adb pushåˆ°data&#x2F;local&#x2F;tmpç›®å½•ï¼Œèµ‹äºˆæ‰§è¡Œæƒé™</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs Shell">console:/data/local/tmp # ./stream_benchmark                                   <br>-------------------------------------------------------------<br>STREAM version $Revision: 5.10 $<br>-------------------------------------------------------------<br>This system uses 8 bytes per array element.<br>-------------------------------------------------------------<br>Array size = 10000000 (elements), Offset = 0 (elements)<br>Memory per array = 76.3 MiB (= 0.1 GiB).<br>Total memory required = 228.9 MiB (= 0.2 GiB).<br>Each kernel will be executed 10 times.<br> The *best* time for each kernel (excluding the first iteration)<br> will be used to compute the reported bandwidth.<br>-------------------------------------------------------------<br>Your clock granularity/precision appears to be 1 microseconds.<br>Each test below will take on the order of 21376 microseconds.<br>   (= 21376 clock ticks)<br>Increase the size of the arrays if this shows that<br>you are not getting at least 20 clock ticks per test.<br>-------------------------------------------------------------<br>WARNING -- The above is only a rough guideline.<br>For best results, please be sure you know the<br>precision of your system timer.<br>-------------------------------------------------------------<br>Function    Best Rate MB/s  Avg time     Min time     Max time<br>Copy:           10748.4     0.015937     0.014886     0.017156<br>Scale:           8149.9     0.020030     0.019632     0.020463<br>Add:             9070.6     0.027085     0.026459     0.028024<br>Triad:           8255.9     0.029891     0.029070     0.030490<br>-------------------------------------------------------------<br>Solution Validates: avg error less than 1.000000e-13 on all three arrays<br>-------------------------------------------------------------<br></code></pre></td></tr></table></figure><p>Copyæ“ä½œæœ€ä¸ºç®€å•ï¼Œå®ƒå…ˆè®¿é—®ä¸€ä¸ªå†…å­˜å•å…ƒè¯»å‡ºå…¶ä¸­çš„å€¼ï¼Œå†å°†å€¼å†™å…¥åˆ°å¦ä¸€ä¸ªå†…å­˜å•å…ƒã€‚</p><p>Scaleæ“ä½œå…ˆä»å†…å­˜å•å…ƒè¯»å‡ºå…¶ä¸­çš„å€¼ï¼Œä½œä¸€ä¸ªä¹˜æ³•è¿ç®—ï¼Œå†å°†ç»“æœå†™å…¥åˆ°å¦ä¸€ä¸ªå†…å­˜å•å…ƒã€‚</p><p>Addæ“ä½œå…ˆä»å†…å­˜å•å…ƒè¯»å‡ºä¸¤ä¸ªå€¼ï¼ŒåšåŠ æ³•è¿ç®—ï¼Œ å†å°†ç»“æœå†™å…¥åˆ°å¦ä¸€ä¸ªå†…å­˜å•å…ƒã€‚</p><p>Triadçš„ä¸­æ–‡å«ä¹‰æ˜¯å°†ä¸‰ä¸ªç»„åˆèµ·æ¥ï¼Œåœ¨æœ¬æµ‹è¯•ä¸­è¡¨ç¤ºçš„æ„æ€æ˜¯å°†Copyã€Scaleã€Addä¸‰ç§æ“ä½œç»„åˆèµ·æ¥è¿›è¡Œæµ‹è¯•ã€‚å…·ä½“æ“ä½œæ–¹å¼æ˜¯ï¼šå…ˆä»å†…å­˜å•å…ƒä¸­ä¸­è¯»ä¸¤ä¸ªå€¼aã€bï¼Œå¯¹å…¶è¿›è¡Œä¹˜åŠ æ··åˆè¿ç®—ï¼ˆa + å› å­ * b ï¼‰ ï¼Œå°†è¿ç®—ç»“æœå†™å…¥åˆ°å¦ä¸€ä¸ªå†…å­˜å•å…ƒã€‚</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;å†™äº 2022 å¹´ 6 æœˆ 24 æ—¥&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;ddæ–¹æ³•æµ‹è¯•&quot;&gt;&lt;a href=&quot;#ddæ–¹æ³•æµ‹è¯•&quot; class=&quot;headerlink&quot;</summary>
        
      
    
    
    
    <category term="Androidæ€§èƒ½ä¼˜åŒ–" scheme="https://iwesley.top/categories/Android%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
    
    <category term="å†…å­˜" scheme="https://iwesley.top/tags/%E5%86%85%E5%AD%98/"/>
    
    <category term="æ€§èƒ½å·¥å…·" scheme="https://iwesley.top/tags/%E6%80%A7%E8%83%BD%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>EMMCå­˜å‚¨æ€§èƒ½æµ‹è¯•æ–¹æ³•</title>
    <link href="https://iwesley.top/article/7cf0bd29/"/>
    <id>https://iwesley.top/article/7cf0bd29/</id>
    <published>2025-05-02T15:10:23.000Z</published>
    <updated>2025-05-03T09:31:42.928Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è®°äº 2022 å¹´ 9 æœˆ 15 æ—¥</p></blockquote><p>å‚è€ƒ<a href="https://qiushao.net/2020/02/12/Android/emmc-performance-test/index.html">Android-emmcæ€§èƒ½æµ‹è¯• | ä¸€å¶çŸ¥ç§‹</a>è¿›è¡Œå®è·µæ“ä½œ</p><h1 id="dd-å‘½ä»¤"><a href="#dd-å‘½ä»¤" class="headerlink" title="dd å‘½ä»¤"></a>dd å‘½ä»¤</h1><h2 id="é¡µé¢ç¼“å­˜"><a href="#é¡µé¢ç¼“å­˜" class="headerlink" title="é¡µé¢ç¼“å­˜"></a>é¡µé¢ç¼“å­˜</h2><p>ä¸ºäº†æµ‹è¯• emmc çš„çœŸå®è¯»å†™æ€§èƒ½ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæŠŠé¡µé¢ç¼“å­˜ç»™æ¸…ç†ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs Shell">echo 1 &gt; /proc/sys/vm/drop_caches<br>console:/ # echo 1 &gt; /proc/sys/vm/drop_caches                                  <br>console:/ # busybox dd if=/dev/block/mmcblk0 of=/dev/null bs=1M count=512                          &lt;<br>512+0 records in<br>512+0 records out<br>536870912 bytes (512.0MB) copied, 2.491718 seconds, 205.5MB/s<br>console:/ # busybox dd if=/dev/block/mmcblk0 of=/dev/null bs=1M count=512                          &lt;<br>512+0 records in<br>512+0 records out<br>536870912 bytes (512.0MB) copied, 0.290948 seconds, 1.7GB/s<br><br>console:/ # echo 1 &gt; /proc/sys/vm/drop_caches <br>console:/ # busybox  dd if=/dev/block/mmcblk0 of=/dev/null bs=1M count=512                          &lt;<br>512+0 records in<br>512+0 records out<br>536870912 bytes (512.0MB) copied, 2.508393 seconds, 204.1MB/s<br>console:/ # <br></code></pre></td></tr></table></figure><p>è¿ç»­æ‰§è¡Œä¸¤æ¬¡ <code>busybox  dd if=/dev/block/mmcblk0 of=/dev/null bs=1M count=512</code> ï¼Œä» &#x2F;dev&#x2F;block&#x2F;mmcblk0 (å³emmc) å—è®¾å¤‡ä¸­è¯»å–å†…å®¹ï¼Œå†™åˆ° <code>/dev/null</code> ã€‚</p><p><code>/dev/null</code> æ˜¯ä¸€ä¸ªè™šæ‹Ÿè®¾å¤‡ï¼Œå†™å…¥è¿™ä¸ªè·¯å¾„å¹¶ä¸ä¼šä¿å­˜æ•°æ®ï¼Œå¯ä»¥è®¤ä¸ºè¿™ä¸ªè®¾å¤‡çš„å†™å…¥é€Ÿåº¦æ— é™å¤§ï¼Œä¹Ÿå°±æ˜¯å†™å…¥é€Ÿåº¦ä¸ä¼šæˆä¸ºè¿™ä¸ªå‘½ä»¤çš„ç“¶é¢ˆï¼Œæˆ‘ä»¬è¿™ä¸ªå‘½ä»¤ä¸»è¦æ˜¯ä¸ºäº†æµ‹è¯• emmc çš„è¯»å–é€Ÿåº¦ã€‚å¯ä»¥çœ‹åˆ°ç¬¬ä¸€æ¬¡æ‰§è¡Œçš„ç»“æœæ˜¯ 205.5MB&#x2F;sï¼Œç¬¬äºŒæ¬¡æ‰§è¡Œçš„ç»“æœæ˜¯ 1.7GB&#x2F;sã€‚ä»è¿™ä¸ªæ•°æ®æ¥çœ‹ï¼Œé¡µé¢ç¼“å­˜æå¤§çš„æé«˜äº†çƒ­ç‚¹æ–‡ä»¶çš„è¯»å–é€Ÿåº¦ã€‚ç„¶åæˆ‘ä»¬ç”¨ <code>echo 1 &gt; /proc/sys/vm/drop_caches</code>å‘½ä»¤æ¸…é™¤ä¸€ä¸‹é¡µé¢ç¼“å­˜ï¼Œå†æ‰§è¡ŒåŒæ ·çš„ <code>dd</code>å‘½ä»¤ï¼Œå‘ç°é€Ÿåº¦è·Ÿç¬¬ä¸€æ¬¡å·®ä¸å¤šäº†ã€‚</p><h2 id="å†™å…¥æ€§èƒ½æµ‹è¯•"><a href="#å†™å…¥æ€§èƒ½æµ‹è¯•" class="headerlink" title="å†™å…¥æ€§èƒ½æµ‹è¯•"></a>å†™å…¥æ€§èƒ½æµ‹è¯•</h2><h3 id="å†™å…¥å—è®¾å¤‡"><a href="#å†™å…¥å—è®¾å¤‡" class="headerlink" title="å†™å…¥å—è®¾å¤‡"></a>å†™å…¥å—è®¾å¤‡</h3><p>cache åˆ†åŒºä¸€èˆ¬æ˜¯ç”¨æ¥å­˜æ”¾ OTA å‡çº§åŒ…çš„ï¼Œæ­£å¸¸çŠ¶æ€ä¸‹æŒ‚è½½å¤±è´¥ä¹Ÿä¸å½±å“ç³»ç»Ÿçš„æ­£å¸¸è¿è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬æ‹¿ cache åˆ†åŒºæ¥ä½œå†™å…¥æµ‹è¯•ï¼Œå…ˆæ‰¾åˆ° cache å¯¹åº”çš„å—è®¾å¤‡æ–‡ä»¶ï¼ˆdf -hå‘½ä»¤æ˜¾ç¤ºå¼‚å¸¸çš„è¯ï¼Œå¯ä»¥æ‰§è¡Œ<code>ls -l /dev/block/platform/*/by-name/cache</code>ï¼‰</p><p><strong>æ³¨æ„ï¼šæœ¬æµ‹è¯•æ–¹æ³•å¯èƒ½ä¼šæŸåcacheåˆ†åŒºå¯¼è‡´otaå¤±è´¥ï¼Œå‡ºç°è¿™ç§æƒ…å†µå»ºè®®æ¢å¤å‡ºå‚è®¾ç½®æˆ–è€…çº¿åˆ·ã€‚</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs Shell">console:/ # df -h<br>Filesystem            Size  Used Avail Use% Mounted on<br>tmpfs                 1.5G  892K  1.5G   1% /dev<br>tmpfs                 1.5G     0  1.5G   0% /mnt<br>/dev/block/mmcblk0p26  14M  168K   14M   2% /metadata<br>/dev/block/dm-1       1.1G  0.9G  199M  84% /<br>/dev/block/mmcblk0p40 379M   24M  356M   7% /wesley<br>/dev/block/mmcblk0p38 379M  154M  226M  41% /factory<br>/dev/block/mmcblk0p39  18M  1.3M   17M   8% /atv<br>/dev/block/mmcblk0p36 9.1M   24K  9.0M   1% /oem<br>/dev/block/dm-2       340M  240M  100M  71% /vendor<br>/dev/block/dm-0       167M   84K  167M   1% /mnt/scratch<br>overlay               167M   84K  167M   1% /system_ext<br>overlay               167M   84K  167M   1% /product<br>overlay               167M   84K  167M   1% /odm<br>tmpfs                 1.5G     0  1.5G   0% /apex<br>tmpfs                 1.5G  248K  1.5G   1% /linkerconfig<br>tmpfs                  20M  1.0M   19M   6% /mnt/vendor/rtdlog<br>tmpfs                  20M  8.0K   20M   1% /tmp<br>/dev/block/mmcblk0p23 1.4G  3.9M  1.4G   1% /cache<br>/dev/block/mmcblk0p31 236M   12M  224M   6% /mnt/vendor/tvconfigs<br>/dev/block/mmcblk0p32  26M   84K   26M   1% /mnt/vendor/tvdata<br>/dev/block/mmcblk0p33  18M   36K   18M   1% /mnt/vendor/impdata<br>/dev/block/mmcblk0p4  976K  228K  748K  24% /mnt/vendor/factory<br>/dev/block/mmcblk0p6  976K   28K  948K   3% /mnt/vendor/factory_ro<br>tmpfs                  20M     0   20M   0% /shm<br>tmpfs                 8.0M     0  8.0M   0% /mnt/EPGdb<br>/dev/block/mmcblk0p42 107G  4.8G  102G   5% /data<br>tmpfs                 1.5G     0  1.5G   0% /data_mirror<br>/dev/fuse             107G  4.8G  102G   5% /mnt/user/0/emulated<br>console:/ # <br></code></pre></td></tr></table></figure><p>cacheåˆ†åŒºçš„å—è®¾å¤‡æ–‡ä»¶ä¸º&#x2F;dev&#x2F;block&#x2F;mmcblk0p23ã€‚</p><p>å†™å…¥æµ‹è¯•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs Shell">console:/ #  echo 1 &gt; /proc/sys/vm/drop_caches    <br>console:/ #  busybox dd if=/dev/zero of=/dev/block/mmcblk0p23 bs=1M count=1024 conv=fsync<br>1024+0 records in<br>1024+0 records out<br>1073741824 bytes (1.0GB) copied, 11.371810 seconds, 90.0MB/s<br></code></pre></td></tr></table></figure><p>è¾“å…¥æ–‡ä»¶ä¸º &#x2F;dev&#x2F;zeroï¼Œæ˜¯ä¸€ä¸ªè™šæ‹Ÿè®¾å¤‡ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºè¿™ä¸ªè®¾å¤‡çš„è¯»å–é€Ÿåº¦æ— é™å¤§ï¼Œä¹Ÿå°±æ˜¯è¯»å–é€Ÿåº¦ä¸ä¼šå½±å“åˆ°å†™å…¥çš„é€Ÿåº¦ã€‚</p><p>bs&#x3D;1M : ä¸€æ¬¡å†™å…¥ 1M</p><p>count&#x3D;1024 : å†™å…¥ 1024 æ¬¡ï¼Œä¹Ÿå°±æ˜¯å†™å…¥çš„æ•°æ®æ€»é‡ä¸º 1G</p><p>conv&#x3D;fsync : dd ç»“æŸå‰ï¼ŒæŠŠæ•°æ®åŒæ­¥åˆ° emmcï¼Œå¦‚æœæ²¡åŠ è¿™ä¸ªå‚æ•°çš„è¯ï¼Œæ•°æ®å¯èƒ½è¿˜åœ¨ç¼“å­˜ä¹‹ä¸­ã€‚ä¸ºäº†ç¡®ä¿æ•°æ®å‡†ç¡®ï¼Œä¸€å®šè¦åŠ è¿™ä¸ªå‚æ•°ã€‚</p><p>å¯ä»¥é‡å¤æµ‹è¯•å‡ æ¬¡</p><h3 id="å†™å…¥æ–‡ä»¶"><a href="#å†™å…¥æ–‡ä»¶" class="headerlink" title="å†™å…¥æ–‡ä»¶"></a>å†™å…¥æ–‡ä»¶</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs Shell">console:/ # echo 1 &gt; /proc/sys/vm/drop_caches<br>console:/ # busybox dd if=/dev/zero of=/data/ddtest.bin bs=1M count=1024 conv=fsync                   <br>1024+0 records in<br>1024+0 records out<br>1073741824 bytes (1.0GB) copied, 15.211609 seconds, 67.3MB/s<br>console:/ #<br></code></pre></td></tr></table></figure><p>è¦é‡å¤æµ‹è¯•å‡ æ¬¡ã€‚ç›¸å¯¹ç›´æ¥å†™å—è®¾å¤‡æ–‡ä»¶æ…¢äº† 30M&#x2F;s å·¦å³ã€‚è¿™å¯èƒ½æ˜¯æ–‡ä»¶ç³»ç»Ÿå¸¦æ¥çš„å½±å“ã€‚</p><h2 id="è¯»å–æµ‹è¯•"><a href="#è¯»å–æµ‹è¯•" class="headerlink" title="è¯»å–æµ‹è¯•"></a>è¯»å–æµ‹è¯•</h2><h3 id="è¯»å–å—è®¾å¤‡"><a href="#è¯»å–å—è®¾å¤‡" class="headerlink" title="è¯»å–å—è®¾å¤‡"></a>è¯»å–å—è®¾å¤‡</h3><p>ç›´æ¥ç”¨æˆ‘ä»¬ä¸Šé¢ä»‹ç»æ¸…é™¤ç¼“å­˜çš„ä¾‹å­å°±è¡Œï¼Œè¿™é‡Œå°±ä¸å†é‡å¤äº†ã€‚</p><p>ä»ä¸Šé¢çš„ä¾‹å­å¾—åˆ°çš„æ•°æ®ä¸º 205M&#x2F;s å·¦å³ã€‚</p><h3 id="è¯»å–æ–‡ä»¶"><a href="#è¯»å–æ–‡ä»¶" class="headerlink" title="è¯»å–æ–‡ä»¶"></a>è¯»å–æ–‡ä»¶</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs Shell">console:/ # echo 1 &gt; /proc/sys/vm/drop_caches        <br>console:/ # busybox dd if=/data/ddtest.bin of=/dev/null bs=1M count=1024<br>1024+0 records in<br>1024+0 records out<br>1073741824 bytes (1.0GB) copied, 5.464306 seconds, 187.4MB/s<br>console:/ # <br></code></pre></td></tr></table></figure><p>ç›´æ¥æ‹¿æµ‹è¯•å†™å…¥é€Ÿåº¦æ—¶ç”Ÿæˆçš„æ–‡ä»¶ï¼Œé‡å¤æµ‹è¯•å‡ æ¬¡ï¼Œé€Ÿåº¦åŸºæœ¬ä¸Šåœ¨ 187MB&#x2F;s å·¦å³ã€‚</p><h1 id="iozone"><a href="#iozone" class="headerlink" title="iozone"></a>iozone</h1><p>Android ç³»ç»Ÿæºç ä¸­å¹¶æ²¡æœ‰ iozoneï¼Œæˆ‘ä»¬ä»å®˜ç½‘ä¸Šä¸‹è½½ç¼–è¯‘ï¼Œæˆ‘ä¸‹è½½æ—¶æœ€æ–°ç‰ˆæœ¬ä¸ºiozone3_493ï¼Œè¿™ä¸ªç‰ˆæœ¬å·²ç»æœ‰ Android.mk åœ¨ä»£ç é‡Œé¢äº†ï¼Œå°†æºç æ”¾åˆ° Androidç³»ç»Ÿæºç é‡Œé¢ mm å³å¯ã€‚ä¸‹é¢å·²ç»æ˜¯æˆ‘ç¼–è¯‘å¥½çš„æ–‡ä»¶ã€‚å¯¹åº”ä¸åŒç¡¬ä»¶ä½¿ç”¨å¯¹åº”ç‰ˆæœ¬å³å¯ï¼ŒæŠŠæ–‡ä»¶pushåˆ°&#x2F;data&#x2F;local&#x2F;tmp&#x2F;ï¼Œå¹¶èµ‹äºˆæ‰§è¡Œæƒé™ã€‚</p><p><a href="https://github.com/wesley666/source/blob/main/izone.zip">source&#x2F;izone.zip at main Â· wesley666&#x2F;source</a></p><h2 id="éšæœºè¯»å†™æµ‹è¯•"><a href="#éšæœºè¯»å†™æµ‹è¯•" class="headerlink" title="éšæœºè¯»å†™æµ‹è¯•"></a>éšæœºè¯»å†™æµ‹è¯•</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs Shell">console: echo 1 &gt; /proc/sys/vm/drop_caches                                              &lt;<br>console:/data/local/tmp # ./iozone -azecI -+n -L64 -S32 -r1m -s1024m -i0 -i1 -i2 -w -f /data/iozonetest.bin <br>        Iozone: Performance Test of File I/O<br>                Version $Revision: 3.493 $<br>                Compiled for 32 bit mode.<br>                Build: linux-arm <br><br>        Contributors:William Norcott, Don Capps, Isom Crawford, Kirby Collins<br>                     Al Slater, Scott Rhine, Mike Wisner, Ken Goss<br>                     Steve Landherr, Brad Smith, Mark Kelly, Dr. Alain CYR,<br>                     Randy Dunlap, Mark Montague, Dan Million, Gavin Brebner,<br>                     Jean-Marc Zucconi, Jeff Blomberg, Benny Halevy, Dave Boone,<br>                     Erik Habbinga, Kris Strecker, Walter Wong, Joshua Root,<br>                     Fabrice Bacchella, Zhenghua Xue, Qin Li, Darren Sawyer,<br>                     Vangel Bojaxhi, Ben England, Vikentsi Lapa,<br>                     Alexey Skidanov, Sudhir Kumar.<br><br>        Run began: Fri Jun 10 19:34:04 2022<br><br>        Auto Mode<br>        Cross over of record size disabled.<br>        Include fsync in write timing<br>        Include close in write timing<br>        O_DIRECT feature enabled<br>        No retest option selected<br>        Record Size 1024 kB<br>        File size set to 1048576 kB<br>        Setting no_unlink<br>        Command line used: ./iozone -azecI -+n -L64 -S32 -r1m -s1024m -i0 -i1 -i2 -w -f /data/iozonetest.bin<br>        Output is in kBytes/sec<br>        Time Resolution = 0.000001 seconds.<br>        Processor cache size set to 32 kBytes.<br>        Processor cache line size set to 64 bytes.<br>        File stride size set to 17 * record size.<br>                                                              random    random     bkwd    record    stride                                    <br>              kB  reclen    write  rewrite    read    reread    read     write     read   rewrite      read   fwrite frewrite    fread  freread<br>         1048576    1024   150737        0   210429        0   208681   173348                                                                <br><br>iozone test complete.<br>console:/data/local/tmp # <br></code></pre></td></tr></table></figure><p>ä»ç»“æœæ¥çœ‹ï¼Œå†™é€Ÿåº¦ä¸º150MB&#x2F;sï¼Œè¯»é€Ÿåº¦ä¸º210MB&#x2F;sï¼Œéšæœºè¯»é€Ÿåº¦ä¸º208MB&#x2F;sã€‚ã€€éšæœºå†™é€Ÿåº¦ä¸º 173MB&#x2F;sã€‚</p><p>é‡å¤æµ‹è¯•å‡ æ¬¡ç»“æœå·®ä¸å¤šï¼Œè¯»çš„é€Ÿåº¦åŸºæœ¬è·Ÿ dd çš„ä¸€è‡´ã€‚å†™å…¥æ¯” dd çš„å¿«äº†ä¸€å€å‡ ï¼Œè¿™é‡Œé¢çš„å·®è·å¾…ç ”ç©¶ï¼Œå¯èƒ½è·Ÿå‚æ•°è®¾ç½®æœ‰å…³ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./iozone -azecI -+n -L64 -S32 -r1m -s1024m -i0 -i1 -i2 -w -f /data/iozonetest.bin [-Rb /sdcard/emmc_test.xls] <br></code></pre></td></tr></table></figure><p>å„ä¸ªå‚æ•°å®šä¹‰å¦‚ä¸‹ï¼š</p><p>a: ä½¿ç”¨å…¨è‡ªåŠ¨æ¨¡å¼ã€‚ç”Ÿæˆæ¶µç›–æ‰€æœ‰æµ‹è¯•æ“ä½œçš„è¾“å‡ºï¼Œè®°å½•å¤§å°ä¸º4kåˆ°16Mï¼Œæ–‡ä»¶å¤§å°ä¸º64kåˆ°512Mã€‚</p><p>z: ä¸-aä¸€èµ·ä½¿ç”¨ä»¥æµ‹è¯•æ‰€æœ‰å¯èƒ½çš„è®°å½•å¤§å°ã€‚é€šå¸¸ï¼ŒIozoneåœ¨å…¨è‡ªåŠ¨æ¨¡å¼ä¸‹ä½¿ç”¨æ—¶ä¼šå¿½ç•¥å¯¹éå¸¸å¤§çš„æ–‡ä»¶çš„å°è®°å½•å¤§å°çš„æµ‹è¯•ã€‚æ­¤é€‰é¡¹å¼ºåˆ¶iozoneåœ¨è‡ªåŠ¨æµ‹è¯•ä¸­ä¹ŸåŒ…æ‹¬å°è®°å½•å¤§å°ã€‚</p><p>e: åœ¨æ—¶é—´è®¡ç®—ä¸­åŒ…æ‹¬flushï¼ˆfsyncï¼Œfflushï¼‰</p><p>c: åœ¨è®¡æ—¶è®¡ç®—ä¸­åŒ…æ‹¬closeï¼ˆï¼‰ã€‚ ä»…å½“æ‚¨æ€€ç–‘å½“å‰æ­£åœ¨æµ‹è¯•çš„æ“ä½œç³»ç»Ÿä¸­çš„closeï¼ˆï¼‰è¢«ç ´åæ—¶ï¼Œè¿™æ‰æœ‰ç”¨ã€‚ å®ƒå¯¹äºNFS3æµ‹è¯•ä¹Ÿå¾ˆæœ‰ç”¨ï¼Œå¯ä»¥å¸®åŠ©è¯†åˆ«nfs3_commitæ˜¯å¦è¿è¡Œè‰¯å¥½ã€‚</p><p>I: å¯¹æ‰€æœ‰æ–‡ä»¶æ“ä½œä½¿ç”¨DIRECT I&#x2F;O. å‘Šè¯‰æ–‡ä»¶ç³»ç»Ÿæ‰€æœ‰æ“ä½œéƒ½ç»•è¿‡ç¼“å†²åŒºç¼“å­˜å¹¶ç›´æ¥è½¬åˆ°ç£ç›˜ã€‚ è¿™ä¹Ÿå°†åœ¨VxFSä¸Šä½¿ç”¨VX_DIRECTï¼Œåœ¨Linuxä¸Šä½¿ç”¨O_DIRECTï¼Œåœ¨Solarisä¸Šä½¿ç”¨directioï¼ˆï¼‰ã€‚</p><p>-+n: æ²¡æœ‰é€‰æ‹©é‡æ–°æµ‹è¯•ã€‚ä½¿ç”¨æ­¤é€‰é¡¹å¯é˜²æ­¢é‡æ–°æµ‹è¯•è¿è¡Œã€‚</p><p>L64: Set processor cache line size to 64 Bytes</p><p>S32: Set processor cache size to 32KBytes</p><p>r2m: block size æŒ‡å®šä¸€æ¬¡å†™å…¥&#x2F;è¯»å‡ºçš„å—å¤§å°ï¼š1M</p><p>s1024m: ç”¨äºæŒ‡å®šè¦æµ‹è¯•çš„æ–‡ä»¶çš„å¤§å°ï¼š1024M</p><p>-i N ç”¨æ¥é€‰æ‹©æµ‹è¯•é¡¹, æ¯”å¦‚Read&#x2F;Write&#x2F;Random æ¯”è¾ƒå¸¸ç”¨çš„æ˜¯0 1 2,å¯ä»¥æŒ‡å®šæˆ-i 0 -i 1 -i2.è¿™äº›åˆ«çš„è¯¦ç»†å†…å®¹è¯·æŸ¥man</p><p>  0&#x3D;write&#x2F;rewrite</p><p>  1&#x3D;read&#x2F;re-read</p><p>  2&#x3D;random-read&#x2F;write</p><p>  3&#x3D;Read-backwards</p><p>  4&#x3D;Re-write-record</p><p>  5&#x3D;stride-read</p><p>  6&#x3D;fwrite&#x2F;re-fwrite</p><p>  7&#x3D;fread&#x2F;Re-fread</p><p>  8&#x3D;random mix</p><p>  9&#x3D;pwrite&#x2F;Re-pwrite</p><p>  10&#x3D;pread&#x2F;Re-pread</p><p>  11&#x3D;pwritev&#x2F;Re-pwritev</p><p>  12&#x3D;preadv&#x2F;Re-preadv</p><p>-+b 400000,30000: burst size 400000KBytes,sleep between burst 30000ms</p><p>w: å½“ä¸´æ—¶æ–‡ä»¶ä½¿ç”¨å®Œæ¯•æ—¶ä¸åˆ é™¤å®ƒä»¬ã€‚æŠŠå®ƒä»¬ç•™åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚</p><p>f: æŒ‡å®šæµ‹è¯•æ–‡ä»¶çš„åå­—(è¿™ä¸ªæ–‡ä»¶å¿…é¡»æŒ‡å®šä½ è¦æµ‹è¯•çš„é‚£ä¸ªç¡¬ä»¶ä¸­)</p><p>å¯é€‰å‚æ•°ï¼š</p><p>R: Generate Excel report</p><p>b: Filename Create Excel worksheet file,emmc_test.xls</p><p>æ³¨æ„ï¼š</p><p>æ ¹æ®æµ‹è¯•æ–‡ä»¶å¤§å°çš„ä¸åŒï¼Œiozone ç£ç›˜è¯»å†™æ€§èƒ½çš„æµ‹è¯•æ–¹æ³•ä¸»è¦åŒ…æ‹¬1å€å†…å­˜æµ‹è¯•å’Œ2å€å†…å­˜æµ‹è¯•ï¼ˆé¿å…ç¼“å­˜çš„å½±å“ï¼‰ã€‚</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://qiushao.net/2020/02/12/Android/emmc-performance-test/index.html">Android-emmcæ€§èƒ½æµ‹è¯• | ä¸€å¶çŸ¥ç§‹</a></p><p><a href="https://github.com/axboe/fio">axboe&#x2F;fio: Flexible I&#x2F;O Tester</a></p><p><a href="https://github.com/DevriesL/RaptorMark">DevriesL&#x2F;RaptorMark</a></p><p><a href="https://www.iozone.org/">Iozone Filesystem Benchmark</a></p><p><a href="https://www.iozone.org/src/current/">iozone: Index of &#x2F;src&#x2F;current</a></p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;è®°äº 2022 å¹´ 9 æœˆ 15 æ—¥&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å‚è€ƒ&lt;a</summary>
        
      
    
    
    
    <category term="Androidæ€§èƒ½ä¼˜åŒ–" scheme="https://iwesley.top/categories/Android%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
    
    <category term="æ€§èƒ½å·¥å…·" scheme="https://iwesley.top/tags/%E6%80%A7%E8%83%BD%E5%B7%A5%E5%85%B7/"/>
    
    <category term="EMMC" scheme="https://iwesley.top/tags/EMMC/"/>
    
  </entry>
  
  <entry>
    <title>btrace2.0ä½¿ç”¨æ–¹æ³•</title>
    <link href="https://iwesley.top/article/788e44fe/"/>
    <id>https://iwesley.top/article/788e44fe/</id>
    <published>2025-05-02T09:32:42.000Z</published>
    <updated>2025-05-02T09:50:02.236Z</updated>
    
    <content type="html"><![CDATA[<p>2022 å¹´æˆ‘ç ”ç©¶å®‰å“æ€§èƒ½ä¼˜åŒ–çš„æ—¶å€™ï¼Œå†™è¿‡ä¸€ç¯‡ï¼š<a href="https://iwesley.top/article/69f32e87/">btrace1.0ä½¿ç”¨æ–¹æ³• - Wesleyâ€™s Blog</a>ï¼Œç°åœ¨ brace è¿›åŒ–åˆ° 2.0 äº†ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ã€‚</p><p>å…·ä½“çš„æ¥å…¥æµç¨‹å¯ä»¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼š</p><p><a href="https://github.com/bytedance/btrace">bytedance&#x2F;btrace: ğŸ”¥ğŸ”¥ btrace(AKA RheaTrace) is a high performance Android trace tool which is based on Perfetto, it support to define custom events automatically during building apk and using bhook to provider more native events like Render&#x2F;Binder&#x2F;IO etc.</a></p><p>æˆ‘è¿™é‡Œä¸»è¦è®°å½•ä¸€ä¸‹æ¥å…¥çš„ä¸€äº›æŠ¥é”™é—®é¢˜ï¼š</p><p>ç›®å‰æœ€æ–°ç‰ˆæœ¬æ˜¯2.0.3-rc03</p><p>é¡¹ç›®çš„gradleç‰ˆæœ¬æ˜¯7.0.2ï¼Œgradle pluginæ˜¯7.0.0</p><h2 id="ç¼–è¯‘æŠ¥é”™"><a href="#ç¼–è¯‘æŠ¥é”™" class="headerlink" title="ç¼–è¯‘æŠ¥é”™"></a>ç¼–è¯‘æŠ¥é”™</h2><blockquote><p>org.gradle.workers.WorkerExecutionException: There was a failure while executing work items</p><p>â€‹at org.gradle.workers.internal.DefaultWorkerExecutor.workerExecutionException(DefaultWorkerExecutor.java:270)</p><p>â€‹at org.gradle.workers.internal.DefaultWorkerExecutor.await(DefaultWorkerExecutor.java:252)</p><p>â€‹at com.android.build.gradle.internal.tasks.DexArchiveBuilderTaskDelegate.doProcess(DexArchiveBuilderTaskDelegate.kt:227)</p><p>â€‹at com.android.build.gradle.internal.tasks.DexArchiveBuilderTask.doTaskAction(DexArchiveBuilderTask.kt:256)</p><p>â€‹at com.android.build.gradle.internal.tasks.NewIncrementalTask$taskAction$$inlined$recordTaskAction$1.invoke(BaseTask.kt:66)</p><p>â€‹at com.android.build.gradle.internal.tasks.Blocks.recordSpan(Blocks.java:51)</p><p>Caused by: com.android.tools.r8.CompilationFailedException: <strong>Compilation failed to complete</strong>, position: Lcom&#x2F;xxx&#x2F;web&#x2F;CommonHeader;<init>()V, origin: D:\Project\p_dev\app\build\intermediates\transforms\analyticsTrack\Production\release\720.jar:com&#x2F;xxx&#x2F;web&#x2F;CommonHeader.class</p></blockquote><p>éœ€è¦å…³æ³¨<strong>Compilation failed to complete</strong>åé¢çš„ç±»</p><p>å¦‚æœå“ªä¸ªç±»æŠ¥é”™å°±å¯ä»¥åŠ å…¥ä¸‹é¢çš„é…ç½®ï¼Œè·¯å¾„â€${project.rootDir}&#x2F;trace-filter&#x2F;traceFilter.txtâ€</p><p><a href="https://github.com/bytedance/btrace/blob/master/GRADLE_CONFIG.MD">btrace&#x2F;GRADLE_CONFIG.MD at master Â· bytedance&#x2F;btrace</a></p><p>æ³¨æ„ï¼šallowpackageå¿…é¡»å…ˆé…ç½®ï¼Œblockpackageå¿…é¡»åœ¨å…¶å­åŒ…ä¸‹é¢ï¼Œå¯ä»¥æ˜¯ç±»æˆ–è€…åŒ…å</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yaml">[<span class="hljs-string">package</span>]<br><span class="hljs-string">-allowpackage</span> <span class="hljs-string">com</span><br><span class="hljs-string">-allowpackage</span> <span class="hljs-string">org</span><br><span class="hljs-string">-allowpackage</span> <span class="hljs-string">androidx</span><br><br><span class="hljs-string">-blockpackage</span> <span class="hljs-string">androidx/exifinterface/media</span><br><span class="hljs-string">-blockpackage</span> <span class="hljs-string">com/google/android/exoplayer2/ui</span><br><span class="hljs-string">-blockpackage</span> <span class="hljs-string">com/xxx/web/CommonHeader</span><br><span class="hljs-string">-blockpackage</span> <span class="hljs-string">org/bouncycastle/jcajce/provider/asymmetric/x509</span><br><span class="hljs-string">-blockpackage</span> <span class="hljs-string">org/bouncycastle/jcajce/provider/asymmetric/dh</span><br><span class="hljs-string">-blockpackage</span> <span class="hljs-string">com/nineoldandroids/util</span><br><span class="hljs-string">-blockpackage</span> <span class="hljs-string">org/bouncycastle/jce/provider/JCEDHPublicKey</span><br><span class="hljs-comment"># org/bouncycastle/jce/provider/X509CertificateObject</span><br><span class="hljs-string">-blockpackage</span> <span class="hljs-string">org/bouncycastle/jce/provider</span><br></code></pre></td></tr></table></figure><h3 id="ç‰¹åˆ«æ³¨æ„"><a href="#ç‰¹åˆ«æ³¨æ„" class="headerlink" title="ç‰¹åˆ«æ³¨æ„"></a>ç‰¹åˆ«æ³¨æ„</h3><p>å¦‚æœæ˜¯windowsç”¨æˆ·ï¼ŒtraceFilter.txtæ¢è¡Œç¬¦å¿…é¡»æ”¹ä¸ºLF</p><h4 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h4><p>com&#x2F;bytedance&#x2F;rheatrace&#x2F;plugin&#x2F;compiling&#x2F;filter&#x2F;RheaTraceMethodFilter.kt</p><p>parseTraceFilterFile</p><p>methodKeepStr.trim { it &lt;&#x3D; â€˜ â€˜ }.replace(â€œ&#x2F;â€œ, â€œ.â€).split(â€œ\nâ€).toTypedArray()</p><p>è¿™é‡Œåªæ›¿æ¢äº†\nï¼Œæ²¡æœ‰æ›¿æ¢\rï¼Œä¼šå¯¼è‡´è§£æå‡ºæ¥çš„åŒ…åå¸¦æœ‰\rï¼Œå¯¼è‡´checkPathå¤±è´¥ã€‚</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">checkPath</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-keyword">if</span> (allowPackages.isEmpty()) &#123;<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <span class="hljs-keyword">for</span> (blockPath <span class="hljs-keyword">in</span> blockPackages) &#123;<br>        <span class="hljs-keyword">var</span> isContain = <span class="hljs-literal">false</span><br>        <span class="hljs-keyword">for</span> (allowPackage <span class="hljs-keyword">in</span> allowPackages) &#123;<br>            <span class="hljs-keyword">if</span> (blockPath == allowPackage) &#123;<br>                RheaLog.e(TAG, <span class="hljs-string">&quot;blockpackage cannot be equal to allowpackage:%s&quot;</span>, blockPath)<br>            &#125;<br>            <span class="hljs-keyword">if</span> (blockPath.startsWith(allowPackage)) &#123;<br>                isContain = <span class="hljs-literal">true</span><br>                <span class="hljs-keyword">break</span><br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (!isContain) &#123;<br>            <span class="hljs-keyword">throw</span> GradleException(<span class="hljs-string">&quot;allowpackage do not contains <span class="hljs-variable">$blockPath</span>&quot;</span>)<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://juejin.cn/post/7350256387161047077">BTraceå’ŒPerfettoå¦‚ä½•åˆ†ææ€§èƒ½æ‰‹æŠŠæ‰‹æ•™ä½ ä½¿ç”¨BTraceå’ŒPerfettoåˆ†ææ€§èƒ½ é«˜çº§androidå¼€å‘å·¥ - æ˜é‡‘</a></p><p><a href="https://mvnrepository.com/artifact/com.bytedance.btrace/rhea-gradle-plugin">Maven Repository: com.bytedance.btrace Â» rhea-gradle-plugin</a></p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;2022 å¹´æˆ‘ç ”ç©¶å®‰å“æ€§èƒ½ä¼˜åŒ–çš„æ—¶å€™ï¼Œå†™è¿‡ä¸€ç¯‡ï¼š&lt;a href=&quot;https://iwesley.top/article/69f32e87/&quot;&gt;btrace1.0ä½¿ç”¨æ–¹æ³• - Wesleyâ€™s Blog&lt;/a&gt;ï¼Œç°åœ¨ brace è¿›åŒ–åˆ° 2.0</summary>
        
      
    
    
    
    <category term="Androidæ€§èƒ½ä¼˜åŒ–" scheme="https://iwesley.top/categories/Android%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
    
    <category term="æ€§èƒ½ä¼˜åŒ–" scheme="https://iwesley.top/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
    <category term="btrace" scheme="https://iwesley.top/tags/btrace/"/>
    
    <category term="systrace" scheme="https://iwesley.top/tags/systrace/"/>
    
    <category term="perfetto" scheme="https://iwesley.top/tags/perfetto/"/>
    
  </entry>
  
  <entry>
    <title>btrace1.0ä½¿ç”¨æ–¹æ³•</title>
    <link href="https://iwesley.top/article/69f32e87/"/>
    <id>https://iwesley.top/article/69f32e87/</id>
    <published>2025-05-02T08:35:23.000Z</published>
    <updated>2025-05-02T09:30:00.285Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è®°äº 2022 å¹´ 6 æœˆ 24 æ—¥</p></blockquote><p><strong>æ³¨æ„ï¼šç›®å‰ä»…é™äºmacoså’Œlinuxä½¿ç”¨</strong></p><p><a href="https://github.com/bytedance/btrace/blob/master/README.zh-CN.md">btrace&#x2F;README.zh-CN.md at master Â· bytedance&#x2F;btrace Â· GitHub</a></p><p>btrace(åˆå RheaTrace) æ˜¯ä¸€ä¸ªåŸºäº <a href="https://developer.android.com/topic/performance/tracing">Systrace</a> å®ç°çš„é«˜æ€§èƒ½ Android trace å·¥å…·ï¼Œå®ƒæ”¯æŒåœ¨ App ç¼–è¯‘æœŸé—´è‡ªåŠ¨æ³¨å…¥è‡ªå®šä¹‰äº‹ä»¶ï¼Œå¹¶ä½¿ç”¨ <a href="https://github.com/bytedance/bhook">bhook</a> é¢å¤–æä¾› IO ç­‰ native äº‹ä»¶ã€‚</p><h2 id="å…³é”®ç‰¹å¾"><a href="#å…³é”®ç‰¹å¾" class="headerlink" title="å…³é”®ç‰¹å¾"></a>å…³é”®ç‰¹å¾</h2><p>æ”¯æŒè‡ªåŠ¨æ³¨å…¥è‡ªå®šä¹‰äº‹ä»¶ï¼Œåœ¨ç¼–è¯‘ Apk æœŸé—´ä¸º App æ–¹æ³•è‡ªåŠ¨æ³¨å…¥Trace#beginSection(String) å’Œ Trace#endSection()ã€‚</p><p>æä¾›é¢å¤– IO ç­‰ native äº‹ä»¶ï¼Œæ–¹ä¾¿å®šä½è€—æ—¶åŸå› ã€‚</p><p>æ”¯æŒä»…é‡‡é›†ä¸»çº¿ç¨‹ trace äº‹ä»¶ã€‚</p><p>ä½¿ç”¨ä¾¿æ·ï¼Œç¨³å®šæ€§é«˜ï¼Œæ€§èƒ½ä¼˜äº Systraceã€‚</p><h2 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h2><p><strong>æ³¨æ„ï¼šå­˜å‚¨æƒé™è¦ç”³è¯·</strong></p><p>è‡ªå®šä¹‰çš„applicationå¿…é¡»æœ‰ä»¥ä¸‹ä»£ç ï¼Œå¦åˆ™ä¼šå¯¼è‡´btraceæ’å…¥åˆå§‹åŒ–ä»£ç å¤±è´¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@OverRide</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">attachBaseContext</span><span class="hljs-params">(Context base)</span> &#123;<br>     <span class="hljs-built_in">super</span>.attachBaseContext(base);<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨æ‚¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ build.gradle æ–‡ä»¶ä¸­å¢åŠ  rhea-gradle-plugin ä½œä¸ºä¾èµ–ã€‚</p><p>æ³¨æ„ï¼šbtraceç‰ˆæœ¬å·å¯ä»¥åœ¨è¿™é‡ŒæŸ¥è¯¢ï¼š<a href="https://search.maven.org/">https://search.maven.org/</a> å¦‚æœæ‰“ä¸å¼€å¯ä»¥åœ¨é˜¿é‡Œäº‘æŸ¥è¯¢ï¼š<a href="https://developer.aliyun.com/mvn/search">https://developer.aliyun.com/mvn/search</a></p><p><img src="https://cdn.jsdelivr.net/gh/wesley666/picgo/img2025/20250502163842049.png" alt="image-20250502163841997"></p><p>ç›®å‰ç‰ˆæœ¬å·æ˜¯1.0.2</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs Groovy">buildscript &#123;<br>    repositories &#123;<br>        ...<br>        mavenCentral()<br>        ...<br>    &#125;<br>    dependencies &#123;<br>        classpath <span class="hljs-string">&#x27;com.bytedance.btrace:rhea-gradle-plugin:1.0.2&#x27;</span><br>    &#125;<br>&#125;<br><br>allprojects &#123;<br>    repositories &#123;<br>        ...<br>        mavenCentral()<br>        ...<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¥ç€åœ¨ app&#x2F;build.gradle æ–‡ä»¶ä¸­åº”ç”¨å¦‚ä¸‹æ‰€ç¤ºæ’ä»¶å’Œä¾èµ–ã€‚</p><h3 id="androidxé¡¹ç›®"><a href="#androidxé¡¹ç›®" class="headerlink" title="androidxé¡¹ç›®"></a>androidxé¡¹ç›®</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs Groovy">dependencies &#123;<br>    <span class="hljs-comment">//rheatrace core lib</span><br>    implementation <span class="hljs-string">&quot;com.bytedance.btrace:rhea-core:1.0.2&quot;</span><br>&#125;<br><br>apply <span class="hljs-attr">plugin:</span> <span class="hljs-string">&#x27;com.bytedance.rhea-trace&#x27;</span><br>rheaTrace &#123;<br><br>   compilation &#123;<br>      <span class="hljs-comment">//ä¸ºå‡å°‘ APK ä½“ç§¯, ä½ å¯ä»¥ä¸º App ä¸­éœ€è¦è·Ÿè¸ªçš„æ–¹æ³•è®¾ç½® id ä»¥æ­¤æ¥è·Ÿè¸ªæ­¤è‡ªå®šä¹‰äº‹ä»¶, é»˜è®¤å€¼ falseã€‚</span><br>      traceWithMethodID = <span class="hljs-literal">false</span> <br>      <span class="hljs-comment">//è¯¥æ–‡ä»¶é…ç½®å†³å®šå“ªäº›æ–¹æ³•æ‚¨ä¸å¸Œæœ›è·Ÿè¸ª, é»˜è®¤å€¼ nullã€‚</span><br>      traceFilterFilePath = <span class="hljs-string">&quot;$&#123;project.rootDir&#125;/rhea-trace/traceFilter.txt&quot;</span><br>      <span class="hljs-comment">//ç”¨ç‰¹æŒ‡å®šæ–¹æ³• id æ¥è®¾ç½®è‡ªå®šä¹‰äº‹ä»¶åç§°, é»˜è®¤å€¼ nullã€‚</span><br>      applyMethodMappingFilePath = <span class="hljs-string">&quot;$&#123;project.rootDir&#125;/rhea-trace/keep-method-id.txt&quot;</span><br>  &#125;<br><br>   runtime &#123;<br>      <span class="hljs-comment">//ä»…åœ¨ä¸»çº¿ç¨‹æŠ“å–è·Ÿè¸ªäº‹ä»¶, é»˜è®¤å€¼ falseã€‚</span><br>      mainThreadOnly <span class="hljs-literal">true</span> <br>      <span class="hljs-comment">//åœ¨ App å¯åŠ¨ä¹‹åˆå¼€å§‹æŠ“å–è·Ÿè¸ªäº‹ä»¶, é»˜è®¤å€¼ trueã€‚</span><br>      startWhenAppLaunch <span class="hljs-literal">true</span><br>      <span class="hljs-comment">//æŒ‡å®šå†…å­˜å­˜å‚¨ atrace æ•°æ® ring buffer çš„å¤§å°ã€‚</span><br>      atraceBufferSize <span class="hljs-string">&quot;500000&quot;</span><br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="android-supporté¡¹ç›®"><a href="#android-supporté¡¹ç›®" class="headerlink" title="android-supporté¡¹ç›®"></a>android-supporté¡¹ç›®</h3><p><strong>æœ¬åœ°éœ€è¦ä¾èµ–çš„æ–‡ä»¶ï¼š</strong> <a href="https://github.com/wesley666/source/blob/main/btrace-Android-support.zip">https://github.com/wesley666/source/blob/main/btrace-Android-support.zip</a></p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs Groovy">dependencies &#123;<br>    <span class="hljs-comment">//rheatrace core lib</span><br>    implementation <span class="hljs-string">&quot;org.jetbrains.kotlin:kotlin-stdlib:1.3.72&quot;</span><br>    implementation files(<span class="hljs-string">&#x27;libs/rhea-common-1.0.2.jar&#x27;</span>)<br>    implementation files(<span class="hljs-string">&#x27;libs/rhea-core-release.aar&#x27;</span>)<br>    implementation files(<span class="hljs-string">&#x27;libs/rhea-atrace-release.aar&#x27;</span>)<br>    implementation <span class="hljs-string">&quot;com.bytedance:bytehook:1.0.3&quot;</span><br>&#125;<br><br>apply <span class="hljs-attr">plugin:</span> <span class="hljs-string">&#x27;com.bytedance.rhea-trace&#x27;</span><br>rheaTrace &#123;<br><br>   compilation &#123;<br>      <span class="hljs-comment">//ä¸ºå‡å°‘ APK ä½“ç§¯, ä½ å¯ä»¥ä¸º App ä¸­éœ€è¦è·Ÿè¸ªçš„æ–¹æ³•è®¾ç½® id ä»¥æ­¤æ¥è·Ÿè¸ªæ­¤è‡ªå®šä¹‰äº‹ä»¶, é»˜è®¤å€¼ falseã€‚</span><br>      traceWithMethodID = <span class="hljs-literal">false</span> <br>      <span class="hljs-comment">//è¯¥æ–‡ä»¶é…ç½®å†³å®šå“ªäº›æ–¹æ³•æ‚¨ä¸å¸Œæœ›è·Ÿè¸ª, é»˜è®¤å€¼ nullã€‚</span><br>      traceFilterFilePath = <span class="hljs-string">&quot;$&#123;project.rootDir&#125;/rhea-trace/traceFilter.txt&quot;</span><br>      <span class="hljs-comment">//ç”¨ç‰¹æŒ‡å®šæ–¹æ³• id æ¥è®¾ç½®è‡ªå®šä¹‰äº‹ä»¶åç§°, é»˜è®¤å€¼ nullã€‚</span><br>      applyMethodMappingFilePath = <span class="hljs-string">&quot;$&#123;project.rootDir&#125;/rhea-trace/keep-method-id.txt&quot;</span><br>  &#125;<br><br>   runtime &#123;<br>      <span class="hljs-comment">//ä»…åœ¨ä¸»çº¿ç¨‹æŠ“å–è·Ÿè¸ªäº‹ä»¶, é»˜è®¤å€¼ falseã€‚</span><br>      mainThreadOnly <span class="hljs-literal">true</span> <br>      <span class="hljs-comment">//åœ¨ App å¯åŠ¨ä¹‹åˆå¼€å§‹æŠ“å–è·Ÿè¸ªäº‹ä»¶, é»˜è®¤å€¼ trueã€‚</span><br>      startWhenAppLaunch <span class="hljs-literal">true</span><br>      <span class="hljs-comment">//æŒ‡å®šå†…å­˜å­˜å‚¨ atrace æ•°æ® ring buffer çš„å¤§å°ã€‚</span><br>      atraceBufferSize <span class="hljs-string">&quot;500000&quot;</span><br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å…³äº <code>rheaTrace </code>ï¼Œä»<a href="https://github.com/bytedance/btrace/blob/master/GRADLE_CONFIG.zh-CN.MD">RheaTrace Gradle Config</a>ä¸­äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p><p>æœ€åï¼Œæ£€æµ‹æ‚¨ç”µè„‘ python ç‰ˆæœ¬ï¼Œç”±äº Systrace çš„å…³ç³» RheaTrace ä»…æ”¯æŒ python 2.7 ç‰ˆæœ¬ï¼Œè¯·å°† systrace ç¯å¢ƒå˜é‡é…ç½®åœ¨ <em>~&#x2F;.bash_profile</em> æ–‡ä»¶ä¸­ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">export PATH=$&#123;PATH&#125;:/Users/$&#123;user_name&#125;/Library/Android/sdk/platform-tools/systrace<br></code></pre></td></tr></table></figure><p>RheaTraceä½¿ç”¨æ–¹æ³•è¯·å‚è€ƒï¼š</p><p><a href="https://github.com/bytedance/btrace/blob/master/README.zh-CN.md">btrace&#x2F;README.zh-CN.md at master Â· bytedance&#x2F;btrace Â· GitHub</a></p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;è®°äº 2022 å¹´ 6 æœˆ 24 æ—¥&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼šç›®å‰ä»…é™äºmacoså’Œlinuxä½¿ç”¨&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a</summary>
        
      
    
    
    
    <category term="Androidæ€§èƒ½ä¼˜åŒ–" scheme="https://iwesley.top/categories/Android%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
    
    <category term="æ€§èƒ½ä¼˜åŒ–" scheme="https://iwesley.top/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
    <category term="btrace" scheme="https://iwesley.top/tags/btrace/"/>
    
    <category term="systrace" scheme="https://iwesley.top/tags/systrace/"/>
    
  </entry>
  
  <entry>
    <title>éŸ³è§†é¢‘ç¼“å­˜æ•°å­¦æ¨¡å‹</title>
    <link href="https://iwesley.top/article/36f6f986/"/>
    <id>https://iwesley.top/article/36f6f986/</id>
    <published>2025-03-16T09:55:28.000Z</published>
    <updated>2025-03-16T10:04:42.652Z</updated>
    
    <content type="html"><![CDATA[<p class="note note-success">2024å¹´8æœˆçš„ç¬”è®°</p><p>æ’­æ”¾å™¨ä½œä¸ºæ¶ˆè´¹è€…ï¼Œç¼“å­˜ä½œä¸ºç”Ÿäº§è€…ã€‚</p><h2 id="è¿›å…¥ç¼“å†²ä¸€æ¬¡"><a href="#è¿›å…¥ç¼“å†²ä¸€æ¬¡" class="headerlink" title="è¿›å…¥ç¼“å†²ä¸€æ¬¡"></a>è¿›å…¥ç¼“å†²ä¸€æ¬¡</h2><p>è®¾æ¶ˆè´¹è€…é€Ÿç‡ä¸ºv1ï¼Œç”Ÿäº§è€…ä¸ºv2ï¼Œè§†é¢‘é•¿åº¦ä¸ºlï¼Œxä¸ºç”Ÿäº§è€…è‡³å°‘è·ç¦»æ¶ˆè´¹è€…å¤šè¿œæ‰èƒ½ä¿è¯åœ¨æ’­å®Œè§†é¢‘å‰ä¸¤è€…é‡åˆã€‚å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªè¿½åŠé—®é¢˜ã€‚</p><p>v1<em>t &#x3D; v2</em>t + xï¼Œå³ l &#x3D; v2*l&#x2F;v1 + xï¼Œå› ä¸ºæ’­æ”¾å™¨é€Ÿåº¦æ˜¯1ï¼Œç»§ç»­ç®€åŒ–å¾— x &#x3D; l(1 - v2)</p><p>å¦‚æœv2å¤§äº1ï¼Œå³æ»¡è¶³æ¶ˆè´¹è€…éœ€æ±‚æ—¶ï¼Œå¯ä»¥æµç•…æ’­æ”¾ã€‚</p><p>è®¾læ˜¯ä¸€éƒ¨45åˆ†é’Ÿçš„ç”µè§†å‰§ï¼Œå³x &#x3D; 45<em>60</em>(1 - v2)</p><p>å¦‚æœv2æ˜¯1ï¼Œå³1så¯ä»¥ç¼“å­˜1sæ—¶é•¿è§†é¢‘ï¼Œåˆ™x &#x3D; 0</p><p>v2æ˜¯0.9ï¼Œå³1så¯ä»¥ç¼“å­˜0.9sæ—¶é•¿è§†é¢‘ï¼Œåˆ™ x &#x3D; 270ï¼Œæ„å‘³ç€è¦æå‰ç¼“å­˜270sçš„è§†é¢‘æ‰å¯ä»¥åç»­ä¸è¿›å…¥ç¼“å†²çŠ¶æ€ã€‚</p><p>åŒç†ï¼Œv2&#x3D;0.8ï¼Œx&#x3D; 540</p><p>â€¦â€¦â€¦â€¦.</p><p>v2 &#x3D; 0.1ï¼Œx&#x3D;2430</p><p>æ–œç‡æ˜¯-2700ï¼Œæ„å‘³ç€æ¯å˜åŒ–ç™¾åˆ†ä¹‹0.1ï¼Œç¼“å­˜é•¿åº¦éƒ½è¦å¢åŠ 270sã€‚</p><p>æ‹¿v2&#x3D;0.9ï¼Œx&#x3D; 270ä½œä¸ºä¾‹å­ï¼Œè¦æå‰ç¼“å­˜270sï¼Œéœ€è¦èŠ±è´¹çš„æ—¶é—´æ˜¯t&#x3D;270&#x2F;0.9&#x3D;300s</p><p>åŒç†ï¼Œv2&#x3D;0.8ï¼Œx&#x3D; 540ï¼Œt&#x3D;540&#x2F;0.8&#x3D;675s</p><p>â€¦â€¦..</p><p>v2 &#x3D; 0.1ï¼Œx&#x3D;2430,t&#x3D;2430&#x2F;0.1&#x3D;24300s&#x3D;405åˆ†é’Ÿ</p><h2 id="è¿›å…¥ç¼“å†²å¤šæ¬¡"><a href="#è¿›å…¥ç¼“å†²å¤šæ¬¡" class="headerlink" title="è¿›å…¥ç¼“å†²å¤šæ¬¡"></a>è¿›å…¥ç¼“å†²å¤šæ¬¡</h2><p>å®é™…ä¸Šï¼Œç”¨æˆ·æ˜¯ä¸èƒ½å®¹å¿ç­‰è¿™ä¹ˆä¹…çš„ï¼Œæ‰€ä»¥æ„å‘³ç€æ’­æ”¾å¼€å§‹åä¼šåå¤è¿›å…¥ç¼“å†²çŠ¶æ€ã€‚</p><p>å‡è®¾ç¼“å­˜1sæ’­1sï¼Œ</p><p>v2&#x3D;1ï¼Œæ˜¯å¯ä»¥æ­£å¸¸æ’­æ”¾</p><p>v2&#x3D;0.9ï¼Œåˆ™ç”¨æˆ·è¦ç­‰å¾…æ—¶é•¿ä¸º 1&#x2F;0.9&#x3D;1.1111sï¼Œå…ˆç¼“å­˜1sï¼Œåˆ™å¹³å‡1&#x2F;ï¼ˆ1-0.9ï¼‰&#x3D;10sè¿›å…¥ç¼“å†²çŠ¶æ€ï¼Œæ¯æ¬¡1.1111s</p><p>v2&#x3D;0.8ï¼Œåˆ™ç”¨æˆ·è¦ç­‰å¾…æ—¶é•¿ä¸º 1&#x2F;0.8&#x3D;1.25sï¼Œå…ˆç¼“å­˜1sï¼Œåˆ™å¹³å‡1&#x2F;ï¼ˆ1-0.8ï¼‰&#x3D;5sè¿›å…¥ç¼“å†²çŠ¶æ€ï¼Œæ¯æ¬¡1.25s</p><p>â€¦â€¦.</p><p>v2&#x3D;0.1ï¼Œåˆ™ç”¨æˆ·è¦ç­‰å¾…æ—¶é•¿ä¸º 1&#x2F;0.1&#x3D;10sï¼Œå…ˆç¼“å­˜1sï¼Œåˆ™å¹³å‡1&#x2F;ï¼ˆ1-0.1ï¼‰&#x3D;1.1111sè¿›å…¥ç¼“å†²çŠ¶æ€ï¼Œæ¯æ¬¡10s</p><p>åŒç†æ¯æ¬¡ç¼“å­˜å¤š1så†æ’­æ”¾ï¼Œéƒ½ä¼šå¢åŠ ä¸€å€è¿›å…¥ç¼“å†²çš„æ—¶é—´å’Œç­‰å¾…æ—¶é—´ã€‚</p><p>æ„å‘³ç€ï¼Œå¦‚æœé€šè¿‡å¤šçº¿ç¨‹ä¸èƒ½æ˜¾è‘—æé«˜v2é€Ÿåº¦è¶…è¿‡1ï¼Œå¯¹ç”¨æˆ·æ¥è¯´éƒ½æ˜¯å¡é¡¿ï¼Œæ— æ³•å¿å—çš„ã€‚</p><p>å½“ç„¶ï¼Œä¸Šé¢åªæ˜¯ä¸€ä¸ªç†è®ºæ¨¡å‹ï¼Œå®é™…ä¸Šè¦å¤æ‚ä¸€äº›ï¼Œå› ä¸ºæ¯ä¸ªtsåŒ…å«çš„æ’­æ”¾æ—¶é—´æ˜¯ä¸ä¸€æ ·çš„ã€‚</p><h2 id="æƒ…å†µåˆ†æ"><a href="#æƒ…å†µåˆ†æ" class="headerlink" title="æƒ…å†µåˆ†æ"></a>æƒ…å†µåˆ†æ</h2><p>è‹¥å¸¦å®½å°äºCDNé€Ÿåº¦ï¼Œå³v2æ€»æ˜¯å°äºv1ï¼Œè¿™æ ·æ— è®ºæ€ä¹ˆä¼˜åŒ–éƒ½ä¼šå¡é¡¿ã€‚</p><p>è‹¥å¸¦å®½å¤§äºCDNé€Ÿåº¦ï¼Œè‹¥v2å¤§äºv1åˆ™å¯ä»¥æ­£å¸¸æ’­æ”¾ï¼›è‹¥å•çº¿ç¨‹ä¸èƒ½æ»¡è¶³v2å¤§äºv1ï¼Œå¤šçº¿ç¨‹æ—¶v2å¤§äºv1ï¼Œä¹Ÿå¯ä»¥æ­£å¸¸æ’­æ”¾ã€‚</p><h2 id="ç¼“å­˜ç­–ç•¥"><a href="#ç¼“å­˜ç­–ç•¥" class="headerlink" title="ç¼“å­˜ç­–ç•¥"></a>ç¼“å­˜ç­–ç•¥</h2><p>å¯¹äºä¸‹è½½æ—¶é—´å°äºtsæ–‡ä»¶æ—¶é•¿çš„ï¼Œåˆ™ä¸²è¡Œä¸‹è½½ï¼Œä¸éœ€è¦å¹¶å‘ã€‚</p><p>ä»¥ä¸‹æ˜¯é’ˆå¯¹CDNé€Ÿåº¦å°äºç½‘ç»œå¸¦å®½çš„ï¼š</p><h3 id="1-åˆå§‹ä¸‹è½½è®¾ç½®"><a href="#1-åˆå§‹ä¸‹è½½è®¾ç½®" class="headerlink" title="1. åˆå§‹ä¸‹è½½è®¾ç½®"></a>1. <strong>åˆå§‹ä¸‹è½½è®¾ç½®</strong></h3><ul><li><strong>åˆå§‹å¹¶å‘æ•°</strong>ï¼šä»1ä¸ªæ–‡ä»¶å¼€å§‹ä¸‹è½½ã€‚</li><li><strong>ç›‘æ§ä¸‹è½½é€Ÿåº¦</strong>ï¼šç›‘æ§ä¸‹è½½é€Ÿåº¦å’Œè®°å½•æœ€å¤§ä¸‹è½½é€Ÿåº¦ã€‚</li></ul><h3 id="2-é€æ­¥å¢åŠ å¹¶å‘"><a href="#2-é€æ­¥å¢åŠ å¹¶å‘" class="headerlink" title="2. é€æ­¥å¢åŠ å¹¶å‘"></a>2. é€æ­¥å¢åŠ å¹¶å‘</h3><ul><li><strong>é€æ­¥å¢åŠ </strong>ï¼šä¸‹è½½æˆåŠŸåï¼Œå¢åŠ ä¸€ä¸ªå¹¶å‘ä¸‹è½½ä»»åŠ¡ã€‚</li><li><strong>ç›‘æ§å˜åŒ–</strong>ï¼šæ¯æ¬¡å¢åŠ å¹¶å‘åï¼Œè§‚å¯Ÿå•ä¸ªæ–‡ä»¶çš„ä¸‹è½½é€Ÿåº¦å˜åŒ–ã€‚</li></ul><h3 id="3-æ£€æµ‹ç“¶é¢ˆ"><a href="#3-æ£€æµ‹ç“¶é¢ˆ" class="headerlink" title="3. æ£€æµ‹ç“¶é¢ˆ"></a>3. <strong>æ£€æµ‹ç“¶é¢ˆ</strong></h3><ul><li><strong>è§‚å¯Ÿé™é€Ÿ</strong>ï¼šå½“ä¸‹è½½é€Ÿåº¦è¾¾åˆ°æŸä¸ªç¨³å®šå€¼ï¼ˆå’Œæœ€å¤§ä¸‹è½½é€Ÿåº¦ç›¸æ¯”ä¸è¶…è¿‡ç™¾åˆ†ä¹‹åï¼‰ï¼Œæˆ–è€…å•ä¸ªæ–‡ä»¶ä¸‹è½½é€Ÿåº¦æ˜¾è‘—ä¸‹é™æ—¶ï¼Œè¯´æ˜å¯èƒ½è§¦æ‘¸åˆ°äº†å¸¦å®½ä¸Šé™æˆ–æœåŠ¡å™¨é™é€Ÿã€‚</li><li><strong>å›é€€ä¼˜åŒ–</strong>ï¼šå¦‚æœå‘ç°å¹¶å‘æ•°å¢åŠ åè€Œå¯¼è‡´ä¸‹è½½é€Ÿåº¦ä¸‹é™ï¼Œè¦å‡å°‘å¹¶å‘æ•°ï¼Œæ‰¾åˆ°ä¸€ä¸ªæœ€ä½³çš„ä¸‹è½½é‡ã€‚</li></ul>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p class=&quot;note note-success&quot;&gt;2024å¹´8æœˆçš„ç¬”è®°&lt;/p&gt;

&lt;p&gt;æ’­æ”¾å™¨ä½œä¸ºæ¶ˆè´¹è€…ï¼Œç¼“å­˜ä½œä¸ºç”Ÿäº§è€…ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¿›å…¥ç¼“å†²ä¸€æ¬¡&quot;&gt;&lt;a href=&quot;#è¿›å…¥ç¼“å†²ä¸€æ¬¡&quot; class=&quot;headerlink&quot;</summary>
        
      
    
    
    
    <category term="éŸ³è§†é¢‘" scheme="https://iwesley.top/categories/%E9%9F%B3%E8%A7%86%E9%A2%91/"/>
    
    
    <category term="éŸ³è§†é¢‘" scheme="https://iwesley.top/tags/%E9%9F%B3%E8%A7%86%E9%A2%91/"/>
    
  </entry>
  
  <entry>
    <title>å®‰å“å±ä¿è°ƒè¯•</title>
    <link href="https://iwesley.top/article/98c55340/"/>
    <id>https://iwesley.top/article/98c55340/</id>
    <published>2025-03-15T06:37:37.000Z</published>
    <updated>2025-03-16T09:34:10.864Z</updated>
    
    <content type="html"><![CDATA[<p>å…ˆçœ‹ä¸€ä¸‹åœ¨è®¾ç½®ç‚¹å‡»å±ä¿é¢„è§ˆåçš„è°ƒç”¨é“¾ï¼ˆAndroid 14ï¼‰</p><pre><code class=" mermaid">sequenceDiagram    participant User    participant MaterialButton    participant View    participant DreamSettings    participant DreamBackend    User-&gt;&gt;MaterialButton: ç‚¹å‡»æŒ‰é’®ï¼ˆ performClick()ï¼‰    MaterialButton-&gt;&gt;View: performClick()    View-&gt;&gt;DreamSettings: è§¦å‘ onClick() (lambda è¡¨è¾¾å¼)    DreamSettings-&gt;&gt;DreamBackend: è°ƒç”¨ preview()</code></pre><p>DreamControllerçš„æ‰“å°ä¿¡æ¯</p><blockquote><p>Starting dream: name&#x3D;ComponentInfo{com.google.android.apps.tv.dreamx&#x2F;com.google.android.apps.tv.dreamx.service.Backdrop}, <strong>isPreviewMode&#x3D;true</strong>, canDoze&#x3D;false, userId&#x3D;0, reason&#x3D;â€™test dreamâ€™</p></blockquote><p>DreamActivityæ˜¯ä¸€ä¸ªä¸éœ€è¦æ³¨å†Œçš„Activityï¼Œè¿è¡Œåœ¨å„ä¸ªå±ä¿è¿›ç¨‹ã€‚</p><p>å±ä¿åº”ç”¨å®ç°DreamServiceå³å¯ã€‚</p><p>å±ä¿çŠ¶æ€æ—¶ï¼Œåå°èµ·åº”ç”¨ä¼šè¿›å…¥ onStop çŠ¶æ€ï¼ˆè¯¥ä¾‹å­ onStop é‡Œé¢è°ƒç”¨äº† finishï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/wesley666/picgo/img2025/20250315143803024.png" alt="img"></p><h2 id="é€€å‡ºå±ä¿çš„æ–¹æ³•"><a href="#é€€å‡ºå±ä¿çš„æ–¹æ³•" class="headerlink" title="é€€å‡ºå±ä¿çš„æ–¹æ³•"></a>é€€å‡ºå±ä¿çš„æ–¹æ³•</h2><h3 id="1ã€æœ‰è§¦æ‘¸æˆ–è€…æŒ‰é”®è¾“å…¥"><a href="#1ã€æœ‰è§¦æ‘¸æˆ–è€…æŒ‰é”®è¾“å…¥" class="headerlink" title="1ã€æœ‰è§¦æ‘¸æˆ–è€…æŒ‰é”®è¾“å…¥"></a>1ã€æœ‰è§¦æ‘¸æˆ–è€…æŒ‰é”®è¾“å…¥</h3><h3 id="2ã€é…ç½®config-dismissDreamOnActivityStart-ä¸º-true-åˆ™ä¼šåœ¨æ–°-activity-èµ·æ¥åé€€å‡ºå±ä¿"><a href="#2ã€é…ç½®config-dismissDreamOnActivityStart-ä¸º-true-åˆ™ä¼šåœ¨æ–°-activity-èµ·æ¥åé€€å‡ºå±ä¿" class="headerlink" title="2ã€é…ç½®config_dismissDreamOnActivityStart ä¸º true åˆ™ä¼šåœ¨æ–° activity èµ·æ¥åé€€å‡ºå±ä¿"></a>2ã€é…ç½®config_dismissDreamOnActivityStart ä¸º true åˆ™ä¼šåœ¨æ–° activity èµ·æ¥åé€€å‡ºå±ä¿</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"> <span class="hljs-comment">&lt;!-- Whether to dismiss the active dream when an activity is started. Doesn&#x27;t apply to</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">          assistant activities (ACTIVITY_TYPE_ASSISTANT) --&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">bool</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;config_dismissDreamOnActivityStart&quot;</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">bool</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/wesley666/picgo/img2025/20250315143803153.png" alt="img"></p><p><img src="https://cdn.jsdelivr.net/gh/wesley666/picgo/img2025/20250315143803189.png" alt="img"></p><h3 id="3ã€è·¨è¿›ç¨‹è°ƒç”¨DreamManagerService-çš„awakenï¼ˆéœ€è¦ç³»ç»Ÿç­¾åï¼‰"><a href="#3ã€è·¨è¿›ç¨‹è°ƒç”¨DreamManagerService-çš„awakenï¼ˆéœ€è¦ç³»ç»Ÿç­¾åï¼‰" class="headerlink" title="3ã€è·¨è¿›ç¨‹è°ƒç”¨DreamManagerService çš„awakenï¼ˆéœ€è¦ç³»ç»Ÿç­¾åï¼‰"></a>3ã€è·¨è¿›ç¨‹è°ƒç”¨DreamManagerService çš„awakenï¼ˆéœ€è¦ç³»ç»Ÿç­¾åï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> android.os.IBinder<br><span class="hljs-keyword">import</span> androidx.annotation.RequiresPermission<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DreamManager</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">val</span> <span class="hljs-variable">TAG</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;DreamManager&quot;</span><br>    <span class="hljs-comment">//private var mDreamManager: Any? = context.getSystemService(&quot;dream&quot;)</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> mDreamManager: Any? = <span class="hljs-literal">null</span><br><br>    init &#123;<br>        mDreamManager = <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">val</span> <span class="hljs-variable">dream</span> <span class="hljs-operator">=</span> Reflector.on(<span class="hljs-string">&quot;android.os.ServiceManager&quot;</span>).method(<span class="hljs-string">&quot;getService&quot;</span>, String::class.java).call&lt;Any&gt;(<span class="hljs-string">&quot;dreams&quot;</span>)<br>            Reflector.on(<span class="hljs-string">&quot;android.service.dreams.IDreamManager\$Stub&quot;</span>).method(<span class="hljs-string">&quot;asInterface&quot;</span>, IBinder::class.java).call&lt;Any&gt;(dream)<br>        &#125; <span class="hljs-keyword">catch</span> (e: Exception) &#123;<br>            <span class="hljs-literal">null</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@RequiresPermission(&quot;android.permission.READ_DREAM_STATE&quot;)</span><br>    fun <span class="hljs-title function_">isDreaming</span><span class="hljs-params">()</span>: Boolean &#123;<br>        <span class="hljs-keyword">if</span> (mDreamManager == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> &#123;<br>            Reflector.with(mDreamManager!!).method(<span class="hljs-string">&quot;isDreaming&quot;</span>).call()<br>        &#125; <span class="hljs-keyword">catch</span> (e: Exception) &#123;<br>            <span class="hljs-literal">false</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@RequiresPermission(&quot;android.permission.WRITE_DREAM_STATE&quot;)</span><br>    fun <span class="hljs-title function_">stopDream</span><span class="hljs-params">()</span> &#123;<br>        mDreamManager?.let &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                Reflector.with(it).method(<span class="hljs-string">&quot;awaken&quot;</span>).call&lt;Unit&gt;()<br>            &#125; <span class="hljs-keyword">catch</span> (e: Exception) &#123;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å±ä¿è°ƒè¯•å‘½ä»¤ï¼šcmd-dreams"><a href="#å±ä¿è°ƒè¯•å‘½ä»¤ï¼šcmd-dreams" class="headerlink" title="å±ä¿è°ƒè¯•å‘½ä»¤ï¼šcmd dreams"></a>å±ä¿è°ƒè¯•å‘½ä»¤ï¼šcmd dreams</h2><blockquote><p>roc_rk3588s_pc:&#x2F; # cmd dreams -h</p><p>Dream manager (dreams) commands:</p><p>  help</p><p>â€‹      Print this help text.</p><p>  start-dreaming</p><p>â€‹      Start the currently configured dream.</p><p>  stop-dreaming</p><p>â€‹      Stops any active dream</p></blockquote><p>cmd dreams start-dreaming</p><p>cmd dreams stop-dreaming</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;å…ˆçœ‹ä¸€ä¸‹åœ¨è®¾ç½®ç‚¹å‡»å±ä¿é¢„è§ˆåçš„è°ƒç”¨é“¾ï¼ˆAndroid 14ï¼‰&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot; mermaid&quot;&gt;sequenceDiagram
    participant User
    participant MaterialButton
   </summary>
        
      
    
    
    
    <category term="AndroidFrameworkFeature" scheme="https://iwesley.top/categories/AndroidFrameworkFeature/"/>
    
    
    <category term="DreamManagerService" scheme="https://iwesley.top/tags/DreamManagerService/"/>
    
    <category term="Framework" scheme="https://iwesley.top/tags/Framework/"/>
    
    <category term="å±ä¿" scheme="https://iwesley.top/tags/%E5%B1%8F%E4%BF%9D/"/>
    
  </entry>
  
  <entry>
    <title>å®‰å“å†…å­˜æ³„éœ²ä¹‹DMA-BUFå¼‚å¸¸å¢é•¿:Android Studioé•œåƒå¼•èµ·DMAå†…å­˜æ³„éœ²</title>
    <link href="https://iwesley.top/article/f148a913/"/>
    <id>https://iwesley.top/article/f148a913/</id>
    <published>2025-03-04T13:10:58.000Z</published>
    <updated>2025-03-04T13:40:23.876Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©ç”¨ç€å®‰å“ 14 çš„æ¿å­çš„æ—¶å€™çªç„¶ç³»ç»Ÿå¡æ­»ã€‚</p><p>æŸ¥çœ‹æ—¥å¿—å‘ç°launcheréƒ½è¢«å¹²æ‰äº†</p><blockquote><p>03-04 06:13:35.544 7872 8479 I ActivityManager: vis BFGS 18740: com.android.launcher3 (pid 8407) service</p><p>03-04 06:13:35.544 7872 8479 I ActivityManager: com.android.launcher3&#x2F;com.android.quickstep.TouchInteractionService&lt;&#x3D;Proc{8077:com.android.systemui&#x2F;u0a70}</p><p>03-04 06:13:36.155 277 277 I lowmemorykiller: Kill â€˜com.android.launcher3â€™ (8407), uid 10071, oom_score_adj 100 to free 39504kB rss, 46224kB swap; reason: device is low on swap (91200kB &lt; 199552kB) and thrashing (200%)</p></blockquote><p>çœ‹<code>dumpsys meminfo</code>å‘ç°DMA-BUFå äº†3Gå¤šï¼ˆ4Gè®¾å¤‡ï¼‰ï¼Œåº”ç”¨free ramåŸºæœ¬æ²¡äº†ã€‚</p><p>åˆšå¼€å§‹ä»¥ä¸ºæ˜¯scrcpyçš„é—®é¢˜ã€‚åæ¥ç»è°ƒæŸ¥å‘ç°æ˜¯android studioçš„å±å¹•é•œåƒé—®é¢˜ã€‚</p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>å¼€æœºä¸€æ®µæ—¶é—´å</p><blockquote><p>Total RAM: 3,991,080K (status normal)</p><p>Free RAM: 1,166,810K (  124,454K cached pss +   623,088K cached kernel +   419,268K free)</p><p><strong>DMA-BUF: 1,477,628K (      876K mapped + 1,476,752K unmapped)</strong></p><p>DMA-BUF Heaps: 1,477,628K</p><p>DMA-BUF Heaps pool:   249,088K</p><p>â€‹      GPU:   202,320K</p><p> Used RAM: 2,763,593K (1,036,373K used pss + 1,727,220K kernel)</p><p> Lost RAM:   195,490K</p><p>â€‹     ZRAM:    72,700K physical used for   215,296K in swap (1,995,536K total swap)</p><p>   Tuning: 192 (large 512), oom   322,560K, restore limit   107,520K (high-end-gfx)</p></blockquote><p><code>cat /sys/kernel/dmabuf/buffers/*/size</code>ï¼Œå‘ç°æœ‰å¥½å¤š483328å­—èŠ‚çš„ inode</p><p><code>cat /sys/kernel/dmabuf/buffers/*/size  | grep 483328 | wc -l</code></p><p>æœ‰2957ä¸ªï¼Œè®¡ç®—ï¼š2957*483328&#x3D;1429200896&#x3D;1.4Gï¼Œå’Œä¸Šé¢çš„ç»“æœå·®ä¸å¤šã€‚</p><p>éšä¾¿æŸ¥çœ‹ä¸€ä¸ªinode</p><blockquote><p>roc_rk3588s_pc:&#x2F; # lsof | grep -w 7248</p><p><a href="mailto:&#x63;&#x32;&#x40;&#x31;&#46;&#x31;&#45;&#x73;&#101;&#114;&#118;&#x69;&#x63;&#x65;">&#x63;&#x32;&#x40;&#x31;&#46;&#x31;&#45;&#x73;&#101;&#114;&#118;&#x69;&#x63;&#x65;</a>   543 mediacodec 2553u     0000                0,8       0t0       7248 &#x2F;dmabuf:system</p><p>main       4146       root 5088u     0000                0,8       0t0       7248 &#x2F;dmabuf:system</p><p>main       4146       root 5089u     0000                0,8       0t0       7248 &#x2F;dmabuf:system</p></blockquote><p><code>lsof | grep &quot;4146&quot; | grep dmabuf  | wc -l</code></p><p>æœ‰2958æ¡è¿™æ ·çš„æ¡ç›®</p><p><code>main       4146       root 5973u     0000                0,8       0t0       7690 /dmabuf:system</code></p><p>å’Œä¸Šé¢çš„æ•°ç›®ä¸€ä¸€å¯¹åº”</p><p>æŸ¥çœ‹æ˜¯å“ªä¸€ä¸ªç¨‹åº</p><blockquote><p>roc_rk3588s_pc:&#x2F; # cat &#x2F;proc&#x2F;543&#x2F;cmdline</p><p>&#x2F;vendor&#x2F;bin&#x2F;hw&#x2F;<a href="mailto:&#97;&#x6e;&#100;&#114;&#111;&#x69;&#100;&#46;&#x68;&#97;&#x72;&#100;&#119;&#97;&#x72;&#101;&#x2e;&#x6d;&#x65;&#x64;&#105;&#x61;&#x2e;&#x63;&#50;&#x40;&#x31;&#x2e;&#x31;&#x2d;&#115;&#101;&#x72;&#118;&#105;&#99;&#x65;">&#97;&#x6e;&#100;&#114;&#111;&#x69;&#100;&#46;&#x68;&#97;&#x72;&#100;&#119;&#97;&#x72;&#101;&#x2e;&#x6d;&#x65;&#x64;&#105;&#x61;&#x2e;&#x63;&#50;&#x40;&#x31;&#x2e;&#x31;&#x2d;&#115;&#101;&#x72;&#118;&#105;&#99;&#x65;</a></p><p>roc_rk3588s_pc:&#x2F; # cat &#x2F;proc&#x2F;4146&#x2F;cmdline</p><p>app_process&#x2F;data&#x2F;local&#x2F;tmp&#x2F;.studiocom.android.tools.screensharing.Mainâ€“socket&#x3D;screen-sharing-agent-8055â€“flags&#x3D;16</p></blockquote><p>å‘ç°æ˜¯android studioé•œåƒå¯¼è‡´çš„ï¼šåº”è¯¥æ˜¯å› ä¸ºä¸€ç›´é»‘å±å¯¼è‡´åå¤ç”³è¯·å†…å­˜å¯¼è‡´DMA-BUFæ³„éœ²ã€‚</p><p>å…³é—­Android Studioçš„Device MirroringåŠŸèƒ½åï¼Œåé¢ä½¿ç”¨è®¾å¤‡å°±æ­£å¸¸äº†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/wesley666/picgo/img2025/20250304211421729.png" alt="img"></p><h2 id="dmabuf-dump"><a href="#dmabuf-dump" class="headerlink" title="dmabuf_dump"></a>dmabuf_dump</h2><p>é€šè¿‡dmabuf_dumpå‘½ä»¤å¯ä»¥æ›´å¿«åœ°æŸ¥çœ‹å¼‚å¸¸ç¨‹åº</p><blockquote><p>roc_rk3588s_pc:&#x2F; # dmabuf_dump -h</p><p>Usage: dmabuf_dump [-abh] [per-process&#x2F;per-buffer stats]</p><p>-a       show all dma buffers (ion) in big table, [buffer x process] grid</p><p>-b       show DMA-BUF per-buffer, per-exporter and per-device statistics</p><p>-h       show this help</p><p>â€‹         If PID is supplied, the dmabuf information for that process is shown.</p><p>â€‹         Per-buffer DMA-BUF stats do not take an argument.</p></blockquote><p>é€šè¿‡<code>dmabuf_dump</code>å°±å¯ä»¥æŸ¥çœ‹å„ä¸ªç¨‹åºDMA-BUFçš„å ç”¨æƒ…å†µï¼ˆåŒ…å«ç¨‹åºåå­—ã€pidã€inodeç­‰ç­‰ï¼‰æˆ–è€…åŠ å…¶ä»–å‚æ•°è¾“å‡ºä¸åŒç»“æœã€‚</p><blockquote><p>roc_rk3588s_pc:&#x2F; # dmabuf_dump 4146</p><p>â€‹            main:4146</p><p>â€‹                  Name              Rss              Pss         nr_procs            Inode</p><p>â€‹                system           472 kB           472 kB                1             4735</p><p>â€‹                system           472 kB           472 kB                1             4736</p><p>â€‹                system           472 kB           472 kB                1             4737</p><p>â€‹               </p><p>â€‹               â€”â€”â€”â€”â€”â€”ï¼ˆçœç•¥å‡ åƒè¡Œï¼‰â€”â€”â€”â€”â€”-</p><p>â€‹          </p><p>â€‹                system           472 kB           472 kB                1             7688</p><p>â€‹                system           472 kB           472 kB                1             7689</p><p>â€‹                system           472 kB           472 kB                1             7690</p><p>â€‹         PROCESS TOTAL       1395232 kB       1395232 kB</p><p>-â€”â€”â€”â€”â€”â€”â€”</p><p>dmabuf total: 1477628 kB kernel_rss: 82396 kB userspace_rss: 1395232 kB userspace_pss: 1395232 kB</p></blockquote><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://source.android.com/docs/core/graphics/implement-dma-buf-gpu-mem">Implement DMABUF and GPU memory accounting in Android 12  |  Android Open Source Project</a></p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;ä»Šå¤©ç”¨ç€å®‰å“ 14 çš„æ¿å­çš„æ—¶å€™çªç„¶ç³»ç»Ÿå¡æ­»ã€‚&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹æ—¥å¿—å‘ç°launcheréƒ½è¢«å¹²æ‰äº†&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;03-04 06:13:35.544 7872 8479 I ActivityManager: vis BFGS 18740:</summary>
        
      
    
    
    
    <category term="Androidæ€§èƒ½ä¼˜åŒ–" scheme="https://iwesley.top/categories/Android%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
    
    <category term="å†…å­˜" scheme="https://iwesley.top/tags/%E5%86%85%E5%AD%98/"/>
    
    <category term="æ€§èƒ½ä¼˜åŒ–" scheme="https://iwesley.top/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>å®‰å“ç»„ä»¶åŒ–ä¹‹åŠ¨æ€ä¾èµ–åŠŸèƒ½æ¨¡å—</title>
    <link href="https://iwesley.top/article/67ca89d4/"/>
    <id>https://iwesley.top/article/67ca89d4/</id>
    <published>2025-03-03T10:34:03.000Z</published>
    <updated>2025-03-03T12:42:15.461Z</updated>
    
    <content type="html"><![CDATA[<p>å¯¹äºæ‹¥æœ‰ä¸åŒæ¸ é“çš„ APP æ¥è¯´ï¼Œå¯èƒ½éœ€è¦é›†æˆä¸åŒçš„åŠŸèƒ½æ¨¡å—ï¼Œä¹Ÿå¯èƒ½åŒä¸€ä¸ªåŠŸèƒ½æœ‰ä¸åŒå®ç°ã€‚æœ€ç®€å•çš„æ–¹æ³•å¯èƒ½æ˜¯é€šè¿‡æ¥å£ã€å·¥å‚æ¨¡å¼ã€ flavorImplement å’Œæ¸ é“è‡ªå®šä¹‰ä»£ç çš„æ–¹æ³•æ¥å®ç°äº†ã€‚ä½†æ˜¯ï¼Œå¦‚æœä¸æƒ³å»ºé‚£ä¹ˆå¤šæ¸ é“ä»£ç ç›®å½•ï¼Œéœ€è¦é€šè¿‡ä¸€å¥—ä»£ç æ¥åˆå§‹åŒ–æ¨¡å—ï¼Œé‚£ä¹ˆä¸Šè¿°æ–¹æ³•å°±ä¸è¡Œäº†ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•åœ¨ä¸ä¾èµ–æ¨¡å—çš„å‰æä¸‹åŠ¨æ€è°ƒç”¨å…¶åŠŸèƒ½å‘¢ï¼Ÿ</p><p>æœ‰å‡ ç§æ–¹æ³•ï¼š</p><p>1ã€åå°„ã€æ¥å£éš”ç¦»å’Œå·¥å‚æ¨¡å¼</p><p>2ã€åŠ¨æ€åŠŸèƒ½æ¨¡å—ï¼ˆDynamic Feature Moduleï¼‰ï¼Œå›½å†…ä¸é€‚ç”¨ã€‚</p><p>3ã€åˆ©ç”¨ Java çš„ <code>ServiceLoader</code> æœºåˆ¶ï¼Œé€šè¿‡é…ç½®æ–‡ä»¶å£°æ˜æ¥å£å®ç°ç±»ã€‚</p><p>ç»¼åˆè€ƒè™‘åå†³å®šé‡‡ç”¨åå°„ã€æ¥å£éš”ç¦»å’Œå·¥å‚æ¨¡å¼ã€‚</p><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>ç¯å¢ƒï¼šagp 8.7.0ï¼Œgradeï¼š8.10.2</p><h3 id="gradleï¼šå®ç°æ¨¡å—åŠ¨æ€åŠ è½½"><a href="#gradleï¼šå®ç°æ¨¡å—åŠ¨æ€åŠ è½½" class="headerlink" title="gradleï¼šå®ç°æ¨¡å—åŠ¨æ€åŠ è½½"></a>gradleï¼šå®ç°æ¨¡å—åŠ¨æ€åŠ è½½</h3><p>é‡‡ç”¨yamlæ–‡ä»¶è¿›è¡ŒåŠŸèƒ½é…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment">#åŠŸèƒ½å®šä¹‰</span><br><span class="hljs-attr">features:</span><br>  <span class="hljs-attr">featureA:</span><br>    <span class="hljs-comment">#é»˜è®¤é…ç½®</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">false</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">&#x27;:feature:featureA&#x27;</span> <span class="hljs-comment">#æ¨¡å—åå­—</span><br>    <span class="hljs-comment">#ä¸¤ä¸ªåˆ—è¡¨ä¼˜å…ˆçº§æœ€é«˜ï¼Œä½†ä¸èƒ½åŒæ—¶åŒ…å«ä¸€æ ·çš„flavor</span><br>    <span class="hljs-comment">#å¦‚æœenableä¸ºtrueï¼Œåˆ™å»ºè®®ä½¿ç”¨disableFlavorsListã€‚åä¹‹ï¼Œäº¦ç„¶ã€‚</span><br>    <span class="hljs-attr">enableFlavorsList:</span> [<span class="hljs-string">demo</span>, <span class="hljs-string">companyA</span>, <span class="hljs-string">companyB</span>]<br>    <span class="hljs-attr">disableFlavorsList:</span> []<br></code></pre></td></tr></table></figure><p>libs.versions.toml</p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs toml"><span class="hljs-attr">snakeyaml</span> = <span class="hljs-string">&quot;1.33&quot;</span><br><span class="hljs-attr">snakeyaml</span> = &#123; module = <span class="hljs-string">&quot;org.yaml:snakeyaml&quot;</span>, version.ref = <span class="hljs-string">&quot;snakeyaml&quot;</span> &#125;<br></code></pre></td></tr></table></figure><p>æ ¹build.gradle</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">// Top-level build file where you can add configuration options common to all sub-projects/modules.</span><br>buildscript &#123;<br>    <span class="hljs-comment">// è‡ªå®šä¹‰ gradle æ’ä»¶</span><br>    dependencies &#123;<br>        <span class="hljs-comment">//classpath(libs.plugin)</span><br>        classpath libs.snakeyaml <span class="hljs-comment">// æ·»åŠ  YAML è§£æåº“</span><br>    &#125;<br>&#125;<br><br>plugins &#123;<br>    alias(libs.plugins.android.application) apply <span class="hljs-literal">false</span><br>    alias(libs.plugins.kotlin.android) apply <span class="hljs-literal">false</span><br>    alias(libs.plugins.android.library) apply <span class="hljs-literal">false</span><br>&#125;<br></code></pre></td></tr></table></figure><p>app build.gradle ï¼ˆæ ¹æ®é…ç½®åŠ¨æ€ä¾èµ–æ¨¡å—å®ç°ï¼‰</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//Yamlæ”¾åœ¨å…¶ä»–xxx.gradle importä¼šæŠ¥æ‰¾ä¸åˆ°</span><br><span class="hljs-keyword">import</span> org.yaml.snakeyaml.Yaml<br>ext &#123;<br>    loadYamlConfig = &#123; String fileName -&gt;<br>        <span class="hljs-keyword">def</span> configFile = file(fileName)<br>        <span class="hljs-keyword">if</span> (!configFile.exists()) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> GradleException(<span class="hljs-string">&quot;YAML config file not found: $&#123;configFile.absolutePath&#125;&quot;</span>)<br>        &#125;<br>        <span class="hljs-keyword">def</span> yaml = <span class="hljs-keyword">new</span> Yaml()<br>        <span class="hljs-keyword">def</span> config<br>        <span class="hljs-keyword">try</span> &#123;<br>            configFile.withReader &#123; reader -&gt;<br>                config = yaml.load(reader)<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> GradleException(<span class="hljs-string">&quot;Failed to parse YAML file: $&#123;configFile.name&#125;&quot;</span>, e)<br>        &#125;<br>        <span class="hljs-keyword">return</span> config.asImmutable()<br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">def</span> printlnRed(String msg) &#123;<br>    <span class="hljs-keyword">def</span> ANSI_RESET = <span class="hljs-string">&quot;\u001B[0m&quot;</span><br>    <span class="hljs-keyword">def</span> ANSI_RED = <span class="hljs-string">&quot;\u001B[31m&quot;</span><br>    println(<span class="hljs-string">&quot;$&#123;ANSI_RED&#125;$&#123;msg&#125;$&#123;ANSI_RESET&#125;&quot;</span>)<br>&#125;<br><br><span class="hljs-keyword">def</span> featureConfig = loadYamlConfig(<span class="hljs-string">&quot;feature_config.yaml&quot;</span>)<br>println(<span class="hljs-string">&quot;featureConfig: $&#123;featureConfig&#125;&quot;</span>)<br>afterEvaluate &#123;<br>    android.applicationVariants.configureEach &#123; variant -&gt;<br>        <span class="hljs-keyword">def</span> flavorCompanyName = variant.productFlavors.find &#123; it.dimension == <span class="hljs-string">&quot;COMPANY&quot;</span> &#125;?.name<br>        if (!flavorCompanyName) &#123;<br>            throw new GradleException(<span class="hljs-string">&quot;Variant $&#123;variant.name&#125; has no COMPANY flavor!&quot;</span>)<br>        &#125;<br>        println(<span class="hljs-string">&quot;variant.name:$&#123;variant.name&#125; variant.flavorName:$&#123;variant.flavorName&#125;&quot;</span>)<br>        featureConfig.features.each &#123; featureKey, defaultConfig  -&gt;<br>            def featureName = defaultConfig.name<br>            boolean isEnabled = defaultConfig.enable<br>            def enableFlavorsList = defaultConfig.enableFlavorsList<br>            def disableFlavorsList = defaultConfig.disableFlavorsList<br>            boolean hasFound = false<br>            for (flavor in enableFlavorsList) &#123;<br>                if (flavor == flavorCompanyName) &#123;<br>                    isEnabled = true<br>                    println(<span class="hljs-string">&quot;enable in enableFlavorsList&quot;</span>)<br>                    hasFound = true<br>                    break<br>                &#125;<br>            &#125;<br>            for (flavor in disableFlavorsList) &#123;<br>                if (flavor == flavorCompanyName) &#123;<br>                    if (hasFound) &#123;<br>                        throw new GradleException(<span class="hljs-string">&quot;Feature $featureKey in flavor $flavorCompanyName must not be in both enableFlavorsList and disableFlavorsList!&quot;</span>)<br>                    &#125;<br>                    isEnabled = false<br>                    printlnRed(<span class="hljs-string">&quot;disable in disableFlavorsList&quot;</span>)<br>                    break<br>                &#125;<br>            &#125;<br>            if (isEnabled) &#123;<br>                println(<span class="hljs-string">&quot;$&#123;flavorCompanyName&#125;Implementation $&#123;featureName&#125;&quot;</span>)<br>                <span class="hljs-comment">//åŠ¨æ€ä¾èµ–æ¨¡å—</span><br>                dependencies.add(<span class="hljs-string">&quot;$&#123;flavorCompanyName&#125;Implementation&quot;</span>, project(featureName))<br>            &#125; else &#123;<br>                printlnRed(<span class="hljs-string">&quot;$&#123;variant.name&#125; $&#123;flavorCompanyName&#125; Not Implementation $&#123;featureName&#125;&quot;</span>)<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ¨¡å—å®ç°"><a href="#æ¨¡å—å®ç°" class="headerlink" title="æ¨¡å—å®ç°"></a>æ¨¡å—å®ç°</h3><h4 id="å…¬å…±æ¨¡å—"><a href="#å…¬å…±æ¨¡å—" class="headerlink" title="å…¬å…±æ¨¡å—"></a>å…¬å…±æ¨¡å—</h4><p>å®šä¹‰æ¥å£</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IFeature</span> &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">doSomething</span><span class="hljs-params">()</span></span><br>&#125;<br></code></pre></td></tr></table></figure><p>å®šä¹‰ä¸€ä¸ª Helper</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">object</span> FeatureHelper : IFeature &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> mFeature: IFeature? = <span class="hljs-literal">null</span><br>    <br>    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setFeatureImpl</span><span class="hljs-params">(feature: <span class="hljs-type">IFeature</span>?)</span></span> &#123;<br>        mFeature = feature<br>    &#125;<br>    <br>    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">doSomething</span><span class="hljs-params">()</span></span> &#123;<br>        mFeature?.doSomething()<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="åŠŸèƒ½æ¨¡å—"><a href="#åŠŸèƒ½æ¨¡å—" class="headerlink" title="åŠŸèƒ½æ¨¡å—"></a>åŠŸèƒ½æ¨¡å—</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Module</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">       é‡‡ç”¨javaç±» æ–¹ä¾¿ä½¿ç”¨ java çš„æ–¹å¼è¿›è¡Œåå°„</span><br><span class="hljs-comment">     * æ³¨æ„ï¼šåŒ…åå’Œç±»åã€æ–¹æ³•åå’Œå‚æ•°ä¸èƒ½éšæ„ä¿®æ”¹ï¼Œå¦åˆ™åå°„ä¼šæ‰¾ä¸åˆ°</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> context Context</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> IFeature</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> IFeature <span class="hljs-title function_">load</span><span class="hljs-params">(Context context)</span> &#123;<br>        <span class="hljs-comment">//FeatureManagerå®ç°IFeatureæ¥å£</span><br>        <span class="hljs-type">FeatureManager</span> <span class="hljs-variable">manager</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FeatureManager</span>(context);<br>        manager.init();<br>        <span class="hljs-keyword">return</span> manager;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="app-æ¨¡å—"><a href="#app-æ¨¡å—" class="headerlink" title="app æ¨¡å—"></a>app æ¨¡å—</h4><p><a href="https://iwesley.top/article/ba67228f/">Javaåå°„çš„ä¼˜é›…ä½¿ç”¨ - Wesleyâ€™s Blog</a></p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadFeatureModule</span><span class="hljs-params">(application: <span class="hljs-type">Application</span>)</span></span>: IFeature? &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> &#123;<br>        Reflector.on(<span class="hljs-string">&quot;com.wesley.feature.Module&quot;</span>)<br>            .method(<span class="hljs-string">&quot;load&quot;</span>, Context::<span class="hljs-keyword">class</span>.java).call&lt;IFeature&gt;(application)<br>    &#125; <span class="hljs-keyword">catch</span> (e: Exception) &#123;<br>        <span class="hljs-literal">null</span> <span class="hljs-comment">// æ¨¡å—æœªå¯ç”¨æˆ–æœªå®ç°</span><br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initModules</span><span class="hljs-params">(application: <span class="hljs-type">Application</span>)</span></span> &#123;<br>  FeatureHelper.setFeatureImpl(loadFeatureModule(application))<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://zhuanlan.zhihu.com/p/97498337">Android æ¨¡å—è§£è€¦å’Œçš„å®è·µ</a></p><p><a href="https://blog.csdn.net/fesdgasdgasdg/article/details/106888077">Android ä¸­ä½¿ç”¨ ServiceLoaderã€AutoService æ‘”å‘è®°å½•</a></p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;å¯¹äºæ‹¥æœ‰ä¸åŒæ¸ é“çš„ APP æ¥è¯´ï¼Œå¯èƒ½éœ€è¦é›†æˆä¸åŒçš„åŠŸèƒ½æ¨¡å—ï¼Œä¹Ÿå¯èƒ½åŒä¸€ä¸ªåŠŸèƒ½æœ‰ä¸åŒå®ç°ã€‚æœ€ç®€å•çš„æ–¹æ³•å¯èƒ½æ˜¯é€šè¿‡æ¥å£ã€å·¥å‚æ¨¡å¼ã€ flavorImplement</summary>
        
      
    
    
    
    <category term="AndroidAPPæ¶æ„" scheme="https://iwesley.top/categories/AndroidAPP%E6%9E%B6%E6%9E%84/"/>
    
    
    <category term="Android" scheme="https://iwesley.top/tags/Android/"/>
    
    <category term="gradle" scheme="https://iwesley.top/tags/gradle/"/>
    
    <category term="ç»„ä»¶åŒ–" scheme="https://iwesley.top/tags/%E7%BB%84%E4%BB%B6%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>DLNAåº“Platinumæ–°å¢å®‰å“64ä½soç¼–è¯‘æ–¹æ³•</title>
    <link href="https://iwesley.top/article/4339b418/"/>
    <id>https://iwesley.top/article/4339b418/</id>
    <published>2025-01-18T04:52:15.000Z</published>
    <updated>2025-01-18T11:12:45.426Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸‹è½½ä»£ç ï¼ˆè¯¥ä»“åº“æˆ‘å·²ç»ä¿®æ”¹ç›¸å…³ç¼–è¯‘é”™è¯¯å’Œæ”¯æŒå®‰å“ 64 ä½ so ç¼–è¯‘ï¼‰</p><p><code>git clone https://github.com/wesley666/Platinum -b master</code></p><p>ä¸‹è½½Neptune</p><p><code>git submodule update --init</code></p><p>ä¸‹è½½ ndk15ï¼š</p><p><a href="https://dl.google.com/android/repository/android-ndk-r15c-linux-x86_64.zip">https://dl.google.com/android/repository/android-ndk-r15c-linux-x86_64.zip</a></p><p>å»ºè®®å®‰è£… conda ç¯å¢ƒæ¥è¿›è¡Œç¼–è¯‘</p><p><a href="https://www.anaconda.com/download/success">https://www.anaconda.com/download/success</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">conda create -n dlna  python=2.7<br><br>pip install scons<br><br>conda activate dlna<br></code></pre></td></tr></table></figure><p>ç¼–è¯‘</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">ä»¥ä½ çš„è·¯å¾„ä¸ºå‡†ï¼Œå¦‚æœå‡ºç°è·¯å¾„é”™è¯¯ï¼Œå¯ä»¥æ”¹æˆç»å¯¹è·¯å¾„</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-built_in">export</span> ANDROID_NDK_ROOT=/home/wesley/ndk/android-ndk-r15c/</span> <br>export ANDROID_NDK_ROOT=~/ndk/android-ndk-r15c/ <br>scons -c target=arm-android-linux build_config=Release<br>scons target=arm-android-linux build_config=Release<br>scons -c target=arm64-android-linux build_config=Release<br>scons target=arm64-android-linux build_config=Release<br>cd Source/Platform/Android/module/platinum<br>~/ndk/android-ndk-r15c/ndk-build clean<br>~/ndk/android-ndk-r15c/ndk-build NDK_DEBUG=0<br></code></pre></td></tr></table></figure><blockquote><p>(dlna) wesley@Wesley:~&#x2F;Project&#x2F;Platinum&#x2F;Source&#x2F;Platform&#x2F;Android&#x2F;module&#x2F;platinum$ ~&#x2F;ndk&#x2F;android-ndk-r15c&#x2F;ndk-build<br>Android NDK: Found platform level in .&#x2F;project.properties. Setting APP_PLATFORM to android-14.<br>jni&#x2F;Android.mk:5: â€œTARGET_ARCH_ABI:armeabiâ€<br>jni&#x2F;Android.mk:5: â€œTARGET_ARCH_ABI:armeabi-v7aâ€<br>jni&#x2F;Android.mk:5: â€œTARGET_ARCH_ABI:arm64-v8aâ€<br>jni&#x2F;Android.mk:15: â€œbuild arm64â€<br>[armeabi] Compile++ thumb: platinum-jni &lt;&#x3D; platinum-jni.cpp<br>[armeabi] StaticLibrary  : libstdc++.a<br>[armeabi] SharedLibrary  : libplatinum-jni.so<br>[armeabi] Install        : libplatinum-jni.so &#x3D;&gt; libs&#x2F;armeabi&#x2F;libplatinum-jni.so<br>[armeabi-v7a] Compile++ thumb: platinum-jni &lt;&#x3D; platinum-jni.cpp<br>[armeabi-v7a] StaticLibrary  : libstdc++.a<br>[armeabi-v7a] SharedLibrary  : libplatinum-jni.so<br>[armeabi-v7a] Install        : libplatinum-jni.so &#x3D;&gt; libs&#x2F;armeabi-v7a&#x2F;libplatinum-jni.so<br>[arm64-v8a] Compile++      : platinum-jni &lt;&#x3D; platinum-jni.cpp<br>[arm64-v8a] StaticLibrary  : libstdc++.a<br>[arm64-v8a] SharedLibrary  : libplatinum-jni.so<br>[arm64-v8a] Install        : libplatinum-jni.so &#x3D;&gt; libs&#x2F;arm64-v8a&#x2F;libplatinum-jni.so</p></blockquote><p>objå’Œ libsç›®å½•åŒºåˆ«ï¼šä¸€ä¸ªç”¨äºè¿½æº¯å’Œè°ƒè¯•ï¼Œä¸€ä¸ªç”¨äºæ­£å¼ç‰ˆå‘å¸ƒã€‚</p><blockquote><p>(dlna) wesley@Wesley:~&#x2F;Project&#x2F;Platinum&#x2F;Source&#x2F;Platform&#x2F;Android&#x2F;module&#x2F;platinum$ file libs&#x2F;arm64-v8a&#x2F;libplatinum-jni.so<br>libs&#x2F;arm64-v8a&#x2F;libplatinum-jni.so: ELF 64-bit LSB shared object, ARM aarch64, version 1 (SYSV), dynamically linked, BuildID[sha1]&#x3D;a8cdaa3a1288bd98c13556fbd4a1499e31005091, <strong>stripped</strong></p><p>(dlna) wesley@Wesley:~&#x2F;Project&#x2F;Platinum&#x2F;Source&#x2F;Platform&#x2F;Android&#x2F;module&#x2F;platinum$ file obj&#x2F;local&#x2F;arm64-v8a&#x2F;libplatinum-jni.so<br>obj&#x2F;local&#x2F;arm64-v8a&#x2F;libplatinum-jni.so: ELF 64-bit LSB shared object, ARM aarch64, version 1 (SYSV), dynamically linked, BuildID[sha1]&#x3D;a8cdaa3a1288bd98c13556fbd4a1499e31005091, <strong>with debug_info, not stripped</strong></p></blockquote>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;ä¸‹è½½ä»£ç ï¼ˆè¯¥ä»“åº“æˆ‘å·²ç»ä¿®æ”¹ç›¸å…³ç¼–è¯‘é”™è¯¯å’Œæ”¯æŒå®‰å“ 64 ä½ so ç¼–è¯‘ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;code&gt;git clone https://github.com/wesley666/Platinum -b</summary>
        
      
    
    
    
    <category term="æŠ•å±" scheme="https://iwesley.top/categories/%E6%8A%95%E5%B1%8F/"/>
    
    
    <category term="æŠ•å±" scheme="https://iwesley.top/tags/%E6%8A%95%E5%B1%8F/"/>
    
    <category term="DLNA" scheme="https://iwesley.top/tags/DLNA/"/>
    
  </entry>
  
  <entry>
    <title>å®‰å“Activityæ‰§è¡ŒfinishåonNewIntentä¹Ÿæ‰§è¡Œäº†</title>
    <link href="https://iwesley.top/article/88a54bc8/"/>
    <id>https://iwesley.top/article/88a54bc8/</id>
    <published>2025-01-04T09:34:44.000Z</published>
    <updated>2025-01-04T10:36:03.481Z</updated>
    
    <content type="html"><![CDATA[<p>æµ‹è¯•ååº”æŠ•å±æ—¶ä¸‹ä¸€é›†å¯èƒ½æ’­æ”¾ä¸æˆåŠŸã€‚</p><p>é¦–å…ˆçœ‹ä¸€ä¸‹æ—¥å¿—ï¼š</p><blockquote><p>onCompletion<br>onCast<br>handlerMessage: 2<br>finish: PlayerActivity@abc7fdc<br>onPause: PlayerActivity@abc7fdc<br>onNewIntent: PlayerActivity@abc7fdc<br>onResume: PlayerActivity@abc7fdc<br>onPause: PlayerActivity@abc7fdc<br>onResume: HomeActivity@71ec50a<br>onstop: PlayerActivity@abc7fdc<br>onDestroy:PlayerActivity@abc7fdc</p></blockquote><p>çœ‹åˆ°æ—¥å¿—æ—¶å¾ˆè¿·æƒ‘ï¼Œä¸ºä»€ä¹ˆ finish äº†ï¼Œå®‰å“è¿˜ä¼šæ‰§è¡ŒonNewIntentï¼Œä¸åº”è¯¥æ˜¯æ–°å»ºä¸€ä¸ª activity å—ï¼Ÿ</p><p>å…ˆæ¥çœ‹ä¸€ä¸‹åœºæ™¯æè¿°ï¼š</p><p>è§†é¢‘æ’­å®Œåä¼šå‘é€ä¸€ä¸ª finish ä¿¡æ¯ï¼Œå¦‚æœ 3s å†…æ²¡æœ‰ä¸‹ä¸€ä¸ªè§†é¢‘è¿›æ¥å°±ä¼šæ‰§è¡Œ finishï¼Œæœ‰è§†é¢‘è¿›æ¥å°±ä¼šåœ¨ onNewIntent ä¸­ remove æ‰è¿™æ¡ä¿¡æ¯ã€‚</p><p>ç»è¿‡å®éªŒå’Œè¯¦ç»†åˆ†æåï¼Œç»ˆäºæ‰¾åˆ°äº†é—®é¢˜åŸå› ï¼š</p><p>é¦–å…ˆå› ä¸ºè§†é¢‘æ’­æ”¾ç»“æŸå‘äº†ä¸€æ¡finishæ¶ˆæ¯ï¼Œfinishæ¶ˆæ¯æ²¡æœ‰æ‰§è¡Œæ—¶çªç„¶æ¥äº†ä¸‹ä¸€é›†çš„æ¶ˆæ¯ï¼Œè¿™æ—¶å€™æ‰§è¡ŒstartActivtyä¼šæ’å…¥ä¸€æ¡onNewIntentæ¶ˆæ¯ã€‚ç»“æœï¼Œè¿™æ—¶å€™finishå› ä¸ºæ—¶é—´åˆ°äº†ï¼Œè¯¥æ‰§è¡Œäº†ã€‚ç„¶å finish æ‰§è¡Œå®Œåï¼ŒonNewIntent ä¹Ÿè¯¥æ‰§è¡Œäº†ã€‚æ‰§è¡Œå®Œåå› ä¸º finish çš„åŸå› ï¼Œ onDestroyä¹Ÿæ‰§è¡Œäº†ã€‚ç»“æœå°±æ˜¯ä¸‹ä¸€é›†æ²¡æ’­å®Œå°±é€€å‡ºæ¥äº†ã€‚</p><p>è§£å†³åŠæ³•ï¼šåœ¨startActivityå‰removeæ‰finishæ¶ˆæ¯ï¼Œæ¯”onNewIntent çš„æ—¶é—´èŠ‚ç‚¹è¿˜è¦æå‰ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>é¢è¯•å¿…å¤‡ï¼šAndroidï¼ˆ9.0ï¼‰Activityå¯åŠ¨æµç¨‹(ä¸€) : <a href="https://juejin.cn/post/6844903959581163528">https://juejin.cn/post/6844903959581163528</a></p><p>é¢è¯•å¿…å¤‡ï¼šAndroidï¼ˆ9.0ï¼‰Activityå¯åŠ¨æµç¨‹(äºŒ) : <a href="https://juejin.cn/post/6844903959589552142">https://juejin.cn/post/6844903959589552142</a></p><p><a href="https://stackoverflow.com/questions/24639272/onnewintent-called-after-finish-executed">android - onNewIntent called after finish() executed - Stack Overflow</a></p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;æµ‹è¯•ååº”æŠ•å±æ—¶ä¸‹ä¸€é›†å¯èƒ½æ’­æ”¾ä¸æˆåŠŸã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆçœ‹ä¸€ä¸‹æ—¥å¿—ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;onCompletion&lt;br&gt;onCast&lt;br&gt;handlerMessage: 2&lt;br&gt;finish:</summary>
        
      
    
    
    
    <category term="AndroidBugFix" scheme="https://iwesley.top/categories/AndroidBugFix/"/>
    
    
    <category term="Android" scheme="https://iwesley.top/tags/Android/"/>
    
    <category term="AndroidActivity" scheme="https://iwesley.top/tags/AndroidActivity/"/>
    
  </entry>
  
  <entry>
    <title>å®‰å“åº”ç”¨4å­—èŠ‚ä¸å¯¹é½å¯¼è‡´soåŠ è½½å¤±è´¥</title>
    <link href="https://iwesley.top/article/18f59983/"/>
    <id>https://iwesley.top/article/18f59983/</id>
    <published>2025-01-04T03:12:24.000Z</published>
    <updated>2025-01-04T08:32:28.983Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©æŠŠä¸€ä¸ªapkç»™å‚å•†ç­¾ååç›´æ¥pushåˆ°æœºå™¨çš„&#x2F;system&#x2F;app,ç»“æœè¿è¡Œappæ—¶æ˜¾ç¤ºsoæ‰¾ä¸åˆ°ã€‚æŠ¥é”™ï¼š</p><blockquote><p> java stacktrace:<br>java.lang.UnsatisfiedLinkError: Library mmkv not found; tried [&#x2F;system&#x2F;lib&#x2F;libmmkv.so, &#x2F;product&#x2F;lib&#x2F;libmmkv.so]<br>at java.lang.Runtime.loadLibrary0(Runtime.java:1101)<br>at java.lang.System.loadLibrary(System.java:1669)<br>at com.tencent.mmkv.MMKV.doInitialize(MMKV.java:226)<br>at com.tencent.mmkv.MMKV.initialize(MMKV.java:208)<br>at com.tencent.mmkv.MMKV.initialize(MMKV.java:94)<br>at com.wesley.CustomApplication.onCreate(CustomApplication.kt:14)<br>at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:1154)<br>at android.app.ActivityThread.handleBindApplication(ActivityThread.java:5871)<br>at android.app.ActivityThread.access$1100(ActivityThread.java:199)<br>at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1650)<br>at android.os.Handler.dispatchMessage(Handler.java:106)<br>at android.os.Looper.loop(Looper.java:193)<br>at android.app.ActivityThread.main(ActivityThread.java:6669)<br>at java.lang.reflect.Method.invoke(Native Method)<br>at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)<br>at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:922)  </p></blockquote><p>æ—¥å¿—ï¼ˆxcrash è‡ªå·±æœ‰soå¼‚å¸¸æ•è·ï¼Œæ‰€ä»¥ç›´åˆ°åŠ è½½ mmkv æ‰æŠ›å‡ºå¼‚å¸¸ï¼‰</p><blockquote><p> 12-27 14:58:04.840  9717  9717 E System  : ##loadLibrary0## &#x2F;system&#x2F;app&#x2F;demo&#x2F;demo_V1.0.0(2412261921)-release-signed.apk!&#x2F;lib&#x2F;armeabi-v7a&#x2F;libxcrash.so error: dlopen failed: library â€œ&#x2F;system&#x2F;app&#x2F;demo&#x2F;demo_V1.0.0(2412261921)-release-signed.apk!&#x2F;lib&#x2F;armeabi-v7a&#x2F;libxcrash.soâ€ not found, and try to find so file from the lib path<br>12-27 14:58:04.843  9717  9717 E demo-XCrashWrapper: xcrash: NativeHandler System.loadLibrary failed<br>12-27 14:58:04.843  9717  9717 E demo-XCrashWrapper: java.lang.UnsatisfiedLinkError: Library xcrash not found; tried [&#x2F;system&#x2F;lib&#x2F;libxcrash.so, &#x2F;product&#x2F;lib&#x2F;libxcrash.so]<br>12-27 14:58:04.843  9717  9717 E demo-XCrashWrapper:     at java.lang.Runtime.loadLibrary0(Runtime.java:1101)<br>12-27 14:58:04.843  9717  9717 E demo-XCrashWrapper:     at java.lang.System.loadLibrary(System.java:1669)<br>12-27 14:58:04.843  9717  9717 E demo-XCrashWrapper:     at xcrash.NativeHandler.initialize(NativeHandler.java:89)<br>12-27 14:58:04.843  9717  9717 E demo-XCrashWrapper:     at xcrash.XCrash.init(XCrash.java:189)<br>12-27 14:58:04.843  9717  9717 E demo-XCrashWrapper:     at com.wesley.base.apm.XCrashWrapper.<init>(XCrashWrapper.kt:131)<br>12-27 14:58:04.843  9717  9717 E demo-XCrashWrapper:     at com.wesley.base.apm.XCrashWrapper.<init>(XCrashWrapper.kt:17)<br>12-27 14:58:04.843  9717  9717 E demo-XCrashWrapper:     at com.wesley.CastApplication.attachBaseContext(CastApplication.kt:43)<br>12-27 14:58:04.843  9717  9717 E demo-XCrashWrapper:     at android.app.Application.attach(Application.java:212)<br>12-27 14:58:04.843  9717  9717 E demo-XCrashWrapper:     at android.app.Instrumentation.newApplication(Instrumentation.java:1121)<br>12-27 14:58:04.843  9717  9717 E demo-XCrashWrapper:     at android.app.LoadedApk.makeApplication(LoadedApk.java:1065)<br>12-27 14:58:04.843  9717  9717 E demo-XCrashWrapper:     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:5842)<br>12-27 14:58:04.843  9717  9717 E demo-XCrashWrapper:     at android.app.ActivityThread.access$1100(ActivityThread.java:199)<br>12-27 14:58:04.843  9717  9717 E demo-XCrashWrapper:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1650)<br>12-27 14:58:04.843  9717  9717 E demo-XCrashWrapper:     at android.os.Handler.dispatchMessage(Handler.java:106)<br>12-27 14:58:04.843  9717  9717 E demo-XCrashWrapper:     at android.os.Looper.loop(Looper.java:193)<br>12-27 14:58:04.843  9717  9717 E demo-XCrashWrapper:     at android.app.ActivityThread.main(ActivityThread.java:6669)<br>12-27 14:58:04.843  9717  9717 E demo-XCrashWrapper:     at java.lang.reflect.Method.invoke(Native Method)<br>12-27 14:58:04.843  9717  9717 E demo-XCrashWrapper:     at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)<br>12-27 14:58:04.843  9717  9717 E demo-XCrashWrapper:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:922)  </p></blockquote><p>å› ä¸ºå®‰å“6å¼€å§‹æ”¯æŒç›´æ¥åŠ è½½apkå†…éƒ¨soï¼Œå¦‚æœç¼–è¯‘åçš„ apk å†…éƒ¨ so æ˜¯ä¸å‹ç¼©çš„ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦é‡Šæ”¾åˆ°ç›®å½•äº†ã€‚æ‰€ä»¥æ’é™¤æ˜¯å› ä¸ºä¸è§£å‹ so åˆ°&#x2F;system&#x2F;app&#x2F;demo&#x2F;lib&#x2F;arm å¼•èµ·çš„é—®é¢˜ï¼Œè™½ç„¶è¿™æ ·ä¹Ÿå¯ä»¥è§£å†³é—®é¢˜ã€‚</p><blockquote><p>å¦‚æœapkçš„minSdkVersion &gt;&#x3D; 23 å¹¶ä¸” Android Gradle plugin &gt;&#x3D; 3.6.0æƒ…å†µä¸‹ï¼Œæ‰“åŒ…æ—¶android:extractNativeLibs&#x3D;falseï¼Œapkçš„soé»˜è®¤æ˜¯ä¸å‹ç¼©çš„ã€‚</p><p>åœ¨minSdkVersion &lt; 23 æˆ– Android Gradle plugin &lt; 3.6.0æƒ…å†µä¸‹ï¼Œæ‰“åŒ…æ—¶ android:extractNativeLibs&#x3D;trueï¼Œapkçš„soé»˜è®¤æ˜¯å‹ç¼©çš„ã€‚</p></blockquote><p>ç„¶åï¼Œæˆ‘å°è¯•pushæ²¡æœ‰ç»™å‚å•†ç­¾åå‰çš„ç‰ˆæœ¬ apk åˆ°æœºå™¨ä¸Šæ˜¯æ­£å¸¸çš„ï¼Œé‚£ä¹ˆåº”è¯¥æ˜¯å‚å•†ç­¾åå¯¼è‡´ apk å‘ç”Ÿäº†å˜åŒ–ã€‚åˆšå¥½å‰å‡ å¤©ç¢°åˆ°å®‰å“ç­¾åé—®é¢˜<a href="https://iwesley.top/article/133f2b7a/">å®‰å“15é¢„ç½®ç¬¬ä¸‰æ–¹apkæ—¶ç­¾åæŠ¥é”™é—®é¢˜è§£å†³ - Wesleyâ€™s Blog</a>ã€‚ç„¶åæˆ‘å°±ç”¨å‘½ä»¤çœ‹äº†ä¸€ä¸‹ï¼š<code>zipalign -c -v  4 demo_sign.apk</code></p><p><a href="https://developer.android.com/tools/zipalign">zipalign  | Android Studio  | Android Developers</a></p><p>æ˜¾ç¤ºï¼š<code>Verification FAILED</code>ï¼Œé‚£å°±æ˜¯ 4 å­—èŠ‚æ²¡æœ‰å¯¹é½ã€‚</p><p>æŸ¥çœ‹ç­¾åç‰ˆæœ¬<code>apksigner verify -v demo_sign.apk | grep Verified</code></p><p>åªæœ‰v1ç­¾å</p><blockquote><p>~&#x2F;Project$ apksigner verify -v demo_sign.apk | grep Verified</p><p>Verified using v1 scheme (JAR signing): true</p><p>Verified using v2 scheme (APK Signature Scheme v2): false</p><p>Verified using v3 scheme (APK Signature Scheme v3): false</p><p>Verified using v3.1 scheme (APK Signature Scheme v3.1): false</p><p>Verified using v4 scheme (APK Signature Scheme v4): false</p><p>Verified for SourceStamp: false</p></blockquote><p>å› ä¸ºæ˜¯v1ç­¾åï¼Œæ‰§è¡Œ<code>zipalign -v -p 4 demo_sign.apk  demo_sign_align.apk</code>å¯¹é½4 å­—èŠ‚ä¸ä¼šç ´åå‚å•†çš„ç­¾åä¿¡æ¯ï¼Œç„¶åpushè¿›å»æœç„¶å¥½äº†ã€‚</p><p>ç„¶åæˆ‘åˆè¯•ç€å®‰è£…æ²¡æœ‰å¯¹é½å‰çš„ï¼Œç»“æœç›´æ¥æŠ¥é”™äº†ï¼š</p><blockquote><p>PS C:\Users\Wesley&gt; adb  install Y:\Project\demo_sign.apk</p><p>Performing Streamed Install</p><p>adb: failed to install Y:\Project\demo_sign.apk: Failure [INSTALL_FAILED_INVALID_APK: Failed to extract native libraries, res&#x3D;-2]</p></blockquote><p>ä½†æ˜¯ç³»ç»Ÿæ‰«æå®‰è£…å´æ˜¯å¯ä»¥é€šè¿‡çš„ï¼Œæ‰€ä»¥å¾ˆéš¾å‘ç°æ˜¯å­—èŠ‚ä¸å¯¹é½å¼•èµ·çš„ã€‚</p><h2 id="æ·±ç©¶"><a href="#æ·±ç©¶" class="headerlink" title="æ·±ç©¶"></a>æ·±ç©¶</h2><p>ä¹‹å‰ç›´æ¥æœç´¢å®‰å“java.lang.UnsatisfiedLinkErroræ˜¯å¾ˆéš¾æ‰¾åˆ°é’ˆå¯¹è¿™ç§é—®é¢˜çš„è§£å†³æ–¹æ³•çš„ã€‚å› ä¸ºç°åœ¨æœ‰äº†è§£å†³åŠæ³•ï¼Œæ‰€ä»¥æ¢æˆUnsatisfiedLinkError zipalignè¿›è¡Œè°·æ­Œæœç´¢ã€‚ç»“æœå°±å‡ºæ¥äº†ï¼š</p><p><a href="https://stackoverflow.com/questions/72544099/java-lang-unsatisfiedlinkerror-when-installing-as-system-app">android - java.lang.UnsatisfiedLinkError when installing as system app - Stack Overflow</a></p><p><a href="https://ask.seowhy.com/question/175285">zipflingerå¯¼è‡´çš„UnsatisfiedLinkErroråˆ†æ - æœå¤–SEOé—®ç­”</a></p><p><a href="https://blog.51cto.com/u_15075514/3336070">zipflingerå¯¼è‡´çš„UnsatisfiedLinkErroråˆ†æ_mb5ff2f24b42377çš„æŠ€æœ¯åšå®¢_51CTOåšå®¢</a></p><p>ç”¨ AIå¤§æ¨¡å‹æ€»ç»“ä¸€ä¸‹ï¼š</p><blockquote><p>è¿™ç¯‡æ–‡ç« ä¸»è¦åˆ†æäº†åœ¨Androidå¼€å‘ä¸­ï¼Œç”±äºå‡çº§Android Gradle Plugin (AGP) ç‰ˆæœ¬å¯¼è‡´çš„UnsatisfiedLinkErroré—®é¢˜ï¼Œå¹¶æä¾›äº†ç›¸åº”çš„è§£å†³æ–¹æ¡ˆã€‚ä»¥ä¸‹æ˜¯æ–‡ç« çš„ä¸»è¦å†…å®¹æ€»ç»“ï¼š</p><h3 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h3><ul><li><strong>é—®é¢˜ç°è±¡</strong>ï¼šåœ¨Android 9.0ç¯å¢ƒä¸‹ï¼Œå°†AGPä»3.6.1å‡çº§åˆ°4.1.0åï¼Œé¢„è£…åœ¨&#x2F;system&#x2F;priv-appä¸‹çš„APPå‡ºç°äº†UnsatisfiedLinkErrorå´©æºƒã€‚</li><li><strong>é—®é¢˜åŸå› </strong>ï¼šå‡çº§AGPåï¼Œç³»ç»Ÿåœ¨åŠ è½½soæ–‡ä»¶æ—¶å¤±è´¥ï¼Œå…·ä½“è¡¨ç°ä¸ºsoæ–‡ä»¶åœ¨APKä¸­çš„å¯¹é½æ–¹å¼æœ‰é—®é¢˜ã€‚</li></ul><h3 id="é—®é¢˜åˆ†æ"><a href="#é—®é¢˜åˆ†æ" class="headerlink" title="é—®é¢˜åˆ†æ"></a>é—®é¢˜åˆ†æ</h3><ul><li><strong>soæ–‡ä»¶åŠ è½½æµç¨‹</strong>ï¼šç³»ç»Ÿä½¿ç”¨â€œ!&#x2F;â€åˆ†éš”ç¬¦æ¥å®šä½soæ–‡ä»¶è·¯å¾„ï¼Œå¹¶åœ¨APKä¸­æŸ¥æ‰¾å¯¹åº”çš„entryã€‚é—®é¢˜å‡ºåœ¨zipalignå¤„ç†ä¸Šï¼Œå¯¼è‡´soæ–‡ä»¶çš„å¯¹é½ä¸æ­£ç¡®ã€‚</li><li><strong>zipalignçš„ä½œç”¨</strong>ï¼šç¡®ä¿APKä¸­æ‰€æœ‰æœªå‹ç¼©æ•°æ®åœ¨4å­—èŠ‚è¾¹ç•Œä¸Šå¯¹é½ï¼Œä»¥ä¾¿ä½¿ç”¨mmap()ç›´æ¥è®¿é—®ï¼Œå‡å°‘RAMæ¶ˆè€—ã€‚</li><li><strong>ç³»ç»Ÿç¼–è¯‘å¤„ç†</strong>ï¼šAndroidç³»ç»Ÿåœ¨ç¼–è¯‘æ—¶ä¼šå¯¹privileged appæ‰§è¡Œuncompress-dexsæ“ä½œï¼Œå°†å‹ç¼©å­˜å‚¨çš„dexæ–‡ä»¶å˜ä¸ºä¸å‹ç¼©å­˜å‚¨ã€‚ä¹‹åè¿˜ä¼šè¿›è¡Œalign-packageæ“ä½œã€‚</li></ul><h3 id="é—®é¢˜åŸå› "><a href="#é—®é¢˜åŸå› " class="headerlink" title="é—®é¢˜åŸå› "></a>é—®é¢˜åŸå› </h3><ul><li><strong>zipflingerå·¥å…·</strong>ï¼šä»AGP 4.1å¼€å§‹ï¼Œé»˜è®¤åœ¨æ„å»ºreleaseç‰ˆæœ¬æ—¶å¯ç”¨zipflingerå·¥å…·è¿›è¡Œæ‰“åŒ…ã€‚zipflingeræ”¹å˜äº†APKçš„æ‰“åŒ…æ–¹å¼ï¼Œå¯¼è‡´uncompress-dexsæ“ä½œåzipalignå‡ºç°é—®é¢˜ã€‚</li></ul><h3 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><ul><li><strong>ç¦ç”¨zipflinger</strong>ï¼šåœ¨appå·¥ç¨‹çš„gradle.propertiesä¸­åŠ å…¥é…ç½®ä»¥ç¦ç”¨zipflingerã€‚</li><li><strong>ä¸è§£å‹ dex</strong>ï¼šDONT_UNCOMPRESS_PRIV_APPS_DEXS :&#x3D; trueï¼Œå¯èƒ½ä¼šé™ä½ dex åŠ è½½é€Ÿåº¦ã€‚</li><li><strong>ä½¿ç”¨zip2zipå·¥å…·</strong>ï¼šåœ¨æœ€æ–°çš„AOSPæºç ä¸­ï¼Œä½¿ç”¨zip2zipå·¥å…·æ¥å¤„ç†dexæ–‡ä»¶çš„è§£å‹ç¼©ï¼Œä»¥é€‚é…zipflingeræ‰“åŒ…çš„APKã€‚</li><li><strong>å…¶ä»–æ–¹æ³•</strong>ï¼šåŒ…æ‹¬å›é€€AGPç‰ˆæœ¬ã€ä¿®æ”¹ç³»ç»Ÿç¼–è¯‘è„šæœ¬ç­‰ï¼Œä½†è¿™äº›æ–¹æ³•å„æœ‰ä¼˜ç¼ºç‚¹ã€‚</li></ul></blockquote><p>è™½ç„¶å¼•èµ·é—®é¢˜çš„åŸå› ä¸ä¸€æ ·ï¼Œä½†éƒ½æ˜¯å› ä¸ºå­—èŠ‚ä¸å¯¹é½å¼•èµ·çš„ so æ‰¾ä¸åˆ°ã€‚</p><p>ä¸‹é¢æ¥åˆ†æä¸€ä¸‹å…·ä½“åŸå› ï¼š</p><p>soåŠ è½½è°ƒç”¨æ ˆ</p><blockquote><p>ojluni&#x2F;src&#x2F;main&#x2F;java&#x2F;java&#x2F;lang&#x2F;System.java  â€“&gt; System.loadLibrary</p><p>ojluni&#x2F;src&#x2F;main&#x2F;java&#x2F;java&#x2F;lang&#x2F;Runtime.java  â€“&gt; Runtime.loadLibrary0 -&gt; nativeLoad</p><p>ojluni&#x2F;src&#x2F;main&#x2F;native&#x2F;Runtime.c  â€“&gt; Runtime_nativeLoad</p><p>art&#x2F;openjdkjvm&#x2F;OpenjdkJvm.cc  â€“&gt; JVM_NativeLoad</p><p>art&#x2F;runtime&#x2F;java_vm_ext.cc â€“&gt; JavaVMExt::LoadNativeLibrary</p><p>system&#x2F;core&#x2F;libnativeloader&#x2F;native_loader.cpp â€“&gt; OpenNativeLibrary</p><p>bionic&#x2F;libdl&#x2F;libdl.cpp â€“&gt; android_dlopen_ext</p><p>bionic&#x2F;linker&#x2F;dlfcn.cpp â€“&gt; __loader_android_dlopen_ext</p><p>bionic&#x2F;linker&#x2F;dlfcn.cpp â€“&gt; dlopen_ext</p><p>bionic&#x2F;linker&#x2F;linker.cpp â€“&gt; do_dlopen</p><p>bionic&#x2F;linker&#x2F;linker.cpp â€“&gt; find_library</p><p>bionic&#x2F;linker&#x2F;linker.cpp â€“&gt; find_libraries</p><p>bionic&#x2F;linker&#x2F;linker.cpp â€“&gt; find_library_internal</p><p>bionic&#x2F;linker&#x2F;linker.cpp â€“&gt; load_library</p><p>bionic&#x2F;linker&#x2F;linker.cpp â€“&gt; open_library</p><p>bionic&#x2F;linker&#x2F;linker.cpp â€“&gt; open_library_in_zipfile</p></blockquote><p>é‡ç‚¹çœ‹ <code>bionic/linker/linker.cpp --&gt; open_library_in_zipfile</code> è¿™ä¸ªå‡½æ•°ï¼Œå¯¼è‡´åŠ è½½å¤±è´¥çš„æ˜¯ä»¥ä¸‹æ¡ä»¶ <code>entry.offset % PAGE_SIZE != 0</code></p><p><a href="http://xrefandroid.com/android-9.0.0_r61/xref/bionic/linker/linker.cpp#992">http://xrefandroid.com/android-9.0.0_r61/xref/bionic/linker/linker.cpp#992</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">if</span> (entry.method != kCompressStored || (entry.offset % PAGE_SIZE) != <span class="hljs-number">0</span>) &#123;<br>    <span class="hljs-built_in">close</span>(fd);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“æ¥è¯´ï¼Œå°±æ˜¯ç­¾åçš„æ—¶å€™ç ´åäº†4å­—èŠ‚å¯¹é½ï¼Œå¯¼è‡´ so åŠ è½½å¤±è´¥ã€‚æ‰€ä»¥ï¼Œä»¥åç¢°åˆ°æ­¤ç±»é—®é¢˜æ—¶ï¼Œå¯ä»¥æ‰§è¡Œ<code>zipalign -c -v  4 xxx.apk</code>å…ˆçœ‹ä¸€ä¸‹æ˜¯å¦4å­—èŠ‚å¯¹é½ã€‚</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;ä»Šå¤©æŠŠä¸€ä¸ªapkç»™å‚å•†ç­¾ååç›´æ¥pushåˆ°æœºå™¨çš„&amp;#x2F;system&amp;#x2F;app,ç»“æœè¿è¡Œappæ—¶æ˜¾ç¤ºsoæ‰¾ä¸åˆ°ã€‚æŠ¥é”™ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt; java</summary>
        
      
    
    
    
    <category term="Android Build System" scheme="https://iwesley.top/categories/Android-Build-System/"/>
    
    
    <category term="Android" scheme="https://iwesley.top/tags/Android/"/>
    
    <category term="aospç¼–è¯‘" scheme="https://iwesley.top/tags/aosp%E7%BC%96%E8%AF%91/"/>
    
    <category term="Android.mk" scheme="https://iwesley.top/tags/Android-mk/"/>
    
    <category term="Android.bp" scheme="https://iwesley.top/tags/Android-bp/"/>
    
  </entry>
  
  <entry>
    <title>å®‰å“å¤šæ¸ é“apké…ç½®ä¸åŒç­¾å</title>
    <link href="https://iwesley.top/article/611fb416/"/>
    <id>https://iwesley.top/article/611fb416/</id>
    <published>2024-12-24T13:39:40.000Z</published>
    <updated>2024-12-29T07:06:02.588Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€èˆ¬ç­¾åéƒ½æ˜¯æ”¾åœ¨buildTypesé‡Œé¢ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs groovy">...<br>android &#123;<br>    ...<br>    defaultConfig &#123;...&#125;<br>    signingConfigs &#123;<br>        release &#123;<br>            storeFile file(<span class="hljs-string">&quot;myreleasekey.keystore&quot;</span>)<br>            storePassword <span class="hljs-string">&quot;password&quot;</span><br>            keyAlias <span class="hljs-string">&quot;MyReleaseKey&quot;</span><br>            keyPassword <span class="hljs-string">&quot;password&quot;</span><br>        &#125;<br>    &#125;<br>    buildTypes &#123;<br>        release &#123;<br>            ...<br>            signingConfig signingConfigs.release<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½†æ˜¯å¤šæ¸ é“æ—¶ï¼Œä½¿ç”¨é…ç½®çš„ä¼˜å…ˆçº§ä»é«˜åˆ°ä½åˆ†åˆ«æ˜¯buildTypesã€productFlavorã€defaultConfigï¼Œå¦‚æœæŒ‰ä¸Šé¢é…ç½®çš„è¯ï¼Œæ ¹æœ¬ä¿®æ”¹ä¸äº†ç­¾åã€‚æ‰€ä»¥ä¿®æ”¹æˆä»¥ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs groovy">android &#123;<br>    ...<br>    signingConfigs &#123;<br>        release &#123;<br>            storeFile file(<span class="hljs-string">&quot;myreleasekey.keystore&quot;</span>)<br>            storePassword <span class="hljs-string">&quot;password&quot;</span><br>            keyAlias <span class="hljs-string">&quot;MyReleaseKey&quot;</span><br>            keyPassword <span class="hljs-string">&quot;password&quot;</span><br>        &#125;<br>        demo &#123;<br>            storeFile file(<span class="hljs-string">&quot;myreleasekey.keystore&quot;</span>)<br>            storePassword <span class="hljs-string">&quot;password&quot;</span><br>            keyAlias <span class="hljs-string">&quot;MyReleaseKey&quot;</span><br>            keyPassword <span class="hljs-string">&quot;password&quot;</span><br>        &#125;<br>    &#125;<br>    defaultConfig &#123;<br>        signingConfig signingConfigs.release <span class="hljs-comment">//é»˜è®¤ç­¾å</span><br>    &#125;<br>    buildTypes &#123;<br>        debug&#123;<br>            signingConfig <span class="hljs-literal">null</span> <span class="hljs-comment">//è¿™é‡Œä¸€å®šè¦ç½®nullï¼Œå¦åˆ™graldeä¼šæ’å…¥é»˜è®¤ç­¾å</span><br>        &#125;<br>        release&#123;...&#125;<br>    &#125;<br>    <span class="hljs-comment">// Specifies one flavor dimension.</span><br>    flavorDimensions <span class="hljs-string">&quot;version&quot;</span><br>    productFlavors &#123;<br>        demo &#123;<br>            dimension <span class="hljs-string">&quot;version&quot;</span><br>            applicationIdSuffix <span class="hljs-string">&quot;.demo&quot;</span><br>            versionNameSuffix <span class="hljs-string">&quot;-demo&quot;</span><br>            signingConfig signingConfigs.demo <span class="hljs-comment">//æ¸ é“ç­¾å</span><br>        &#125;<br>        full &#123;<br>            dimension <span class="hljs-string">&quot;version&quot;</span><br>            applicationIdSuffix <span class="hljs-string">&quot;.full&quot;</span><br>            versionNameSuffix <span class="hljs-string">&quot;-full&quot;</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æŒ‰ä¸Šé¢é…ç½®å®Œåï¼Œæ¸ é“å¯ä»¥æŒ‰ç…§è‡ªå·±éœ€æ±‚æ›¿æ¢ç­¾åäº†ã€‚ç‰¹åˆ«æ³¨æ„debugç±»å‹é‚£é‡Œè¦ç½®<code>signingConfig null</code>ï¼Œå¦åˆ™ç¼–è¯‘debugç‰ˆæœ¬æ—¶ç­¾åä¼šä¸ç”Ÿæ•ˆï¼Œå› ä¸ºgradleä¼šæ’å…¥é»˜è®¤ç­¾åï¼Œæ›¿æ¢æ‰æ¸ é“çš„ç­¾åã€‚</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;ä¸€èˆ¬ç­¾åéƒ½æ˜¯æ”¾åœ¨buildTypesé‡Œé¢ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight groovy&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span</summary>
        
      
    
    
    
    <category term="AppBuild" scheme="https://iwesley.top/categories/AppBuild/"/>
    
    
    <category term="Android" scheme="https://iwesley.top/tags/Android/"/>
    
    <category term="Androidå¤šæ¸ é“" scheme="https://iwesley.top/tags/Android%E5%A4%9A%E6%B8%A0%E9%81%93/"/>
    
  </entry>
  
  <entry>
    <title>å®‰å“15é¢„ç½®ç¬¬ä¸‰æ–¹apkæ—¶ç­¾åæŠ¥é”™é—®é¢˜è§£å†³</title>
    <link href="https://iwesley.top/article/133f2b7a/"/>
    <id>https://iwesley.top/article/133f2b7a/</id>
    <published>2024-12-24T13:13:45.000Z</published>
    <updated>2024-12-29T07:06:02.588Z</updated>
    
    <content type="html"><![CDATA[<p>æœ‰åŒäº‹åé¦ˆé›†æˆapkæ—¶å®‰è£…å¤±è´¥</p><blockquote><p>PackageManager: Failed to scan &#x2F;product&#x2F;app&#x2F;test: No APK Signature Scheme v2 signature in package &#x2F;product&#x2F;app&#x2F;test&#x2F;test.apk</p></blockquote><p>æŸ¥çœ‹ç¼–è¯‘åçš„apkç­¾åä¿¡æ¯</p><blockquote><p>DOES NOT VERIFY</p><p>ERROR: JAR signer CERT.RSA: JAR signature META-INF&#x2F;CERT.SF indicates the APK is signed using APK Signature Scheme v2 but no such signature was found. Signature stripped?</p></blockquote><p>ä½†æ˜¯ç”¨å‘½ä»¤æŸ¥çœ‹æˆ‘çš„apkæ˜¯æ­£å¸¸çš„<code>apksigner  verify -v  test.apk  | grep Verified</code></p><blockquote><p>Verified using v1 scheme (JAR signing): true</p><p>Verified using v2 scheme (APK Signature Scheme v2): true</p><p>Verified using v3 scheme (APK Signature Scheme v3): false</p><p>Verified using v3.1 scheme (APK Signature Scheme v3.1): false</p><p>Verified using v4 scheme (APK Signature Scheme v4): false</p><p>Verified for SourceStamp: false</p></blockquote><p>é‚£ä¹ˆåº”è¯¥æ˜¯ç¼–è¯‘è¿‡ç¨‹åšäº†æŸäº›å˜åŠ¨ã€‚</p><h1 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h1><h2 id="é€šè¿‡é¢„ç¼–è¯‘çš„æ–¹æ³•"><a href="#é€šè¿‡é¢„ç¼–è¯‘çš„æ–¹æ³•" class="headerlink" title="é€šè¿‡é¢„ç¼–è¯‘çš„æ–¹æ³•"></a>é€šè¿‡é¢„ç¼–è¯‘çš„æ–¹æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java">android_app_import &#123;<br>    name: <span class="hljs-string">&quot;test&quot;</span>,<br>    apk: <span class="hljs-string">&quot;test.apk&quot;</span>,<br>    <span class="hljs-comment">// ä¿ç•™apkè‡ªå·±çš„ç­¾å</span><br>    presigned: <span class="hljs-literal">true</span>,<br>    preprocessed: <span class="hljs-literal">true</span>,<br>    <span class="hljs-comment">// æ‰“å¼€å°†æ”¾åˆ°å¯¹åº”åˆ†åŒºç›®å½•çš„priv-appæ–‡ä»¶å¤¹ä¸‹</span><br>    <span class="hljs-comment">// privileged: true,</span><br>    <span class="hljs-comment">// æ‰“å¼€å°†æ”¾åˆ°system_extåˆ†åŒº</span><br>    <span class="hljs-comment">// system_ext_specific: true,</span><br>    <span class="hljs-comment">// æ‰“å¼€å°†æ”¾åˆ°productåˆ†åŒº</span><br>    <span class="hljs-comment">// product_specific: true,</span><br>    <span class="hljs-comment">// æ‰“å¼€å°†æ”¾åˆ°vendoråˆ†åŒº</span><br>    <span class="hljs-comment">// proprietary: true,</span><br>    <span class="hljs-comment">// odmåˆ†åŒº</span><br>    <span class="hljs-comment">// device_specific: true</span><br>    <span class="hljs-comment">// apkä¼˜åŒ–ï¼Œå†…ç½®ä¸‰æ–¹apkæ—¶å»ºè®®å…³é—­</span><br>    dex_preopt: &#123;<br>        enabled: <span class="hljs-literal">false</span>,<br>    &#125;,<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨å®‰å“15ä¸Šæ–°å¢äº†<a href="http://xrefandroid.com/android-15.0.0_r1/xref/build/soong/java/app_import.go#376">app_import.go - OpenGrok cross reference for &#x2F;build&#x2F;soong&#x2F;java&#x2F;app_import.go</a></p><p>validatePresignedApkæ£€æµ‹</p><p>å¦‚æœåŠ äº†presignedï¼Œä½†ä¸åŠ preprocessedï¼ŒåŒæ—¶targetSdkå¤§äºç­‰äº30å°±ä¼šç¼–è¯‘æŠ¥é”™ï¼Œæ›´åŠ æ–¹ä¾¿å¼€å‘è€…å®šä½é—®é¢˜ï¼š</p><blockquote><p>[100% 5&#x2F;5 0s remaining] Check presigned apkFAILED: out&#x2F;soong&#x2F;.intermediates&#x2F;packages&#x2F;test&#x2F;test&#x2F;android_common&#x2F;validated-prebuilt&#x2F;check.stampbuild&#x2F;soong&#x2F;scripts&#x2F;check_prebuilt_presigned_apk.py â€“aapt2 out&#x2F;host&#x2F;linux-x86&#x2F;bin&#x2F;aapt2 â€“zipalign out&#x2F;host&#x2F;linux-x86&#x2F;bin&#x2F;zipalign packages&#x2F;test&#x2F;test.apk out&#x2F;soong&#x2F;.intermediates&#x2F;packages&#x2F;test&#x2F;test&#x2F;android_common&#x2F;validated-prebuilt&#x2F;check.stamppackages&#x2F;test&#x2F;test.apk: Prebuilt, presigned apks with targetSdkVersion &gt;&#x3D; 30 (or a codename targetSdkVersion) must set <strong>preprocessed: true</strong> in the Android.bp definition (because they must be signed with signature v2, and the build system would wreck that signature otherwise)</p></blockquote><p>å¦å¤–apké‡Œé¢çš„soä¸èƒ½å‹ç¼©ï¼Œå¦åˆ™ä¼šæŠ¥é”™</p><blockquote><p>FAILED: out&#x2F;soong&#x2F;.intermediates&#x2F;packages&#x2F;test&#x2F;test&#x2F;android_common&#x2F;validated-prebuilt&#x2F;check.stamp</p><p>build&#x2F;soong&#x2F;scripts&#x2F;check_prebuilt_presigned_apk.py â€“aapt2 out&#x2F;host&#x2F;linux-x86&#x2F;bin&#x2F;aapt2 â€“zipalign out&#x2F;host&#x2F;linux-x86&#x2F;bin&#x2F;zipalign â€“preprocessed packages&#x2F;test&#x2F;test.apk out&#x2F;soong&#x2F;.intermediates&#x2F;packages&#x2F;test&#x2F;test&#x2F;android_common&#x2F;validated-prebuilt&#x2F;check.stamp</p><p>packages&#x2F;test&#x2F;test.apk: <strong>Contains compressed JNI libraries</strong></p></blockquote><p>å› ä¸ºå®‰å“6å¼€å§‹æ”¯æŒç›´æ¥åŠ è½½apké‡Œé¢çš„soï¼Œå¦‚æœå‹ç¼©çš„è¯ï¼Œé¢„ç¼–è¯‘ä¼šåœ¨apkå†…éƒ¨è¿›è¡Œè§£å‹ï¼Œé‚£ä¹ˆå°±ä¼šç ´åapkç­¾åã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/wesley666/picgo/img2023/202412242117760.png" alt="img"></p><p>å…¶å®ï¼Œå¦‚æœapkçš„minSdkVersion &gt;&#x3D; 23 å¹¶ä¸” Android Gradle plugin &gt;&#x3D; 3.6.0æƒ…å†µä¸‹ï¼Œæ‰“åŒ…æ—¶android:extractNativeLibs&#x3D;falseï¼Œapkçš„soé»˜è®¤æ˜¯ä¸å‹ç¼©çš„ã€‚</p><p>åœ¨minSdkVersion &lt; 23 æˆ– Android Gradle plugin &lt; 3.6.0æƒ…å†µä¸‹ï¼Œæ‰“åŒ…æ—¶ android:extractNativeLibs&#x3D;trueï¼Œapkçš„soé»˜è®¤æ˜¯å‹ç¼©çš„ã€‚</p><p>å‚è€ƒï¼š<a href="https://juejin.cn/post/6943920550125420558">https://juejin.cn/post/6943920550125420558</a></p><p><a href="https://blog.csdn.net/yzyeilin/article/details/139968840">Android13è§£å†³android_app_importå†…ç½®ç¬¬ä¸‰æ–¹APKå®‰è£…å¤±è´¥é—®é¢˜_but no such signature was found. signature strippe-CSDNåšå®¢</a></p><p><a href="https://blog.csdn.net/chuyouyinghe/article/details/131001532">æµ…è°ˆextractNativeLibs</a></p><h2 id="é€šè¿‡ç›´æ¥æ‹·è´çš„æ–¹æ³•"><a href="#é€šè¿‡ç›´æ¥æ‹·è´çš„æ–¹æ³•" class="headerlink" title="é€šè¿‡ç›´æ¥æ‹·è´çš„æ–¹æ³•"></a>é€šè¿‡ç›´æ¥æ‹·è´çš„æ–¹æ³•</h2><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/wangwei6227/article/details/123727372">https://blog.csdn.net/wangwei6227/article/details/123727372</a></p><p>åŒæ ·è¦æ³¨æ„apk soçš„å‹ç¼©é—®é¢˜ï¼Œå¦‚æœæ˜¯å‹ç¼©è¿‡çš„ï¼Œå¿…é¡»æå–å‡ºæ¥ï¼Œå¹¶æ‹·è´åˆ°apkæœºå™¨ç›®å½•ã€‚</p><h2 id="å¯èƒ½é‡åˆ°çš„selinuxæƒé™é—®é¢˜"><a href="#å¯èƒ½é‡åˆ°çš„selinuxæƒé™é—®é¢˜" class="headerlink" title="å¯èƒ½é‡åˆ°çš„selinuxæƒé™é—®é¢˜"></a>å¯èƒ½é‡åˆ°çš„selinuxæƒé™é—®é¢˜</h2><blockquote><p>01-01 12:00:39.520000  5326  5326 W om.skype.raider: type&#x3D;1400 audit(0.0:64): avc: denied { read } for name&#x3D;â€libSkypeAndroid.soâ€ dev&#x3D;â€mmcblk0p22â€ ino&#x3D;770074 scontext&#x3D;u:r:untrusted_app:s0:c512,c768 tcontext&#x3D;u:object_r:system_data_file:s0 tclass&#x3D;file permissive&#x3D;0</p></blockquote><p>#&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; untrusted_app.te &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p><p>allow untrusted_app system_data_file:file r_file_perms;</p><p>å‚è€ƒï¼š<a href="https://www.codeleading.com/article/6471686269/">é‡‡ç”¨Signature Scheme v2ç­¾åæ–¹å¼çš„APKé¢„ç½®å¤±è´¥ </a></p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;æœ‰åŒäº‹åé¦ˆé›†æˆapkæ—¶å®‰è£…å¤±è´¥&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;PackageManager: Failed to scan &amp;#x2F;product&amp;#x2F;app&amp;#x2F;test: No APK Signature Scheme v2</summary>
        
      
    
    
    
    <category term="Android Build System" scheme="https://iwesley.top/categories/Android-Build-System/"/>
    
    
    <category term="Android" scheme="https://iwesley.top/tags/Android/"/>
    
    <category term="aospç¼–è¯‘" scheme="https://iwesley.top/tags/aosp%E7%BC%96%E8%AF%91/"/>
    
    <category term="Android.mk" scheme="https://iwesley.top/tags/Android-mk/"/>
    
    <category term="Android.bp" scheme="https://iwesley.top/tags/Android-bp/"/>
    
  </entry>
  
  <entry>
    <title>å’ªå’•è§†é¢‘DLNAæŠ•å±è·³é›†é—®é¢˜åˆ†æ</title>
    <link href="https://iwesley.top/article/73728aea/"/>
    <id>https://iwesley.top/article/73728aea/</id>
    <published>2024-12-08T12:08:50.000Z</published>
    <updated>2024-12-24T12:51:46.756Z</updated>
    
    <content type="html"><![CDATA[<p>QAåœ¨æµ‹è¯•å…¬å¸æŠ•å±åº”ç”¨æ—¶ï¼Œå‘ç°å’ªå’•è§†é¢‘DLNAæŠ•å‰§é›†æ—¶æœ‰æ—¶å€™ä¼šè·³è¿‡ä¸€é›†ç›´æ¥æ’­ä¸‹ä¸€é›†çš„é—®é¢˜ã€‚</p><p>å°è¯•è‡ªè¡Œåˆ†æè§£å†³ä¸äº†åï¼Œæˆ‘å†³å®šåˆ†æä¸€ä¸‹ç«å“åº”ç”¨ï¼šå½“è´æŠ•å±ï¼Œç»“æœå‘ç°å®ƒæ˜¯æ­£å¸¸çš„ã€‚ç”±äºå½“è´æŠ•å±æ˜¯ä¸ªé»‘ç›’å­ï¼Œæ‰€ä»¥å†³å®šæŠ“åŒ…çœ‹ä¸€ä¸‹ã€‚</p><p><a href="https://www.androidtcpdump.com/android-tcpdump/downloads">Android tcpdump</a></p><p><code>tcpdump tcp -i any -p -s 0 -w /sdcard/capture.pcap</code></p><h2 id="å½“è´æŠ•å±æŠ“åŒ…åˆ†æ"><a href="#å½“è´æŠ•å±æŠ“åŒ…åˆ†æ" class="headerlink" title="å½“è´æŠ•å±æŠ“åŒ…åˆ†æ"></a>å½“è´æŠ•å±æŠ“åŒ…åˆ†æ</h2><p>è¿è¡Œå‘½ä»¤åå¼€å§‹æŠ•å‰§é›†åˆ°å½“è´æŠ•å±å¹¶é€šè¿‡è¿›åº¦æ¡æ“ä½œè§¦å‘åˆ‡é›†ï¼ŒæŠŠæŠ“åŒ…æ–‡ä»¶adb pullå‡ºæ¥æ”¾åˆ°WireSharkå»åˆ†æã€‚</p><p>ç”±äºDLNAå»ºè¿åçš„å‘½ä»¤äº¤äº’æ˜¯é€šè¿‡httpçš„ï¼Œæ‰€ä»¥è¿™é‡Œåªæ˜¾ç¤ºhttpåè®®ï¼Œå¹¶é€šè¿‡æœç´¢SetAVTransportURIå®šä½åˆ°æŠ•å±æ—¶é—´ç‚¹ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/wesley666/picgo/img2023/202412082026499-wireshark.jpg" alt="img_v3_02h8_65bf3dab-7966-48b1-bdaa-8343bca7898g"></p><p>é¦–å…ˆçœ‹ä¸€ä¸‹å³å°†åˆ‡é›†å‰æ‰‹æœºç«¯è·å–åˆ°çš„ä¿¡æ¯ï¼š</p><p>å¯ä»¥çœ‹åˆ°å½±ç‰‡çš„æ—¶é•¿å’Œè¿›åº¦éƒ½æœ‰å€¼ï¼Œå¿«æ’­å®Œäº†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/wesley666/picgo/img2023/202412082039758-wireshark.jpg" alt="img_v3_02h8_fe3604f0-5242-41b8-b950-fab2c62663dg"></p><p>åˆ‡é›†æ—¶ï¼š</p><p>æ‰‹æœºç«¯è·å–åˆ°çš„æ’­æ”¾çŠ¶æ€æ˜¯stoppedï¼Œå½±ç‰‡æ—¶é•¿å’Œè¿›åº¦éƒ½æ˜¯0</p><p><img src="https://cdn.jsdelivr.net/gh/wesley666/picgo/img2023/202412082042875.jpg" alt="img_v3_02h8_954cb5c2-08c9-47ec-8d47-0c14b51b600g"></p><p><img src="https://cdn.jsdelivr.net/gh/wesley666/picgo/img2023/202412082041740.jpg" alt="img_v3_02h8_613904b8-aa1e-4128-b904-164ff238ed3g"></p><p>åˆ‡é›†åï¼š</p><p>æ‰‹æœºç«¯è·å–çš„ä¿¡æ¯æ­£å¸¸</p><p><img src="https://cdn.jsdelivr.net/gh/wesley666/picgo/img2023/202412082044535.jpg" alt="img_v3_02h8_f8a5dc01-ae9d-47d8-9abc-0a395a68bd8g"></p><h2 id="æˆ‘å¸æŠ•å±æŠ“åŒ…åˆ†æ"><a href="#æˆ‘å¸æŠ•å±æŠ“åŒ…åˆ†æ" class="headerlink" title="æˆ‘å¸æŠ•å±æŠ“åŒ…åˆ†æ"></a>æˆ‘å¸æŠ•å±æŠ“åŒ…åˆ†æ</h2><p>åˆ‡é›†å‰ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/wesley666/picgo/img2023/202412082045162.jpg" alt="img_v3_02h8_ef543816-16f1-4e55-a74b-e703ef21e46g"></p><p>åˆ‡é›†åï¼š</p><p>è·å–åˆ°çš„å½±ç‰‡è¿›åº¦å’Œæ—¶é•¿éƒ½æ˜¯ä¸Šä¸ªè§†é¢‘çš„ä¿¡æ¯ï¼Œå¯¼è‡´å’ªå’•äº§ç”Ÿäº†è¯¯åˆ¤æ–­ï¼Œè®¤ä¸ºè¿™ä¸€é›†ä¹Ÿæ’­å®Œäº†ï¼Œé€ æˆè·³é›†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/wesley666/picgo/img2023/202412082045275.jpg" alt="img_v3_02h8_dac2eede-52f2-4137-8b42-18b7081eaaeg"></p><h2 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h2><p>æ”¶åˆ°æ‰‹æœºç«¯çš„stopæŒ‡ä»¤åï¼Œç«‹å³å°†æ’­æ”¾çŠ¶æ€ç½®stoppedï¼ŒåŒæ—¶å°†å½±ç‰‡æ—¶é•¿å’Œè¿›åº¦ä¹Ÿç½®0ã€‚æ­¤å¤–ï¼Œè¿˜è¦æ‹¦æˆªæ’­æ”¾å™¨åˆ°æ‰‹æœºç«¯çš„çŠ¶æ€åŒæ­¥ç›´åˆ°æ–°çš„è§†é¢‘èµ·æ’­ã€‚</p><p>å¦å¤–è¿˜è¦æ³¨æ„å¤„ç†çº¿ç¨‹è°ƒåº¦å»¶è¿Ÿçš„é—®é¢˜ï¼Œå¦‚æœstopæŒ‡ä»¤å’ŒsetUriæŒ‡ä»¤å‘é€æ—¶é—´æ¯”è¾ƒæ¥è¿‘ï¼Œè™½ç„¶çœ‹èµ·æ¥æ˜¯stopåœ¨å‰ï¼ŒsetUriåœ¨åï¼Œä½†å¦‚æœæ˜¯åœ¨ä¸åŒçº¿ç¨‹å›è°ƒä¸Šæ¥çš„ï¼Œå¯èƒ½å­˜åœ¨setUriå…ˆæ‰§è¡Œçš„æƒ…å†µï¼Œè¦æ³¨æ„å¤„ç†è¿™ç§æƒ…å†µï¼Œé¿å…è¯¯é€€å‡ºã€‚</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;QAåœ¨æµ‹è¯•å…¬å¸æŠ•å±åº”ç”¨æ—¶ï¼Œå‘ç°å’ªå’•è§†é¢‘DLNAæŠ•å‰§é›†æ—¶æœ‰æ—¶å€™ä¼šè·³è¿‡ä¸€é›†ç›´æ¥æ’­ä¸‹ä¸€é›†çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å°è¯•è‡ªè¡Œåˆ†æè§£å†³ä¸äº†åï¼Œæˆ‘å†³å®šåˆ†æä¸€ä¸‹ç«å“åº”ç”¨ï¼šå½“è´æŠ•å±ï¼Œç»“æœå‘ç°å®ƒæ˜¯æ­£å¸¸çš„ã€‚ç”±äºå½“è´æŠ•å±æ˜¯ä¸ªé»‘ç›’å­ï¼Œæ‰€ä»¥å†³å®šæŠ“åŒ…çœ‹ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a</summary>
        
      
    
    
    
    <category term="æŠ•å±" scheme="https://iwesley.top/categories/%E6%8A%95%E5%B1%8F/"/>
    
    
    <category term="æŠ•å±" scheme="https://iwesley.top/tags/%E6%8A%95%E5%B1%8F/"/>
    
    <category term="DLNA" scheme="https://iwesley.top/tags/DLNA/"/>
    
  </entry>
  
</feed>
